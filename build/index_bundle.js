/*! For license information please see index_bundle.js.LICENSE.txt */
(()=>{var e={1976:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i),c=r(7352),s=r(168),l=a()(o());l.i(c.Z),l.i(s.Z),l.push([e.id,"body{font-family:Helvetica,Arial,sans-serif;padding:0;margin:0;--gap-beetween-blocks: 5px;--big-gap-beetween-blocks: 10px;--phone-menu-height: 40px;--tablet-menu-height: 40px}body textarea{font-family:Helvetica,Arial,sans-serif;resize:none}body input:focus::-webkit-input-placeholder{color:rgba(0,0,0,0)}body input:focus:-moz-placeholder{color:rgba(0,0,0,0)}body input:focus::-moz-placeholder{color:rgba(0,0,0,0)}body input:focus:-ms-input-placeholder{color:rgba(0,0,0,0)}body input:focus::placeholder{color:rgba(0,0,0,0)}body textarea:focus::-webkit-input-placeholder{color:rgba(0,0,0,0)}body textarea:focus:-moz-placeholder{color:rgba(0,0,0,0)}body textarea:focus::-moz-placeholder{color:rgba(0,0,0,0)}body textarea:focus:-ms-input-placeholder{color:rgba(0,0,0,0)}body textarea:focus::placeholder{color:rgba(0,0,0,0)}",""]);const u=l},9680:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".attachment{position:relative;overflow:hidden}.attachment__preview{object-fit:cover;height:100px;width:100px;border-radius:35%;outline:2px solid gray;outline-offset:-2px}.attachment__remove{z-index:10;object-fit:cover;position:absolute;height:16px;width:16px;top:4px;right:4px;padding:5px;border-radius:25%;background-color:red;box-shadow:-5px 5px 10px 0px rgba(0,0,0,.2);cursor:pointer}.attachment__remove:hover{transform:scale(1.05)}.attachment__remove:active{transform:scale(0.95)}",""]);const c=a},9978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".root{background-color:var(--color-root-background)}.root__wrapper{width:100%;height:100vh;display:flex;flex-direction:column;gap:var(--big-gap-beetween-blocks)}.root__header{flex:0 0 auto;background-color:var(--color-header-background);box-shadow:0px 5px 10px rgba(0,0,0,.15);padding:5px 10px}.root__footer{width:100%;position:fixed;bottom:0;background-color:var(--color-footer-background)}.root-content{height:100%;display:grid;gap:10px;overflow:hidden;padding:0}@media screen and (max-device-width: 699px){.root-content{grid-template-columns:1fr}}@media screen and (max-width: 699px){.root-content{grid-template-columns:1fr}}@media screen and (min-width: 700px){.root-content{grid-template-columns:1fr 5fr 1fr}}.root-content__menu{display:flex;flex-direction:column}@media screen and (max-device-width: 700px){.root-content__menu{position:absolute;bottom:0}}@media screen and (max-width: 700px){.root-content__menu{position:absolute;bottom:0}}.root-content__menu--left{align-items:flex-end}@media screen and (max-device-width: 700px),screen and (max-width: 700px){.root-content__menu--left{position:absolute;align-items:center;bottom:0;left:0;width:100vw}}.root-content__menu--right{align-items:flex-start}@media screen and (max-device-width: 700px){.root-content__menu--right{display:none}}@media screen and (max-width: 700px){.root-content__menu--right{display:none}}.root-content__main{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;gap:var(--big-gap-beetween-blocks);overflow:hidden}@media screen and (max-width: 700px){.root-content__main{height:calc(100% - var(--tablet-menu-height))}}@media screen and (max-device-width: 700px){.root-content__main{height:calc(100% - var(--phone-menu-height))}}",""]);const c=a},2106:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".navbar-chat{display:flex;justify-content:space-between;align-items:center;gap:5px}.navbar-chat__nav{display:flex;align-items:center}.navbar-chat__avatar{object-fit:cover;height:40px;width:40px;background-color:#d3d3d3;border:1px solid #a9a9a9;outline-offset:-1px;border-radius:50%;-webkit-border-radius:50%;-khtml-border-radius:50%;-moz-border-radius:50%;cursor:pointer}.navbar-chat__name{word-wrap:break-word;font-size:18px;font-weight:bolder;color:var(--color-chat-navbar-name);cursor:pointer}.navbar-chat-button{display:flex;align-items:center;cursor:pointer;gap:var(--big-gap-beetween-blocks)}.navbar-chat-button__icon{object-fit:cover;height:24px;width:auto}.navbar-chat-button__text{color:gray;font-size:13px}.navbar-chat-button:hover{transform:scale(1.05)}",""]);const c=a},2933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".comment{display:flex;padding:15px 25px;background:var(--color-feed-card-background);border:2px solid var(--color-feed-card-border);outline-offset:-2px;border-radius:10px;gap:10px}.comment__wrapper{display:flex;flex-direction:column;gap:10px;width:100%}.comment__content{width:100%;margin:8px 0px;color:var(--color-feed-card-text);font-size:15px;word-wrap:break-word}.comment__date{font-size:13px;color:var(--color-feed-card-date)}.comment__header{display:flex;justify-content:space-between}.comment__buttons{display:flex;gap:5px;margin-left:10px}.comment__button{object-fit:contain;width:20px;height:auto;cursor:pointer;filter:var(--current-theme-invert-value)}.comment__button:hover{transform:scale(1.05)}.comment-user__avatar{object-fit:cover;height:40px;width:40px;border-radius:50%;background-color:var(--color-feed-card-img-background);border:1px solid var(--color-feed-card-img-border);outline-offset:-1px;margin-right:var(--big-gap-beetween-blocks)}.comment-user__name{display:flex;color:var(--color-feed-card-author-name);font-size:16px;font-weight:bolder}",""]);const c=a},9312:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".comment-create{display:grid;grid-template-columns:min-content auto min-content;gap:8px;padding:10px 15px;border-radius:10px;background-color:var(--color-feed-card-background);width:100%}.comment-create__tools{display:flex;flex-direction:column;gap:5px}.comment-create__form{display:flex;flex-direction:column;min-width:100px}.comment-create__textarea{min-height:80px;padding:5px 8px;border-radius:10px;border:2px solid var(--color-chat-message-create-border);outline-offset:-2px;font-size:14px;background-color:var(--color-chat-message-create-background);color:var(--color-chat-message-create-text)}.comment-create__textarea:focus{outline-color:var(--color-chat-message-create-border-focus)}.comment-create__textarea::-webkit-scrollbar{width:0;height:0}.comment-create-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px}.comment-create-button--big{background-color:var(--color-button-background);padding:4px 8px}.comment-create-button--big:hover{background-color:#24dc83}.comment-create-button--big:active{background-color:#24b66f}@media screen and (max-device-width: 799px){.comment-create-button--big{width:10%;min-width:min-content;max-width:150px;padding:12px}}.comment-create-button--small{background-color:inherit}.comment-create-button--small:hover{transform:scale(1.05)}.comment-create-button--small:active{transform:scale(0.95)}.comment-create-button__icon{object-fit:contain;width:20px}.comment-create-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}@media screen and (max-device-width: 799px){.comment-create-button__text{display:none}}",""]);const c=a},6305:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".comment-section{display:flex;flex-direction:column;padding:0 25px;height:400px;gap:10px}@media screen and (max-device-width: 700px){.comment-section{gap:5px}}.comment-section__comments{display:flex;flex-direction:column;gap:10px;overflow-x:hidden;overflow-y:scroll;gap:10px}.comment-section__creation{display:flex}.comment-section--hide{display:none !important}",""]);const c=a},9149:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".community-data{display:flex;gap:8px;align-items:center}.community-data__container{display:flex;flex-direction:column;gap:15px}.community-data__avatar{object-fit:cover;height:80px;width:80px;flex-shrink:0;background-color:var(--color-profile-img-background);border:1px solid var(--color-profile-img-border);border-radius:50%;-webkit-border-radius:50%;-khtml-border-radius:50%;-moz-border-radius:50%}.community-data__name{font-size:16px;color:var(--color-profile-name)}.community-data__category{font-size:14px;color:var(--color-profile-name)}.community-data__description{font-size:14px;color:var(--color-profile-name);word-break:break-word;padding-right:10px}",""]);const c=a},8987:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".community-list-item{display:flex;gap:var(--big-gap-beetween-blocks);width:auto;padding:10px 20px;border-radius:10px;background-color:var(--color-friend-block-background)}.community-list-item__wrapper{display:flex;flex-direction:column;width:100%;gap:var(--big-gap-beetween-blocks)}.community-list-item__tools{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--gap-beetween-blocks);justify-content:right}.community-list-item__avatar{background-color:var(--color-profile-img-background);border:1px solid var(--color-profile-img-border);border-radius:50%;-webkit-border-radius:50%;-khtml-border-radius:50%;-moz-border-radius:50%;cursor:pointer;object-fit:cover;height:80px;width:80px;flex-shrink:0}.community-list-item__name{font-size:16px;cursor:pointer;color:var(--color-profile-name)}.community-list-item__description{font-size:14px;cursor:pointer;color:var(--color-profile-name);white-space:nowrap;width:250px;overflow:hidden;text-overflow:ellipsis}.community-list-item-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px;padding:6px 10px}.community-list-item-button__icon{object-fit:contain;width:20px}.community-list-item-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}.community-list-item-button--green{background-color:var(--color-button-background)}.community-list-item-button--green:hover{background-color:#24dc83}.community-list-item-button--green:active{background-color:#24b66f}.community-list-item-button--red{background-color:#f44848}.community-list-item-button--red:hover{background-color:#f64f4f}.community-list-item-button--red:active{background-color:#e03f3f}",""]);const c=a},5025:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".community-list-navbar{display:flex;gap:var(--gap-beetween-blocks);width:100%;height:min-content;padding:10px 15px;background-color:var(--color-feed-navbar-backgroung);border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px}.community-list-navbar-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px;padding:7px 15px;background-color:var(--color-button-background)}.community-list-navbar-button__icon{object-fit:contain;width:20px}.community-list-navbar-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}@media screen and (max-device-width: 799px){.community-list-navbar-button__text{display:none}}.community-list-navbar-button:hover{background-color:#24dc83}.community-list-navbar-button:active{background-color:#24b66f}.community-list-navbar-search{display:flex;gap:5px;align-items:center;width:100%;padding:5px 10px;border:2px solid var(--color-input-border);border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px}.community-list-navbar-searchfocus{border-style:none;outline-color:var(--color-input-border-focus)}.community-list-navbar-search__input{margin:0;padding:0;width:100%;border:none;outline:none;font-size:14px;cursor:text;text-overflow:ellipsis;background-color:var(--color-feed-navbar-backgroung);color:var(--color-feed-navbar-text)}.community-list-navbar-search__input:focus{border:none;outline:none}.community-list-navbar-search__icon{object-fit:contain;height:20px;width:auto;cursor:pointer;filter:var(--current-theme-invert-value)}",""]);const c=a},5311:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".community-buttons{display:flex;flex-direction:column;gap:10px;width:max-content;height:min-content}.community-button{display:flex;align-items:center;gap:5px;width:100%;cursor:pointer;border:none;outline:none;border-radius:8px;padding:8px 15px}.community-button__icon{object-fit:contain;width:24px}.community-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:16px}@media screen and (max-device-width: 799px){.community-button__text{display:none}}.community-button--green{background-color:var(--color-button-background)}.community-button--green:hover{background-color:#24dc83}.community-button--green:active{background-color:#24b66f}.community-button--red{background-color:#f44848}.community-button--red:hover{background-color:#f64f4f}.community-button--red:active{background-color:#e03f3f}",""]);const c=a},3935:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".dialog{display:flex;align-items:center;gap:10px;padding:10px 15px;border:2px solid #d3d3d3;border-radius:10px;cursor:pointer}.dialog__wrapper{display:flex;flex-direction:column;gap:8px}.dialog-user__avatar{object-fit:cover;height:50px;width:50px;border-radius:50%}.dialog-user__name{color:var(--color-dialog-name-text);font-size:16px;font-weight:bolder}",""]);const c=a},3780:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".feed-card{display:flex;flex-direction:column;padding:15px 25px;background:var(--color-feed-card-background);border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px}.feed-card__header{display:flex;justify-content:space-between}.feed-card__content{width:100%;margin:8px 0px;color:var(--color-feed-card-text);font-size:15px;line-break:anywhere;white-space:pre-line}.feed-card__attachments{display:flex;gap:10px;width:100%;overflow-y:hidden;overflow-x:scroll}.feed-card__picture{margin:0 auto;object-fit:contain;max-height:250px;background-color:var(--color-feed-card-img-background);border:2px solid var(--color-feed-card-img-border);outline-offset:-2px;border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px}@media screen and (max-device-width: 800px),screen and (max-width: 800px){.feed-card__picture{width:95%}}.feed-card__attachments::-webkit-scrollbar{height:15px}.feed-card__attachments::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.feed-card__attachments::-webkit-scrollbar-thumb{border:5px solid var(--color-feed-card-background);border-radius:9999px;background-color:#d3d3d3}.feed-card__footer{display:flex;justify-content:space-between;margin-top:5px}.feed-card__buttons{display:flex;gap:10px}.feed-card__button{object-fit:contain;width:25px;height:auto;cursor:pointer;filter:var(--current-theme-invert-value)}.feed-card__button__liked{filter:none}.feed-card__button__edit{width:20px}.feed-card__button:hover{transform:scale(1.05)}.feed-card__date{font-size:13px;color:var(--color-feed-card-date)}.feed-card-author{display:flex;gap:10px;cursor:pointer}.feed-card-author__avatar{object-fit:cover;height:40px;width:40px;border-radius:50%;-webkit-border-radius:50%;-khtml-border-radius:50%;-moz-border-radius:50%;background-color:var(--color-feed-card-img-background);border:1px solid var(--color-feed-card-img-border);outline-offset:-1px}.feed-card-author__name{color:var(--color-feed-card-author-name);font-size:16px;font-weight:bolder}.feed-card-likes{display:flex;gap:5px;align-items:center}.feed-card-likes__icon{object-fit:contain;height:13px}.feed-card-likes__count{color:var(--color-feed-card-likes);font-size:13px}",""]);const c=a},6895:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".feed-card-create{display:flex;max-width:90%;max-height:90%;gap:10px;padding:20px 25px;background:var(--color-feed-card-background);border:2px solid var(--color-feed-card-border);border-radius:10px}@media screen and (max-device-width: 700px){.feed-card-create{gap:5px}}.feed-card-create__content{display:flex;flex-direction:column;align-items:flex-end;gap:10px;width:100%}.feed-card-create__text{min-width:50vw;min-height:20vh;font-size:14px;padding:5px 8px;border-radius:10px;border:2px solid var(--color-feed-card-border);background-color:var(--color-feed-card-create-text-background);color:var(--color-feed-card-create-text)}.feed-card-create__text:focus{border:2px solid var(--color-feed-card-border)}.feed-card-create__attachments{overflow-x:scroll;display:flex;flex-direction:row;gap:10px;margin:auto}.feed-card-create__tools{display:flex;flex-direction:column;gap:8px}.feed-card-create__tools--row{flex-direction:row}.feed-card-create--err{border:2px solid red}.feed-card-create-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px}.feed-card-create-button--big{background-color:var(--color-button-background);padding:4px 8px}.feed-card-create-button--big:hover{background-color:#24dc83}.feed-card-create-button--big:active{background-color:#24b66f}@media screen and (max-device-width: 799px){.feed-card-create-button--big{width:10%;min-width:min-content;max-width:150px;padding:12px}}.feed-card-create-button--small{background-color:inherit}.feed-card-create-button--small:hover{transform:scale(1.05)}.feed-card-create-button__icon{object-fit:contain;width:20px}.feed-card-create-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}@media screen and (max-device-width: 799px){.feed-card-create-button__text{display:none}}.feed-card-create-button--red{background-color:#f44848}.feed-card-create-button--red:hover{background-color:#f64f4f}.feed-card-create-author{display:flex;gap:8px}.feed-card-create-author__avatar{object-fit:cover;height:42px;width:42px;background-color:var(--color-profile-img-background);border:1px solid var(--color-profile-img-border);border-radius:50%}@media screen and (max-device-width: 700px){.feed-card-create-author__avatar{height:25px;width:25px}}.feed-card-create-button__smiles:hover .smiles{display:block}.feed-card-create-button__smiles .smiles{bottom:20px}@media screen and (max-device-width: 1150px),screen and (max-width: 1150px){.feed-card-create-button__smiles .smiles{right:-24px}}.feed-card-create-button__smiles .smiles:hover{display:block}",""]);const c=a},4678:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".feed-navbar{display:flex;gap:var(--gap-beetween-blocks);width:auto;height:min-content;padding:10px 15px;background-color:var(--color-feed-navbar-backgroung);border-radius:10px}.feed-navbar-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px;padding:7px 15px;background-color:var(--color-button-background)}.feed-navbar-button__icon{object-fit:contain;width:20px}.feed-navbar-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}@media screen and (max-device-width: 799px){.feed-navbar-button__text{display:none}}.feed-navbar-button:hover{background-color:#24dc83}.feed-navbar-button:active{background-color:#24b66f}.feed-navbar-search{display:flex;gap:5px;align-items:center;width:100%;padding:5px 10px;border:2px solid var(--color-input-border);border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px}.feed-navbar-searchfocus{border-style:none;outline-color:var(--color-input-border-focus)}.feed-navbar-search__input{margin:0;padding:0;width:100%;border:none;outline:none;font-size:14px;cursor:text;text-overflow:ellipsis;background-color:var(--color-feed-navbar-backgroung);color:var(--color-feed-navbar-text)}.feed-navbar-search__input:focus{border:none;outline:none}.feed-navbar-search__icon{object-fit:contain;height:20px;width:auto;cursor:pointer;filter:var(--current-theme-invert-value)}",""]);const c=a},7386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".form{display:flex;flex-direction:column;gap:20px;width:auto;height:min-content;padding:8% 15%;border:2px solid var(--color-form-border);outline-offset:-2px;border-radius:10px;background-color:var(--color-form-background);color:var(--color-form-text)}.form__title{font-size:26px;font-weight:bold;text-align:center;word-wrap:break-word;color:var(--color-form-title);margin-bottom:10px}.form__content{display:flex;flex-direction:column;align-items:center;gap:10px}.form__footer{display:flex;flex-direction:column;align-items:center;gap:5px}.form__button{cursor:pointer;width:min-content;height:min-content;border:none;outline:none;border-radius:8px;padding:8px 15px;background-color:var(--color-button-background);color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:16px}.form__button:hover{border:none;outline:none;box-shadow:0 5px 5px 1px var(--color-light-gray)}.form__button:focus{border:2px solid var(--color-button-border-focus);outline-offset:-2px;box-shadow:0 3px 5px 1px var(--color-lighter-gray)}.form__button:active{outline:none;border-style:none;background-color:var(--color-button-background-pressed)}.form__button:disabled{background-color:var(--color-button-background-disabled)}.form__link{margin-top:10px;text-decoration:none;color:var(--color-link-value);font-size:16px}.form__link:hover{text-decoration:underline var(--color-link-underline-hover)}.form__link:active{color:var(--color-link-value-pressed);text-decoration:underline var(--color-limk-underline-pressed)}.form fieldset{border:none;outline:none}.input-with-title{display:flex;flex-direction:column;gap:4px;width:100%}.input-with-title__title{color:var(--color-input-title);font-size:16px}.input-with-title__input{padding:10px 20px;border:none;border:2px solid var(--color-input-border);outline-offset:-2px;border-radius:8px;font-size:16px;color:inherit;background-color:var(--color-feed-card-background)}.input-with-title__input:disabled{background-color:var(--color-input-disabled)}.input-with-title__input:focus{border-style:none;outline-color:var(--color-input-border-focus)}.input-with-title__error-msg{color:var(--color-input-value-error);font-size:16px;display:none}.input-with-title--error input{color:var(--color-input-value-error);outline-color:var(--color-input-border-error)}.input-with-title--error .input-with-title__error-msg{display:block}.input-with-title--error:focus{color:var(--color-input-value-error);outline-color:var(--color-input-border-focus-error)}",""]);const c=a},2186:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".friend{display:flex;gap:var(--big-gap-beetween-blocks);width:auto;padding:10px 20px;border-radius:10px;background-color:var(--color-friend-block-background)}.friend__wrapper{display:flex;flex-direction:column;width:100%;gap:var(--big-gap-beetween-blocks)}.friend__info{font-size:14px;font-weight:bolder;color:#d8d8d8}.friend__tools{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--gap-beetween-blocks)}.friend__avatar{background-color:var(--color-profile-img-background);border:1px solid var(--color-profile-img-border);border-radius:50%;-khtml-border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;cursor:pointer;object-fit:cover;height:80px;width:80px}.friend__name{font-size:16px;cursor:pointer;color:var(--color-profile-name)}.friend-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px;padding:6px 10px}.friend-button__icon{object-fit:contain;width:20px}.friend-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}.friend-button--green{background-color:var(--color-button-background)}.friend-button--green:hover{background-color:#24dc83}.friend-button--green:active{background-color:#24b66f}.friend-button--red{background-color:#f44848}.friend-button--red:hover{background-color:#f64f4f}.friend-button--red:active{background-color:#e03f3f}",""]);const c=a},3034:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".friends-navbar{display:flex;gap:var(--gap-beetween-blocks);width:100%;height:min-content;padding:10px 15px;background-color:var(--color-feed-navbar-backgroung);border-radius:10px}.friends-navbar-search{display:flex;gap:5px;align-items:center;width:100%;padding:5px 10px;border:2px solid var(--color-input-border);border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px}.friends-navbar-searchfocus{border-style:none;outline-color:var(--color-input-border-focus)}.friends-navbar-search__input{margin:0;padding:0;width:100%;border:none;outline:none;font-size:14px;cursor:text;text-overflow:ellipsis;background-color:var(--color-feed-navbar-backgroung);color:var(--color-feed-navbar-text)}.friends-navbar-search__input:focus{border:none;outline:none}.friends-navbar-search__icon{object-fit:contain;height:20px;width:auto;cursor:pointer;filter:var(--current-theme-invert-value)}",""]);const c=a},5177:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".header-item-button{height:min-content;display:flex;align-items:center;border:none;border:2px solid var(--color-button-background);outline-offset:-2px;border-radius:10px;padding:6px 10px;cursor:pointer;background-color:inherit}.header-item-button__text{color:var(--color-button-background);font-weight:bolder;font-size:16px;text-decoration:none;text-align:center}",""]);const c=a},5740:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".header-item-profile{display:flex;gap:10px;align-items:center;border:2px solid var(--color-button-background);outline-offset:-2px;border-radius:8px;-webkit-border-radius:8px;-khtml-border-radius:8px;-moz-border-radius:8px;padding:3px 10px;text-decoration:none;cursor:pointer}.header-item-profile__avatar{object-fit:cover;height:30px;width:30px;border:2px solid inherit;border-radius:50%;background-color:var(--color-profile-img-background)}.header-item-profile__name{font-size:14px;font-weight:bold;color:var(--color-input-value)}.header-item-settings{display:flex;align-items:center;border:2px solid var(--color-button-background);outline-offset:-2px;border-radius:8px;-webkit-border-radius:8px;-khtml-border-radius:8px;-moz-border-radius:8px;padding:5px;cursor:pointer}.header-item-settings__icon{max-width:100%;max-height:30px;object-fit:cover}",""]);const c=a},7859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".message{display:flex;gap:8px;width:100%}.message__wrapper{width:100%;display:flex;flex-direction:column;gap:4px}.message__content{display:flex;flex-direction:column;width:100%;gap:5px;padding:2px 0}.message__date{color:gray;font-size:13px}.message__text{color:var(--coloor-chat-message-text);font-size:14px;line-break:anywhere;white-space:pre-line}.message__attachments__img{width:50%}@media screen and (max-device-width: 800px),screen and (max-width: 800px){.message__attachments__img{width:100%}}.author-message{display:flex;gap:5px;width:fit-content}.author-message__name{font-size:13px;color:var(--color-chat-author-message-name);cursor:pointer}.author-message__avatar{border-radius:50%;-webkit-border-radius:50%;-khtml-border-radius:50%;-moz-border-radius:50%;height:30px;width:30px;object-fit:cover;background-color:var(--color-profile-img-background);border:1px solid #676767;outline-offset:-1px;cursor:pointer}",""]);const c=a},2526:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".message-create{display:grid;grid-template-columns:min-content auto min-content;gap:8px;padding:10px 15px;border-top:1px solid var(--color-chat-message-create-border);border-bottom-left-radius:10px;border-bottom-right-radius:10px;background-color:var(--color-chat-background)}.message-create__tools{display:flex;flex-direction:column;gap:5px}.message-create__form{display:flex;flex-direction:column;min-width:100px;max-width:100%}.message-create__textarea{display:inline-block;min-height:80px;padding:5px 8px;border-radius:10px;border:2px solid var(--color-chat-message-create-border);font-size:14px;background-color:var(--color-chat-message-create-background);color:var(--color-chat-message-create-text)}.message-create__textarea:focus{outline-color:var(--color-chat-message-create-border-focus)}.message-create__textarea::-webkit-scrollbar{width:0;height:0}.message-create--err{border:2px solid red}.message-create__attachments{margin-top:5px}.message-create-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px}.message-create-button--big{background-color:var(--color-button-background);padding:4px 8px}.message-create-button--big:hover{background-color:#24dc83}.message-create-button--big:active{background-color:#24b66f}@media screen and (max-device-width: 799px){.message-create-button--big{width:10%;min-width:min-content;max-width:150px;padding:12px}}.message-create-button--small{background-color:inherit}.message-create-button--small:hover{transform:scale(1.05)}.message-create-button__icon{object-fit:contain;width:20px}.message-create-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:14px}@media screen and (max-device-width: 799px){.message-create-button__text{display:none}}.message-create-button__smiles:hover .smiles{display:block}.message-create-button__smiles:hover .stickers{display:block}.message-create-button__smiles .smiles{bottom:20px}.message-create-button__smiles .smiles:hover{display:block}.message-create-button__smiles .stickers{bottom:20px}.message-create-button__smiles .stickers:hover{display:block}",""]);const c=a},3391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".profile-buttons{display:flex;flex-direction:column;gap:10px;width:max-content;height:min-content}.profile-button{display:flex;align-items:center;gap:5px;width:100%;cursor:pointer;border:none;outline:none;border-radius:8px;padding:8px 15px}.profile-button__icon{object-fit:contain;width:24px}.profile-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:16px}@media screen and (max-device-width: 799px){.profile-button__text{display:none}}.profile-button--green{background-color:var(--color-button-background)}.profile-button--green:hover{background-color:#24dc83}.profile-button--green:active{background-color:#24b66f}.profile-button--red{background-color:#f44848}.profile-button--red:hover{background-color:#f64f4f}.profile-button--red:active{background-color:#e03f3f}",""]);const c=a},6336:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".profile-user{display:flex;gap:15px;align-items:center}.profile-user__avatar{object-fit:cover;height:80px;width:80px;background-color:var(--color-profile-img-background);border:1px solid var(--color-profile-img-border);border-radius:50%;-webkit-border-radius:50%}.profile-user__name{font-size:16px;color:var(--color-profile-name)}",""]);const c=a},561:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".settings-group{display:flex;flex-direction:column;align-items:flex-end;gap:10px;background-color:var(--color-form-background);color:var(--color-form-title);border-radius:10px;padding:20px 25px}.settings-group__button{cursor:pointer;height:min-content;width:min-content;border:none;outline:none;border-radius:8px;padding:8px 10px;background-color:var(--color-button-background);color:var(--color-button-value);font-weight:bolder}.settings-group__button:hover{border:none;outline:none;box-shadow:0 5px 5px 1px var(--color-light-gray)}.settings-group__button:focus{border:2px solid var(--color-button-border-focus);outline-offset:-2px;box-shadow:0 3px 5px 1px var(--color-lighter-gray)}.settings-group__button:active{outline:none;border-style:none;background-color:var(--color-button-background-pressed)}.settings-input-with-title{display:flex;flex-direction:column;gap:4px;width:100%}.settings-input-with-title__title{color:var(--color-input-title);font-size:16px}.settings-input-with-title__input{padding:10px 20px;border:none;border:2px solid var(--color-input-border);outline-offset:-2px;border-radius:8px;font-size:16px;color:var(--color-feed-navbar-text);background-color:var(--color-feed-navbar-background)}.settings-input-with-title__input:focus{border-style:none;outline-color:var(--color-input-border-focus)}.settings-input-with-title__error-msg{color:var(--color-input-value-error);font-size:16px;display:none}.settings-input-with-title--error input{color:var(--color-input-value-error);outline-color:var(--color-input-border-error)}.settings-input-with-title--error .settings-input-with-title__error-msg{display:block}.settings-input-with-title--error:focus{color:var(--color-input-value-error);outline-color:var(--color-input-border-focus-error)}",""]);const c=a},8422:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".smiles{display:none;position:absolute;width:200px;height:200px;border:1px solid gray;border-radius:5px;padding:10px;overflow-y:scroll;background-color:var(--color-feed-card-background);color:var(--color-feed-card-text)}.smiles-block{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:20px}.smiles-block__smile{padding:6px}.smiles-block__smile:hover{background-color:gray;border-radius:5px;cursor:pointer}",""]);const c=a},125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".stickers{display:none;position:absolute;width:200px;height:200px;border:1px solid gray;border-radius:5px;padding:10px;overflow-y:scroll;background-color:var(--color-feed-card-background);color:var(--color-feed-card-text)}.stickers-block{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:20px;gap:10px}.stickers-block__smile{padding:6px}.stickers-block__smile:hover{background-color:gray;border-radius:5px;cursor:pointer}.stickers-block__sticker{width:86px}.stickers-block__sticker:hover{background-color:gray;border-radius:5px;cursor:pointer}",""]);const c=a},4782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".about-ws{overflow:auto;height:100%;padding-bottom:20px}.about-ws .typewriter h1{display:block;color:#21c700;font-family:monospace;font-style:bold;font-size:65px;overflow:hidden;border-right:.15em solid orange;white-space:nowrap;margin:0 auto;letter-spacing:.15em;animation:typing 3s steps(12, end),blink-caret 1s step-end infinite}@media screen and (max-device-width: 650px){.about-ws .typewriter h1{font-size:35px;margin:0 10px}}.about-ws .typewriter-wrapper{display:flex}@keyframes typing{from{width:0}to{width:100%}}@keyframes blink-caret{from,to{border-color:rgba(0,0,0,0)}50%{border-color:orange}}.about-ws .info-flex{display:flex;justify-content:center;flex-wrap:wrap;margin:40px}.about-ws .info-block{font-size:15px;text-align:center;padding:10px;margin:5px;overflow:hidden;display:block;width:220px;height:100px;background-color:#fff;border-radius:5px;transform-style:preserve-3d;transform:rotate3d(0, 0, 0);transition:font-size 2s,width 2s,height 2s,transform 2s;box-shadow:1px 1px 0 1px #f9f9fb,-1px 0 28px 0 rgba(34,33,81,.01),54px 54px 28px -10px rgba(34,33,81,.15);background-color:var(--color-feed-card-background);color:var(--color-feed-card-text)}@media screen and (max-device-width: 650px){.about-ws .info-block{width:100%;font-size:20px;box-shadow:none}}@media screen and (max-width: 760px){.about-ws .info-block{width:100%;height:60px}}.about-ws .description{margin:25px;color:var(--color-feed-card-text)}.about-ws .block-links{margin-left:25px}.about-ws .button{cursor:pointer;width:min-content;height:min-content;border:none;outline:none;border-radius:8px;padding:8px 15px;background-color:var(--color-button-background);color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:16px;text-decoration:none}",""]);const c=a},6801:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".attachments-container{display:flex;gap:10px}",""]);const c=a},607:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".avatar-upload{width:40%;display:flex;flex-direction:column;gap:10px;align-items:center;overflow:hidden;padding:15px 20px;background-color:var(--color-feed-card-background);border-radius:10px;cursor:pointer}.avatar-upload__wrapper{height:min-content;width:100%;display:flex;justify-content:center}.avatar-upload__choose{width:fit-content;height:fit-content;border:2px dashed #000;border-radius:10px;overflow:hidden}.avatar-upload__preview{object-fit:contain;min-height:80px;max-height:150px}.avatar-upload__tools{display:flex;justify-content:center;flex-wrap:wrap;gap:10px}.avatar-upload--hide{display:none !important}.avatar-upload--show{display:block}.avatar-upload-mock{display:flex;flex-direction:column;gap:10px;justify-content:center;align-items:center;padding:20px}.avatar-upload-mock__icon{object-fit:contain;width:40px}.avatar-upload-mock__text{color:gray;text-overflow:ellipsis;font-size:16px;text-align:center}.avatar-upload-button{display:flex;align-items:center;gap:5px;width:min-content;cursor:pointer;border:none;outline:none;border-radius:8px;padding:6px 10px}.avatar-upload-button__icon{object-fit:contain;width:24px}.avatar-upload-button__text{color:var(--color-button-value);text-overflow:ellipsis;font-weight:bolder;font-size:16px}@media screen and (max-width: 300px){.avatar-upload-button__text{display:none}}.avatar-upload-button--green{background-color:var(--color-button-background)}.avatar-upload-button--green:hover{background-color:#24dc83}.avatar-upload-button--green:active{background-color:#24b66f}.avatar-upload-button--red{background-color:#f44848}.avatar-upload-button--red:hover{background-color:#f64f4f}.avatar-upload-button--red:active{background-color:#e03f3f}",""]);const c=a},6727:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".chat{width:100%;height:100%;overflow:hidden;display:grid;grid-template-rows:min-content auto min-content;margin-bottom:15px;background-color:var(--color-chat-background);border-radius:10px}.chat__navbar{padding:5px 10px;border-bottom:1px solid var(--color-chat-message-create-border)}.chat__content{display:flex;flex-direction:column;max-height:100%;overflow-x:hidden;overflow-y:scroll;gap:12px;padding:var(--big-gap-beetween-blocks);margin:var(--big-gap-beetween-blocks)}.chat__content::-webkit-scrollbar{width:15px}.chat__content::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.chat__content::-webkit-scrollbar-thumb{border:5px solid var(--color-feed-card-background);border-radius:9999px;background-color:#d3d3d3}",""]);const c=a},8690:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".communities{width:100%;height:100%;display:grid;grid-template-rows:min-content auto;gap:10px;overflow:hidden}.communities__navbar{display:flex;gap:10px;width:100%}.communities__overlay{position:fixed;top:0;left:0;width:100%;height:100%;overflow-y:scroll;z-index:1001;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(0,0,0,.8)}.communities__list{display:flex;flex-direction:column;gap:10px;width:auto;overflow-x:hidden;overflow-y:overlay;padding-bottom:var(--big-gap-beetween-blocks)}@media screen and (max-device-width: 799px){.communities__list::-webkit-scrollbar{display:none}}.communities__list::-webkit-scrollbar{width:15px}.communities__list::-webkit-scrollbar-track{background-color:inherit}.communities__list::-webkit-scrollbar-thumb{background-color:#d3d3d3;border:5px solid var(--color-feed-card-background);border-radius:9999px}.communities--hide{display:none !important}.communities-mock{display:flex;gap:15px;justify-content:center;align-items:center;height:min-content;padding:20px 25px}.communities-mock__text{font-size:18px;color:#b4b4b4;font-weight:bolder}",""]);const c=a},8201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".community{width:100%;display:flex;flex-direction:column;gap:15px;justify-content:center}.community__container{width:auto;display:flex;justify-content:space-between;padding:15px 20px;background-color:var(--color-profile-background);border-radius:10px}.community__overlay{position:fixed;top:0;left:0;width:100%;height:100%;overflow-y:scroll;z-index:1001;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(0,0,0,.8)}.community--hidden{display:none}.community__data{width:auto;display:flex;align-items:center;gap:8px}.community__nav{display:flex;flex-direction:column;align-items:center;justify-content:center}.community__button{cursor:pointer;padding:10px 20px;border:none;outline:none;border-radius:8px;background-color:var(--color-button-background);color:var(--color-button-value);font-weight:bolder;font-size:14px}",""]);const c=a},2866:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".feed{display:flex;flex-direction:column;gap:var(--big-gap-beetween-blocks);height:100%;width:100%;overflow:scroll}.feed::-webkit-scrollbar{width:0;height:0}.feed__navbar{z-index:10;height:min-content;width:auto}.feed__cards{display:flex;flex-direction:column;gap:var(--big-gap-beetween-blocks);width:auto;height:100%;overflow-x:hidden;overflow-y:overlay}@media screen and (max-device-width: 800px),screen and (max-width: 800px){.feed__cards{gap:var(--gap-beetween-blocks)}}@media screen and (max-device-width: 799px){.feed__cards{-ms-overflow-style:none;scrollbar-width:none}.feed__cards::-webkit-scrollbar{display:none}}.feed__cards::-webkit-scrollbar{width:15px}.feed__cards::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.feed__cards::-webkit-scrollbar-thumb{border:5px solid var(--color-feed-card-background);border-radius:9999px;background-color:#d3d3d3;min-height:30px}.feed__overlay{position:fixed;top:0;left:0;width:100%;height:100%;visibility:collapse;z-index:1001;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(0,0,0,.8)}.feed--hide{display:none !important}.feed-mock{display:flex;gap:15px;justify-content:center;align-items:center;padding:20px 25px}.feed-mock__icon{object-fit:cover;width:80px}.feed-mock__text{font-size:18px;color:#b4b4b4;font-weight:bolder}",""]);const c=a},1358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".footer__container{display:flex;gap:8px;justify-content:center;align-items:center;padding:8px;color:var(--color-footer-text);font-size:12px}.footer__logo{max-width:100%;max-height:30px;object-fit:cover}.footer__contacts{display:flex;gap:8px;justify-content:center;align-items:center}.footer__company-name{display:flex;flex-direction:row}.footer-contact{display:flex;align-items:center}.footer-contact__icon{object-fit:cover;height:16px;width:auto;padding:4px;border:1px solid var(--color-footer-text);outline-offset:-1px;border-radius:8px}",""]);const c=a},4411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".friends{width:100%;height:100%;display:grid;grid-template-rows:min-content auto;gap:10px;overflow:hidden;padding-bottom:10px}.friends__navbar{display:flex;gap:10px;width:auto}.friends__content{display:flex;flex-direction:column;gap:10px;width:auto;height:100%;overflow-x:hidden;overflow-y:overlay}.friends__content::-webkit-scrollbar{width:15px}.friends__content::-webkit-scrollbar-track{background-color:inherit}.friends__content::-webkit-scrollbar-thumb{background-color:#d3d3d3;border:5px solid var(--color-feed-card-background);border-radius:9999px}.friends--hide{display:none !important}.friend-mock{display:flex;gap:15px;justify-content:center;align-items:center;height:min-content;padding:20px 25px}.friend-mock__text{font-size:18px;color:#b4b4b4;font-weight:bolder}",""]);const c=a},6861:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".header-container{display:inline-flex;width:100%;justify-content:space-between;align-items:center;gap:8px}.header-container__logo{display:flex;justify-content:center;align-items:center;text-align:center;color:var(--color-logo);font-size:20px;font-weight:bold;text-decoration:none;background-color:var(--color-logo-background);padding:8px;cursor:pointer}.header-container__logo:hover{transform:scale(1.05)}.header-container__item{display:flex;gap:var(--gap-beetween-blocks)}",""]);const c=a},9738:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".menu-left{display:flex;flex-direction:column;width:max-content;margin-left:auto}@media screen and (max-device-width: 700px){.menu-left{margin:0}}.menu-left__items{display:flex;flex-direction:column;width:max-content;gap:5px;z-index:100}@media screen and (max-device-width: 700px),screen and (max-width: 700px){.menu-left__items{position:fixed;flex-direction:row;width:100vw;background:var(--color-feed-card-background);justify-content:space-between;height:var(--phone-menu-height);border-top:1px solid var(--color-menu-border);bottom:0;left:0}}.menu-left-item{display:flex;gap:var(--gap-beetween-blocks);align-items:center;overflow:hidden;width:auto;padding:8px 10px;border-radius:10px;background-color:var(--color-menu-item-background);cursor:pointer !important;color:var(--color-menu-item-text)}@media screen and (max-width: 700px){.menu-left-item__text{display:none}}.menu-left-item__icon{object-fit:contain;height:20px;width:25px;filter:contrast(var(--contrast-left-menu__icon))}.menu-left-item__text{text-align:left;text-decoration:none;font-size:20px}.menu-left-item:hover{background-color:var(--color-menu-item-background-hover)}@media screen and (max-device-width: 700px),screen and (max-width: 700px){.menu-left-item:hover{background-color:none}.menu-left-item:focus{background-color:var(--color-menu-item-background-hover)}}.menu-left-item--active{color:var(--color-menu-item-text-active)}.menu-left-item__link{color:var(--color-menu-item-logout-text)}",""]);const c=a},8240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".messenger{width:100%;height:100%;overflow:hidden;display:grid;position:relative;margin-bottom:15px;border-radius:10px;grid-template-rows:min-content auto;gap:10px}.messenger__navbar{display:flex;gap:10px;width:auto}.messenger__content{display:flex;flex-direction:column;gap:10px;width:auto;overflow-x:hidden;overflow-y:overlay;padding:15px;background-color:var(--color-messenger-background);border-radius:10px}@media screen and (max-device-width: 799px){.messenger__content{padding:15px}.messenger__content::-webkit-scrollbar{display:none}}.messenger__content::-webkit-scrollbar{width:28px}.messenger__content::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.messenger__content::-webkit-scrollbar-thumb{border:10px solid #fff;border-radius:9999px;background-color:#d3d3d3;min-height:30px}.messenger__footer{display:none}.messenger--hide{display:none !important}.messenger-mock{display:flex;gap:15px;justify-content:center;align-items:center;height:100%;position:absolute;width:100%}.messenger-mock__text{font-size:18px;color:#b4b4b4;font-weight:bolder}",""]);const c=a},8903:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".page-not-found{width:100%;height:100%;overflow:hidden;display:flex;align-items:center;justify-content:center}.page-not-found__container{display:flex;flex-direction:column;align-items:center;padding:10px;gap:10px}.page-not-found__title{width:100%;text-align:center;font-size:30px;color:var(--color-form-title)}.page-not-found__text{width:100%;text-align:center;font-size:16px;color:var(--color-link-value)}.page-not-found__icon{object-fit:contain;height:250px;width:auto}",""]);const c=a},7486:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".profile{width:100%;display:flex;flex-direction:column;gap:15px;justify-content:center}.profile__container{width:auto;display:flex;justify-content:space-between;padding:15px 20px;background-color:var(--color-profile-background);border-radius:10px}.profile__user{width:auto;display:flex;align-items:center;gap:8px}.profile__nav{display:flex;flex-direction:column;align-items:center;justify-content:center}.profile__button{cursor:pointer;padding:10px 20px;border:none;outline:none;border-radius:8px;background-color:var(--color-button-background);color:var(--color-button-value);font-weight:bolder;font-size:14px}",""]);const c=a},7754:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".settings{height:100%;width:100%;display:flex;flex-direction:column;gap:10px;padding-bottom:15px;overflow-x:hidden;overflow-y:scroll}.settings::-webkit-scrollbar{width:15px}.settings::-webkit-scrollbar-track{background-color:inherit}.settings::-webkit-scrollbar-thumb{background-color:#d3d3d3;border:5px solid var(--color-root-background);border-radius:9999px}",""]);const c=a},6955:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".signin-container{height:100%;width:100%;max-width:500px;padding:10% 0;overflow-x:hidden;overflow-y:scroll}.signin-container::-webkit-scrollbar{width:10px}",""]);const c=a},6615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,".signup-container{height:100%;width:100%;max-width:500px;padding:10% 0;overflow-x:hidden;overflow-y:scroll}.signup-container::-webkit-scrollbar{width:10px}",""]);const c=a},168:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,"/* :root,\n:root[theme='dark'] { */\n.dark-mode {\n    --current-theme-invert-value: invert(1);\n\n    --color-root-background: #111111;\n\n    --color-footer-background: #eaecf0;\n    --color-footer-text: #b5b5b5;\n\n    --color-form-title: #6f6f6f;\n    --color-form-background: #333333;\n    --color-form-border: #ebebeb;\n    --color-form-text: #ffffff;\n\n    --color-input-title: #6f6f6f;\n    --color-input-placeholder: #d8d8d8;\n    --color-input-border: #d8d8d8;\n    --color-input-border-focus: #6f6f6f;\n    --color-input-value: #ffffff;\n    --color-input-value-error: #f66363;\n    --color-input-border-error: #f66363;\n    --color-input-border-focus-error: #b04c4c;\n\n    --color-button-background: #21cf7a;\n    --color-button-value: #ffffff;\n    --color-button-background-pressed: #24b66f;\n    --color-button-border-focus: #24b66f;\n\n    --color-link-value: #b5b5b5;\n    --color-link-underline-hover: #b5b5b5;\n    --color-link-value-pressed: #d8d8d8;\n    --color-limk-underline-pressed: #d8d8d8;\n\n    --color-header-background: #222222;\n\n    --color-logo: #ffffff;\n    --color-logo-background: #21cf7a;\n    --color-logo-border: #21cf7a;\n\n    --color-menu-item-background: none;\n    --color-menu-item-background-hover: rgba(0, 255, 132, 0.106);\n    --color-menu-item-text: #cacaca;\n    --color-menu-item-text-active: #ffffff;\n    --color-menu-item-logout-text: #f66363;\n\n    --header-height: 50px;\n\n    --color-feed-card-border: #d8d8d8;\n    --color-feed-card-background: #333333;\n    --color-feed-card-author-name: #ffffff;\n    --color-feed-card-img-background: #ebebeb;\n    --color-feed-card-img-border: #d8d8d8;\n    --color-feed-card-date: #818c99;\n    --color-feed-card-text: #ffffff;\n    --color-feed-card-likes: #818c99;\n\n    --color-feed-navbar-backgroung: #333333;\n    --color-feed-navbar-text: #ffffff;\n\n    --color-profile-background: #333333;\n    --color-button-background: #21cf7a;\n    --color-button-value: #ffffff;\n    --color-profile-name: #ffffff;\n    --color-profile-img-border: #d8d8d8;\n    --color-profile-img-background: #ebebeb;\n\n    --color-messenger-background: #333333;\n\n    --color-dialog-name-text: #ffffff;\n\n    --color-friend-block-background: #333333;\n\n    --color-chat-background: #333333;\n    --color-chat-author-message-name: #ffffff;\n    --color-chat-navbar-name: #ffffff;\n    --coloor-chat-message-text: #ffffff;\n    --color-chat-message-create-background: #333333;\n    --color-chat-message-create-text: #ffffff;\n\n    --color-menu-border: #d8d8d8;\n\n    --color-feed-card-create-text-background: #333333;\n    --color-feed-card-create-text: #ffffff;\n\n    --contrast-left-menu__icon: 1.5;\n\n}",""]);const c=a},7352:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8081),o=r.n(n),i=r(3645),a=r.n(i)()(o());a.push([e.id,":root,\n:root[theme='light'] {\n  --current-theme-invert-value: invert(0);\n\n  --color-root-background: #f0f2f5;\n\n  --color-footer-background: #eaecf0;\n  --color-footer-text: #b5b5b5;\n\n  --color-form-title: #6f6f6f;\n  --color-form-background: #ffffff;\n  --color-form-border: #ebebeb;\n  --color-form-text: #000000;\n\n  --color-input-disabled: #d8d8d8;\n  --color-input-title: #6f6f6f;\n  --color-input-placeholder: #d8d8d8;\n  --color-input-border: #d8d8d8;\n  --color-input-border-focus: #6f6f6f;\n  --color-input-value: #767676;\n  --color-input-value-error: #f66363;\n  --color-input-border-error: #f66363;\n  --color-input-border-focus-error: #b04c4c;\n\n  --color-button-background-disabled: #1a9258;\n  --color-button-background: #21cf7a;\n  --color-button-value: #ffffff;\n  --color-button-background-pressed: #24b66f;\n  --color-button-border-focus: #24b66f;\n\n  --color-link-value: #b5b5b5;\n  --color-link-underline-hover: #b5b5b5;\n  --color-link-value-pressed: #d8d8d8;\n  --color-limk-underline-pressed: #d8d8d8;\n\n  --color-header-background: #ffffff;\n\n  --color-logo: #ffffff;\n  --color-logo-background: #21cf7a;\n  --color-logo-border: #21cf7a;\n\n  --color-menu-item-background: none;\n  --color-menu-item-background-hover: rgba(0, 255, 132, 0.106);\n  --color-menu-item-text: #767676;\n  --color-menu-item-text-active: #333333;\n  --color-menu-item-logout-text: #f66363;\n\n  --header-height: 50px;\n\n  --color-feed-card-border: #d8d8d8;\n  --color-feed-card-background: #ffffff;\n  --color-feed-card-author-name: #000000;\n  --color-feed-card-img-background: #ebebeb;\n  --color-feed-card-img-border: #d8d8d8;\n  --color-feed-card-date: #818c99;\n  --color-feed-card-text: #000000;\n  --color-feed-card-likes: #818c99;\n\n  --color-feed-navbar-backgroung: #ffffff;\n  --color-feed-navbar-text: #000000;\n\n  --color-profile-background: #ffffff;\n  --color-button-background: #21cf7a;\n  --color-button-value: #ffffff;\n  --color-profile-name: #000000;\n  --color-profile-img-border: #d8d8d8;\n  --color-profile-img-background: #ebebeb;\n\n  --color-messenger-background: #ffffff;\n\n  --color-friend-block-background: #ffffff;\n\n  --color-chat-background: #ffffff;\n  --color-chat-author-message-name: #000000;\n  --color-chat-navbar-name: #303030;\n  --coloor-chat-message-text: #000000;\n  --color-chat-message-create-background: #ffffff;\n  --color-chat-message-create-text: #000000;\n  --color-chat-message-create-border: #d8d8d8;\n  --color-chat-message-create-border-focus: #6f6f6f;\n\n  --color-menu-border: #d8d8d8;\n\n  --color-feed-card-create-text-background: #ffffff;\n  --color-feed-card-create-text: #000000;\n\n  --contrast-left-menu__icon: 1;\n\n}",""]);const c=a},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},5095:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="attachment" data-attachment_src="'+l(typeof(i=null!=(i=u(r,"src")||(null!=t?u(t,"src"):t))?i:c)===s?i.call(a,{name:"src",hash:{},data:o,loc:{start:{line:1,column:45},end:{line:1,column:52}}}):i)+'">\n    <img src="'+l(typeof(i=null!=(i=u(r,"src")||(null!=t?u(t,"src"):t))?i:c)===s?i.call(a,{name:"src",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:21}}}):i)+'" alt="" class="attachment__preview">\n    <img src="../src/img/trash_white_icon.svg" alt="" class="attachment__remove" data-action="attachment__remove">\n</div>'},useData:!0})},5884:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="root" id="root">\n    <div class="root__wrapper">\n        <div class="root__header" id="header"></div>\n        <div class="root-content">\n            <div class="root-content__menu root-content__menu--left" id="left-menu"></div>\n            <div class="root-content__main" id="main"></div>\n            <div class="root-content__menu root-content__menu--right" id="right-menu"></div>\n        </div>\n    </div>\n    <div class="root__footer" id="footer"></div>\n</div>'},useData:!0})},9913:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="navbar-chat">\n    <div class="navbar-chat__nav">\n        <div class="navbar-chat-button" data-action="back">\n            <img class="navbar-chat-button__icon" src="../src/img/back_arrow_icon.svg" alt="">\n            <div class="navbar-chat-button__text">Назад</div>\n        </div>\n    </div>\n    <div class="navbar-chat__name" data-user_id="'+l(typeof(i=null!=(i=u(r,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(a,{name:"id",hash:{},data:o,loc:{start:{line:8,column:49},end:{line:8,column:55}}}):i)+'" data-action="user_profile">\n        '+l(typeof(i=null!=(i=u(r,"first_name")||(null!=t?u(t,"first_name"):t))?i:c)===s?i.call(a,{name:"first_name",hash:{},data:o,loc:{start:{line:9,column:8},end:{line:9,column:22}}}):i)+" "+l(typeof(i=null!=(i=u(r,"last_name")||(null!=t?u(t,"last_name"):t))?i:c)===s?i.call(a,{name:"last_name",hash:{},data:o,loc:{start:{line:9,column:23},end:{line:9,column:36}}}):i)+'\n    </div>\n    <img src="'+l(typeof(i=null!=(i=u(r,"avatar")||(null!=t?u(t,"avatar"):t))?i:c)===s?i.call(a,{name:"avatar",hash:{},data:o,loc:{start:{line:11,column:14},end:{line:11,column:24}}}):i)+'" class="navbar-chat__avatar" data-user_id="'+l(typeof(i=null!=(i=u(r,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(a,{name:"id",hash:{},data:o,loc:{start:{line:11,column:68},end:{line:11,column:74}}}):i)+'" data-action="user_profile">\n</div>'},useData:!0})},2129:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'            <div class="comment__buttons">\n                <img src="../src/img/trash_icon.svg" alt="" class="comment__button" data-action="comment_delete" />\n            </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment" data-post_id="'+u(typeof(a=null!=(a=d(r,"post_id")||(null!=t?d(t,"post_id"):t))?a:s)===l?a.call(c,{name:"post_id",hash:{},data:o,loc:{start:{line:1,column:35},end:{line:1,column:46}}}):a)+'" data-user_id="'+u(typeof(a=null!=(a=d(r,"user_id")||(null!=t?d(t,"user_id"):t))?a:s)===l?a.call(c,{name:"user_id",hash:{},data:o,loc:{start:{line:1,column:62},end:{line:1,column:73}}}):a)+'" data-id="'+u(typeof(a=null!=(a=d(r,"id")||(null!=t?d(t,"id"):t))?a:s)===l?a.call(c,{name:"id",hash:{},data:o,loc:{start:{line:1,column:84},end:{line:1,column:90}}}):a)+'">\n    <img src="'+u(typeof(a=null!=(a=d(r,"avatar_id")||(null!=t?d(t,"avatar_id"):t))?a:s)===l?a.call(c,{name:"avatar_id",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:27}}}):a)+'" alt="" class="comment-user__avatar">\n    <div class="comment-wrapper">\n        <div class="comment__header">\n            <div class="comment-user__name">\n                '+u(typeof(a=null!=(a=d(r,"user_first_name")||(null!=t?d(t,"user_first_name"):t))?a:s)===l?a.call(c,{name:"user_first_name",hash:{},data:o,loc:{start:{line:6,column:16},end:{line:6,column:35}}}):a)+" "+u(typeof(a=null!=(a=d(r,"user_last_name")||(null!=t?d(t,"user_last_name"):t))?a:s)===l?a.call(c,{name:"user_last_name",hash:{},data:o,loc:{start:{line:6,column:36},end:{line:6,column:54}}}):a)+"\n            </div>\n"+(null!=(i=d(r,"if").call(c,null!=t?d(t,"showTools"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:12},end:{line:14,column:19}}}))?i:"")+'        </div>\n        <div class="comment__date">\n            '+u(typeof(a=null!=(a=d(r,"create_date")||(null!=t?d(t,"create_date"):t))?a:s)===l?a.call(c,{name:"create_date",hash:{},data:o,loc:{start:{line:17,column:12},end:{line:17,column:27}}}):a)+'\n        </div>\n        <div class="comment__content">\n            '+u(typeof(a=null!=(a=d(r,"message")||(null!=t?d(t,"message"):t))?a:s)===l?a.call(c,{name:"message",hash:{},data:o,loc:{start:{line:20,column:12},end:{line:20,column:23}}}):a)+"\n        </div>\n    </div>\n</div>"},useData:!0})},1512:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(i=null!=t?a(t,"comment"):t)?a(i,"text"):i,t))},3:function(e,t,r,n,o){return"submit_edited_comment"},5:function(e,t,r,n,o){return"send_comment"},7:function(e,t,r,n,o){return"                Сохранить\n"},9:function(e,t,r,n,o){return"                Отправить\n"},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-create" data-post_id="'+s("function"==typeof(a=null!=(a=l(r,"postId")||(null!=t?l(t,"postId"):t))?a:e.hooks.helperMissing)?a.call(c,{name:"postId",hash:{},data:o,loc:{start:{line:1,column:42},end:{line:1,column:52}}}):a)+'" data-comment_id="'+s(e.lambda(null!=(i=null!=t?l(t,"comment"):t)?l(i,"id"):i,t))+'">\n    <div class="comment-create__tools">\n    </div>\n\n    <div class="comment-create__form">\n        <textarea class="comment-create__textarea">'+(null!=(i=l(r,"if").call(c,null!=t?l(t,"comment"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:51},end:{line:15,column:89}}}))?i:"")+'</textarea>\n        <div class="comment-create__attachments"></div>\n    </div>\n\n    <div class="comment-create__tools">\n        <button class="comment-create-button comment-create-button--big"\n            data-action="'+(null!=(i=l(r,"if").call(c,null!=t?l(t,"comment"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:21,column:25},end:{line:21,column:88}}}))?i:"")+'">\n            <img class="comment-create-button__icon" src="../src/img/send_icon.svg" alt="">\n            <div class="comment-create-button__text">\n'+(null!=(i=l(r,"if").call(c,null!=t?l(t,"comment"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:24,column:16},end:{line:28,column:23}}}))?i:"")+"            </div>\n        </button>\n    </div>\n</div>"},useData:!0})},8069:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-section" data-feed_card_id="'+e.escapeExpression("function"==typeof(i=null!=(i=a(r,"postId")||(null!=t?a(t,"postId"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"postId",hash:{},data:o,loc:{start:{line:1,column:48},end:{line:1,column:58}}}):i)+'">\n    <div class="comment-section__comments">\n\n    </div>\n    <div class="comment-section__creation">\n\n    </div>\n</div>'},useData:!0})},1362:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lambda,c=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="community-data" data-community_id="'+c(a(null!=(i=null!=t?s(t,"data"):t)?s(i,"id"):i,t))+'" data-owner_id="'+c(a(null!=(i=null!=t?s(t,"data"):t)?s(i,"owner_id"):i,t))+'">\n    <img src="'+c(a(null!=(i=null!=t?s(t,"data"):t)?s(i,"avatar"):i,t))+'" alt="" class="community-data__avatar">\n    <div class="community-data__container">\n        <div class="community-data__name">\n            '+c(a(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+'\n        </div>\n        <div class="community-data__description">\n            '+c(a(null!=(i=null!=t?s(t,"data"):t)?s(i,"description"):i,t))+"\n        </div>\n    </div>\n</div>"},useData:!0})},1604:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'            <button class="community-list-item-button community-list-item-button--red" data-action="left">\n                <img class="community-list-item-button__icon" src="../src/img/x_icon.svg" alt="">\n                <div class="community-list-item-button__text">\n                    Покинуть\n                </div>\n            </button>\n'},3:function(e,t,r,n,o){return'            <button class="community-list-item-button community-list-item-button--green" data-action="join">\n                <img class="community-list-item-button__icon" src="../src/img/plus_icon.svg" alt="">\n                <div class="community-list-item-button__text">\n                    Вступить\n                </div>\n            </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="community-list-item" id="'+u(typeof(a=null!=(a=d(r,"id")||(null!=t?d(t,"id"):t))?a:s)===l?a.call(c,{name:"id",hash:{},data:o,loc:{start:{line:1,column:37},end:{line:1,column:43}}}):a)+'">\n    <img src="'+u(typeof(a=null!=(a=d(r,"avatar")||(null!=t?d(t,"avatar"):t))?a:s)===l?a.call(c,{name:"avatar",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:24}}}):a)+'" class="community-list-item__avatar" data-action="community">\n    <div class="community-list-item__wrapper">\n        <div class="community-list-item__name" data-action="community">'+u(typeof(a=null!=(a=d(r,"name")||(null!=t?d(t,"name"):t))?a:s)===l?a.call(c,{name:"name",hash:{},data:o,loc:{start:{line:4,column:71},end:{line:4,column:79}}}):a)+'</div>\n        <div class="community-list-item__description" data-action="community">'+u(typeof(a=null!=(a=d(r,"description")||(null!=t?d(t,"description"):t))?a:s)===l?a.call(c,{name:"description",hash:{},data:o,loc:{start:{line:5,column:78},end:{line:5,column:93}}}):a)+'</div>\n        <div class="community-list-item__tools">\n'+(null!=(i=d(r,"if").call(c,null!=t?d(t,"isMember"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:8,column:12},end:{line:22,column:19}}}))?i:"")+"        </div>\n    </div>\n</div>"},useData:!0})},9184:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="community-list-navbar">\n    <div class="community-list-navbar-search">\n        <input type="text" class="community-list-navbar-search__input" placeholder="Поиск по сообществам...">\n        <img src="../src/img/search_icon.svg" class="community-list-navbar-search__icon" data-action="submit_search">\n    </div>\n    <button class="community-list-navbar-button" data-action="create_community">\n        <img class="community-list-navbar-button__icon" src="../src/img/plus_icon.svg" alt="">\n        <div class="community-list-navbar-button__text">\n            Создать\n        </div>\n    </button>\n</div>'},useData:!0})},5006:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'    <button class="community-button community-button--green" data-action="settings">\n        <img class="community-button__icon" src="../src/img/settings_icon_white.svg" alt="">\n        <div class="community-button__text">\n            Настройки\n        </div>\n    </button>\n'},3:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=a(r,"if").call(null!=t?t:e.nullContext||{},null!=(i=null!=t?a(t,"status"):t)?a(i,"isMember"):i,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:10,column:4},end:{line:24,column:11}}}))?i:""},4:function(e,t,r,n,o){return'    <button class="community-button community-button--red" data-action="left">\n        <img class="community-button__icon" src="../src/img/x_icon.svg" alt="">\n        <div class="community-button__text">\n            Покинуть\n        </div>\n    </button>\n'},6:function(e,t,r,n,o){return'    <button class="community-button community-button--green" data-action="join">\n        <img class="community-button__icon" src="../src/img/plus_icon.svg" alt="">\n        <div class="community-button__text">\n            Вступить\n        </div>\n    </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="community-buttons">\n'+(null!=(i=a(r,"if").call(null!=t?t:e.nullContext||{},null!=(i=null!=t?a(t,"status"):t)?a(i,"isAdmin"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:4},end:{line:25,column:11}}}))?i:"")+"</div>"},useData:!0})},9159:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="dialog" data-dialog_id='+l(typeof(i=null!=(i=u(r,"dialog_id")||(null!=t?u(t,"dialog_id"):t))?i:c)===s?i.call(a,{name:"dialog_id",hash:{},data:o,loc:{start:{line:1,column:35},end:{line:1,column:48}}}):i)+' data-user_id="'+l(typeof(i=null!=(i=u(r,"user_id")||(null!=t?u(t,"user_id"):t))?i:c)===s?i.call(a,{name:"user_id",hash:{},data:o,loc:{start:{line:1,column:63},end:{line:1,column:74}}}):i)+'" data-action="open-dialog">\n        <img class="dialog-user__avatar" src='+l(typeof(i=null!=(i=u(r,"user_avatar")||(null!=t?u(t,"user_avatar"):t))?i:c)===s?i.call(a,{name:"user_avatar",hash:{},data:o,loc:{start:{line:2,column:45},end:{line:2,column:60}}}):i)+'>\n        <div class="dialog__wrapper">\n                <div class="dialog-user__name">\n                        '+l(typeof(i=null!=(i=u(r,"user_first_name")||(null!=t?u(t,"user_first_name"):t))?i:c)===s?i.call(a,{name:"user_first_name",hash:{},data:o,loc:{start:{line:5,column:24},end:{line:5,column:43}}}):i)+" "+l(typeof(i=null!=(i=u(r,"user_last_name")||(null!=t?u(t,"user_last_name"):t))?i:c)===s?i.call(a,{name:"user_last_name",hash:{},data:o,loc:{start:{line:5,column:44},end:{line:5,column:62}}}):i)+"\n                </div>\n        </div>\n</div>"},useData:!0})},7498:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'        <div class="feed-card__buttons">\n            <img src="../src/img/pen_icon.svg" alt="" class="feed-card__button feed-card__button__edit"\n                data-action="edit" />\n            <img src="../src/img/trash_icon.svg" alt="" class="feed-card__button feed-card__button__edit"\n                data-action="delete" />\n        </div>\n'},3:function(e,t,r,n,o,i){var a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <img src="'+e.escapeExpression(e.lambda(null!=(a=i[0][0])?c(a,"src"):a,t))+'" alt="image" class="feed-card__picture" />\n'},5:function(e,t,r,n,o){return'"../src/img/like_filled_icon.svg"'},7:function(e,t,r,n,o){return'"../src/img/like_icon.svg"'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o,i){var a,c,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u="function",d=e.escapeExpression,f=e.lambda,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="feed-card" data-action="card_page" data-feed_card_id="'+d(typeof(c=null!=(c=p(r,"id")||(null!=t?p(t,"id"):t))?c:l)===u?c.call(s,{name:"id",hash:{},data:o,blockParams:i,loc:{start:{line:1,column:66},end:{line:1,column:72}}}):c)+'">\n    <div class="feed-card__header">\n        <div class="feed-card-author" data-action="profile_page" data-data="'+d(f(null!=(a=null!=t?p(t,"author"):t)?p(a,"id"):a,t))+'">\n            <img src="'+d(f(null!=(a=null!=t?p(t,"author"):t)?p(a,"avatar"):a,t))+'" alt="" class="feed-card-author__avatar" />\n            <div>\n                <div class="feed-card-author__name">'+d(f(null!=(a=null!=t?p(t,"author"):t)?p(a,"first_name"):a,t))+" "+d(f(null!=(a=null!=t?p(t,"author"):t)?p(a,"last_name"):a,t))+'</div>\n                <div class="feed-card__date">'+d(typeof(c=null!=(c=p(r,"date")||(null!=t?p(t,"date"):t))?c:l)===u?c.call(s,{name:"date",hash:{},data:o,blockParams:i,loc:{start:{line:7,column:45},end:{line:7,column:53}}}):c)+"</div>\n            </div>\n        </div>\n"+(null!=(a=p(r,"if").call(s,null!=t?p(t,"showTools"):t,{name:"if",hash:{},fn:e.program(1,o,0,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:10,column:8},end:{line:17,column:15}}}))?a:"")+'    </div>\n    <div class="feed-card__content"> '+d(typeof(c=null!=(c=p(r,"text")||(null!=t?p(t,"text"):t))?c:l)===u?c.call(s,{name:"text",hash:{},data:o,blockParams:i,loc:{start:{line:19,column:37},end:{line:19,column:45}}}):c)+'</div>\n    <div class="feed-card__attachments">\n'+(null!=(a=p(r,"each").call(s,null!=t?p(t,"attachments"):t,{name:"each",hash:{},fn:e.program(3,o,1,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:21,column:8},end:{line:23,column:17}}}))?a:"")+'    </div>\n    <div class="feed-card__footer">\n        <div class="feed-card-likes">\n            <div id="feed-card-likes__count-'+d(typeof(c=null!=(c=p(r,"id")||(null!=t?p(t,"id"):t))?c:l)===u?c.call(s,{name:"id",hash:{},data:o,blockParams:i,loc:{start:{line:27,column:44},end:{line:27,column:50}}}):c)+'" class="feed-card-likes__count">'+d(typeof(c=null!=(c=p(r,"likes")||(null!=t?p(t,"likes"):t))?c:l)===u?c.call(s,{name:"likes",hash:{},data:o,blockParams:i,loc:{start:{line:27,column:83},end:{line:27,column:92}}}):c)+'</div>\n            <div class="feed-card-likes__count">likes</div>\n        </div>\n        <div class="feed-card__buttons">\n            <img src='+(null!=(a=p(r,"if").call(s,null!=t?p(t,"isLikedIcon"):t,{name:"if",hash:{},fn:e.program(5,o,0,i),inverse:e.program(7,o,0,i),data:o,blockParams:i,loc:{start:{line:31,column:21},end:{line:31,column:114}}}))?a:"")+'\n                alt="like-button" class="feed-card__button feed-card__button__'+d(typeof(c=null!=(c=p(r,"isLiked")||(null!=t?p(t,"isLiked"):t))?c:l)===u?c.call(s,{name:"isLiked",hash:{},data:o,blockParams:i,loc:{start:{line:32,column:78},end:{line:32,column:89}}}):c)+'" data-action="like" />\n            <img src="../src/img/comment_icon.svg" alt="" class="feed-card__button" data-action="comment" />\n        </div>\n    </div>\n</div>'},useData:!0,useBlockParams:!0})},9703:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' id="'+e.escapeExpression(e.lambda(null!=(i=null!=t?a(t,"data"):t)?a(i,"id"):i,t))+'" '},3:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'data-community_id="'+e.escapeExpression("function"==typeof(i=null!=(i=a(r,"community_id")||(null!=t?a(t,"community_id"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"community_id",hash:{},data:o,loc:{start:{line:2,column:37},end:{line:2,column:53}}}):i)+'" '},5:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(i=null!=t?a(t,"data"):t)?a(i,"text"):i,t))},7:function(e,t,r,n,o){return'            <button class="feed-card-create-button feed-card-create-button--big" data-action="sumbit_edited_post">\n                <img class="feed-card-create-button__icon" src="../src/img/ok_icon.svg" alt="">\n                <div class="feed-card-create-button__text">\n                    Сохранить\n                </div>\n            </button>\n'},9:function(e,t,r,n,o){return'            <button class="feed-card-create-button feed-card-create-button--big" data-action="sumbit_new_post">\n                <img class="feed-card-create-button__icon" src="../src/img/send_icon.svg" alt="">\n                <div class="feed-card-create-button__text">\n                    Опубликовать\n                </div>\n            </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="feed-card-create" '+(null!=(i=s(r,"if").call(c,null!=t?s(t,"data"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:30},end:{line:1,column:67}}}))?i:"")+" "+(null!=(i=s(r,"if").call(c,null!=t?s(t,"community_id"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:68},end:{line:2,column:62}}}))?i:"")+'>\n    <div class="feed-card-create-author">\n        <img src="'+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"user"):t)?s(i,"avatar"):i,t))+'" alt="" class="feed-card-create-author__avatar">\n    </div>\n    <div class="feed-card-create__content">\n        <textarea class="feed-card-create__text">'+(null!=(i=s(r,"if").call(c,null!=t?s(t,"data"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:49},end:{line:7,column:81}}}))?i:"")+'</textarea>\n        <div class="feed-card-create__attachments"></div>\n\n        <div class="feed-card-create__tools feed-card-create__tools--row">\n            <button class="feed-card-create-button feed-card-create-button--big feed-card-create-button--red"\n                data-action="close_overlay">\n                <img class="feed-card-create-button__icon" src="../src/img/x_icon.svg" alt="">\n                <div class="feed-card-create-button__text">\n                    Закрыть\n                </div>\n            </button>\n\n'+(null!=(i=s(r,"if").call(c,null!=t?s(t,"data"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:19,column:12},end:{line:33,column:19}}}))?i:"")+'        </div>\n    </div>\n    <div class="feed-card-create__tools">\n        <button class="feed-card-create-button feed-card-create-button--small feed-card-create-button__smiles">\n            <img class="feed-card-create-button__icon" src="../src/img/smile_icon.svg" alt="">\n            '+(null!=(i="function"==typeof(a=null!=(a=s(r,"smiles")||(null!=t?s(t,"smiles"):t))?a:e.hooks.helperMissing)?a.call(c,{name:"smiles",hash:{},data:o,loc:{start:{line:39,column:12},end:{line:39,column:24}}}):a)?i:"")+'\n        </button>\n        <button class="feed-card-create-button feed-card-create-button--small" data-action="add_image">\n            <img class="feed-card-create-button__icon" src="../src/img/image_icon.svg" alt="">\n        </button>\n    </div>\n</div>'},useData:!0})},2923:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'    <button class="feed-navbar-button" data-action="create_feed">\n        <img class="feed-navbar-button__icon" src="../src/img/plus_icon.svg" alt="">\n        <div class="feed-navbar-button__text">\n            Новая\n        </div>\n    </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="feed-navbar">\n    <div class="feed-navbar-search">\n        <input type="text" class="feed-navbar-search__input"\n            placeholder="Поиск по записям находится в процессе разработки">\n        <img src="../src/img/search_icon.svg" class="feed-navbar-search__icon" data-action="submit_search">\n    </div>\n'+(null!=(i=a(r,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"showCreationButton"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:4},end:{line:14,column:11}}}))?i:"")+"</div>"},useData:!0})},9577:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="input-with-title">\n                <div class="input-with-title__title">\n                    '+l(typeof(i=null!=(i=u(r,"title")||(null!=t?u(t,"title"):t))?i:c)===s?i.call(a,{name:"title",hash:{},data:o,loc:{start:{line:10,column:20},end:{line:10,column:29}}}):i)+'\n                </div>\n                <input type="'+l(typeof(i=null!=(i=u(r,"type")||(null!=t?u(t,"type"):t))?i:c)===s?i.call(a,{name:"type",hash:{},data:o,loc:{start:{line:12,column:29},end:{line:12,column:37}}}):i)+'" id="'+l(typeof(i=null!=(i=u(r,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(a,{name:"id",hash:{},data:o,loc:{start:{line:12,column:43},end:{line:12,column:49}}}):i)+'" placeholder="'+l(typeof(i=null!=(i=u(r,"placeholder")||(null!=t?u(t,"placeholder"):t))?i:c)===s?i.call(a,{name:"placeholder",hash:{},data:o,loc:{start:{line:12,column:64},end:{line:12,column:79}}}):i)+'" class="input-with-title__input" />\n                <div id="'+l(typeof(i=null!=(i=u(r,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(a,{name:"id",hash:{},data:o,loc:{start:{line:13,column:25},end:{line:13,column:31}}}):i)+'-msg" class="input-with-title__error-msg"></div>\n            </div>\n'},3:function(e,t,r,n,o,i){var a,c,s=e.lambda,l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="input-with-title">\n                <div class="input-with-title__title">\n                    '+l(s(null!=(a=i[0][0])?u(a,"title"):a,t))+'\n                </div>\n                <textarea class="input-with-title__input" name="'+l(s(null!=(a=i[0][0])?u(a,"name"):a,t))+'" id="'+l(s(null!=(a=i[0][0])?u(a,"id"):a,t))+'"\n                    rows="'+l(s(null!=(a=i[0][0])?u(a,"rows"):a,t))+'" placeholder="'+l("function"==typeof(c=null!=(c=u(r,"placeholder")||(null!=t?u(t,"placeholder"):t))?c:e.hooks.helperMissing)?c.call(null!=t?t:e.nullContext||{},{name:"placeholder",hash:{},data:o,blockParams:i,loc:{start:{line:23,column:56},end:{line:23,column:71}}}):c)+'"></textarea>\n                <div id="'+l(s(null!=(a=i[0][0])?u(a,"id"):a,t))+'-msg" class="input-with-title__error-msg"></div>\n            </div>\n'},5:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <a id="+l(typeof(i=null!=(i=u(r,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(a,{name:"id",hash:{},data:o,loc:{start:{line:34,column:18},end:{line:34,column:24}}}):i)+" href="+l(typeof(i=null!=(i=u(r,"href")||(null!=t?u(t,"href"):t))?i:c)===s?i.call(a,{name:"href",hash:{},data:o,loc:{start:{line:34,column:30},end:{line:34,column:38}}}):i)+' class="form__link">'+l(typeof(i=null!=(i=u(r,"text")||(null!=t?u(t,"text"):t))?i:c)===s?i.call(a,{name:"text",hash:{},data:o,loc:{start:{line:34,column:58},end:{line:34,column:66}}}):i)+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o,i){var a,c,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u="function",d=e.escapeExpression,f=e.lambda,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<form id="+d(typeof(c=null!=(c=p(r,"formId")||(null!=t?p(t,"formId"):t))?c:l)===u?c.call(s,{name:"formId",hash:{},data:o,blockParams:i,loc:{start:{line:1,column:9},end:{line:1,column:19}}}):c)+' class="form">\n    <fieldset>\n        <div class="form__title">\n            '+d(typeof(c=null!=(c=p(r,"formTitle")||(null!=t?p(t,"formTitle"):t))?c:l)===u?c.call(s,{name:"formTitle",hash:{},data:o,blockParams:i,loc:{start:{line:4,column:12},end:{line:4,column:25}}}):c)+'\n        </div>\n        <div class="form__content">\n'+(null!=(a=p(r,"each").call(s,null!=t?p(t,"inputs"):t,{name:"each",hash:{},fn:e.program(1,o,0,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:7,column:12},end:{line:15,column:21}}}))?a:"")+"\n"+(null!=(a=p(r,"each").call(s,null!=t?p(t,"textareas"):t,{name:"each",hash:{},fn:e.program(3,o,1,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:17,column:12},end:{line:26,column:21}}}))?a:"")+"\n            <button id="+d(f(null!=(a=null!=t?p(t,"submit"):t)?p(a,"id"):a,t))+' class="form__button" data-action="submit_form">\n                '+d(f(null!=(a=null!=t?p(t,"submit"):t)?p(a,"text"):a,t))+'\n            </button>\n        </div>\n        <div class="form__footer">\n'+(null!=(a=p(r,"each").call(s,null!=t?p(t,"links"):t,{name:"each",hash:{},fn:e.program(5,o,0,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:33,column:12},end:{line:35,column:21}}}))?a:"")+"        </div>\n    </fieldset>\n</form>"},useData:!0,useBlockParams:!0})},6428:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'            <div class="friend__info">Это вы</div>\n'},3:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <button class="friend-button friend-button--green" data-action="message">\n                <img class="friend-button__icon" src="../src/img/message_icon.svg" alt="">\n                <div class="friend-button__text">\n                    Сообщение\n                </div>\n            </button>\n'+(null!=(i=a(r,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isFriend"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:15,column:12},end:{line:29,column:19}}}))?i:"")},4:function(e,t,r,n,o){return'            <button class="friend-button friend-button--red" data-action="remove_friend">\n                <img class="friend-button__icon" src="../src/img/x_icon.svg" alt="">\n                <div class="friend-button__text">\n                    Отписаться\n                </div>\n            </button>\n'},6:function(e,t,r,n,o){return'            <button class="friend-button friend-button--green" data-action="add_friend">\n                <img class="friend-button__icon" src="../src/img/plus_icon.svg" alt="">\n                <div class="friend-button__text">\n                    Подписаться\n                </div>\n            </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="friend" id="'+u(typeof(a=null!=(a=d(r,"id")||(null!=t?d(t,"id"):t))?a:s)===l?a.call(c,{name:"id",hash:{},data:o,loc:{start:{line:1,column:24},end:{line:1,column:30}}}):a)+'">\n    <img src="'+u(typeof(a=null!=(a=d(r,"avatar")||(null!=t?d(t,"avatar"):t))?a:s)===l?a.call(c,{name:"avatar",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:24}}}):a)+'" class="friend__avatar" data-action="profile">\n    <div class="friend__wrapper">\n        <div class="friend__name" data-action="profile">'+u(typeof(a=null!=(a=d(r,"first_name")||(null!=t?d(t,"first_name"):t))?a:s)===l?a.call(c,{name:"first_name",hash:{},data:o,loc:{start:{line:4,column:56},end:{line:4,column:70}}}):a)+" "+u(typeof(a=null!=(a=d(r,"last_name")||(null!=t?d(t,"last_name"):t))?a:s)===l?a.call(c,{name:"last_name",hash:{},data:o,loc:{start:{line:4,column:71},end:{line:4,column:84}}}):a)+'</div>\n        <div class="friend__tools">\n'+(null!=(i=d(r,"if").call(c,null!=t?d(t,"isCurrent"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:6,column:12},end:{line:30,column:19}}}))?i:"")+"        </div>\n    </div>\n</div>"},useData:!0})},8237:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="friends-navbar">\n    <div class="friends-navbar-search">\n        <input type="text" class="friends-navbar-search__input" placeholder="Поиск пользователей...">\n        <img src="../src/img/search_icon.svg" class="friends-navbar-search__icon" data-action="submit_search">\n    </div>\n</div>'},useData:!0})},4943:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="header__item__button" class="header-item-button" href="'+l(typeof(i=null!=(i=u(r,"href")||(null!=t?u(t,"href"):t))?i:c)===s?i.call(a,{name:"href",hash:{},data:o,loc:{start:{line:1,column:64},end:{line:1,column:72}}}):i)+'">\n    <div class="header-item-button__text">\n        '+l(typeof(i=null!=(i=u(r,"text")||(null!=t?u(t,"text"):t))?i:c)===s?i.call(a,{name:"text",hash:{},data:o,loc:{start:{line:3,column:8},end:{line:3,column:16}}}):i)+"\n    </div>\n</div>"},useData:!0})},532:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="header-item-profile" id="header__item__profile" href="'+l(typeof(i=null!=(i=u(r,"href_profile")||(null!=t?u(t,"href_profile"):t))?i:c)===s?i.call(a,{name:"href_profile",hash:{},data:o,loc:{start:{line:1,column:66},end:{line:1,column:82}}}):i)+'">\n    <img src="'+l(typeof(i=null!=(i=u(r,"avatar")||(null!=t?u(t,"avatar"):t))?i:c)===s?i.call(a,{name:"avatar",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:24}}}):i)+'" alt="" class="header-item-profile__avatar">\n    <div class="header-item-profile__name">\n        '+l(typeof(i=null!=(i=u(r,"first_name")||(null!=t?u(t,"first_name"):t))?i:c)===s?i.call(a,{name:"first_name",hash:{},data:o,loc:{start:{line:4,column:8},end:{line:4,column:22}}}):i)+'\n    </div>\n</div>\n<div class="header-item-settings" id="header__item__settings" href="'+l(typeof(i=null!=(i=u(r,"href_settings")||(null!=t?u(t,"href_settings"):t))?i:c)===s?i.call(a,{name:"href_settings",hash:{},data:o,loc:{start:{line:7,column:68},end:{line:7,column:85}}}):i)+'">\n    <img src="'+l(typeof(i=null!=(i=u(r,"settings_icon")||(null!=t?u(t,"settings_icon"):t))?i:c)===s?i.call(a,{name:"settings_icon",hash:{},data:o,loc:{start:{line:8,column:14},end:{line:8,column:31}}}):i)+'" alt="" class="header-item-settings__icon">\n</div>\n<div class="header-item-settings" id="header__item__theme" data-action="change_theme">\n    <img src="'+l(typeof(i=null!=(i=u(r,"theme_icon")||(null!=t?u(t,"theme_icon"):t))?i:c)===s?i.call(a,{name:"theme_icon",hash:{},data:o,loc:{start:{line:11,column:14},end:{line:11,column:28}}}):i)+'" alt="" class="header-item-theme__icon" data-action="change_theme">\n</div>'},useData:!0})},7892:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <img src="'+e.escapeExpression(e.lambda(null!=(i=null!=t?a(t,"msg"):t)?a(i,"sticker_src"):i,t))+'" alt="" style="width: 150px">\n'},3:function(e,t,r,n,o,i){var a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n            <div class="message__text">\n                '+e.escapeExpression(e.lambda(null!=(a=null!=t?c(t,"msg"):t)?c(a,"body"):a,t))+'\n            </div>\n            <div class="message__attachments">\n'+(null!=(a=c(r,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?c(t,"msg"):t)?c(a,"attachments"):a,{name:"each",hash:{},fn:e.program(4,o,1,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:19,column:16},end:{line:21,column:25}}}))?a:"")+"            </div>\n"},4:function(e,t,r,n,o,i){var a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <img class="message__attachments__img" src="'+e.escapeExpression(e.lambda(null!=(a=i[0][0])?c(a,"src"):a,t))+'" alt="">\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o,i){var a,c=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="message">\n    <img src="'+s(c(null!=(a=null!=t?l(t,"user"):t)?l(a,"avatar"):a,t))+'" class="author-message__avatar" alt="" data-action="user_profile"\n        data-user_id="'+s(c(null!=(a=null!=t?l(t,"user"):t)?l(a,"id"):a,t))+'">\n    <div class="message__wrapper">\n        <div class="author-message__name" data-action="user_profile" data-user_id="'+s(c(null!=(a=null!=t?l(t,"user"):t)?l(a,"id"):a,t))+'">'+s(c(null!=(a=null!=t?l(t,"user"):t)?l(a,"first_name"):a,t))+"\n            "+s(c(null!=(a=null!=t?l(t,"user"):t)?l(a,"last_name"):a,t))+'</div>\n        <div class="message__date">\n            '+s(c(null!=(a=null!=t?l(t,"msg"):t)?l(a,"created_at"):a,t))+'\n        </div>\n        <div class="message__content">\n'+(null!=(a=l(r,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?l(t,"msg"):t)?l(a,"sticker_src"):a,{name:"if",hash:{},fn:e.program(1,o,0,i),inverse:e.program(3,o,0,i),data:o,blockParams:i,loc:{start:{line:11,column:12},end:{line:23,column:19}}}))?a:"")+"        </div>\n    </div>\n</div>"},useData:!0,useBlockParams:!0})},8256:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="message-create">\n    <div class="message-create__tools">\n        <button class="message-create-button message-create-button--small message-create-button__smiles">\n            <img class="message-create-button__icon" src="../src/img/smile_icon.svg" alt="">\n            '+(null!=(i=typeof(a=null!=(a=u(r,"smiles")||(null!=t?u(t,"smiles"):t))?a:s)===l?a.call(c,{name:"smiles",hash:{},data:o,loc:{start:{line:5,column:12},end:{line:5,column:24}}}):a)?i:"")+'\n        </button>\n\n        <button class="message-create-button message-create-button--small message-create-button__smiles">\n            <img class="message-create-button__icon" src="../src/img/sticker_icon.svg" alt="">\n            '+(null!=(i=typeof(a=null!=(a=u(r,"stickers")||(null!=t?u(t,"stickers"):t))?a:s)===l?a.call(c,{name:"stickers",hash:{},data:o,loc:{start:{line:10,column:12},end:{line:10,column:26}}}):a)?i:"")+'\n        </button>\n\n        <button class="message-create-button message-create-button--small" data-action="add_attachment">\n            <img class="message-create-button__icon" src="../src/img/camera_icon.svg" alt="">\n        </button>\n\n    </div>\n\n    <div class="message-create__form">\n        <textarea class="message-create__textarea"></textarea>\n        <div class="message-create__attachments"></div>\n    </div>\n\n    <div class="message-create__tools">\n        <button class="message-create-button message-create-button--big" data-action="send">\n            <img class="message-create-button__icon" src="../src/img/send_icon.svg" alt="">\n            <div class="message-create-button__text">\n                Отправить\n            </div>\n        </button>\n    </div>\n</div>'},useData:!0})},3003:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){return'    <button class="profile-button profile-button--green" data-action="settings">\n        <img class="profile-button__icon" src="../src/img/settings_icon_white.svg" alt="">\n        <div class="profile-button__text">\n            Настройки\n        </div>\n    </button>\n'},3:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="profile-button profile-button--green" data-action="message">\n        <img class="profile-button__icon" src="../src/img/message_icon.svg" alt="">\n        <div class="profile-button__text">\n            Сообщение\n        </div>\n    </button>\n'+(null!=(i=a(r,"if").call(null!=t?t:e.nullContext||{},null!=(i=null!=t?a(t,"status"):t)?a(i,"isFriend"):i,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.program(6,o,0),data:o,loc:{start:{line:16,column:4},end:{line:30,column:11}}}))?i:"")},4:function(e,t,r,n,o){return'    <button class="profile-button profile-button--red" data-action="remove_friend">\n        <img class="profile-button__icon" src="../src/img/x_icon.svg" alt="">\n        <div class="profile-button__text">\n            Отписаться\n        </div>\n    </button>\n'},6:function(e,t,r,n,o){return'    <button class="profile-button profile-button--green" data-action="add_to_friends">\n        <img class="profile-button__icon" src="../src/img/plus_icon.svg" alt="">\n        <div class="profile-button__text">\n            Подписаться\n        </div>\n    </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="profile-buttons">\n'+(null!=(i=a(r,"if").call(null!=t?t:e.nullContext||{},null!=(i=null!=t?a(t,"status"):t)?a(i,"isCurrent"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:4},end:{line:31,column:11}}}))?i:"")+"</div>"},useData:!0})},8419:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="profile-user" data-user_id="'+l(typeof(i=null!=(i=u(r,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(a,{name:"id",hash:{},data:o,loc:{start:{line:1,column:40},end:{line:1,column:46}}}):i)+'">\n    <img src="'+l(typeof(i=null!=(i=u(r,"avatar")||(null!=t?u(t,"avatar"):t))?i:c)===s?i.call(a,{name:"avatar",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:24}}}):i)+'" alt="" class="profile-user__avatar">\n    <div class="profile-user__name">\n        '+l(typeof(i=null!=(i=u(r,"first_name")||(null!=t?u(t,"first_name"):t))?i:c)===s?i.call(a,{name:"first_name",hash:{},data:o,loc:{start:{line:4,column:8},end:{line:4,column:22}}}):i)+" "+l(typeof(i=null!=(i=u(r,"last_name")||(null!=t?u(t,"last_name"):t))?i:c)===s?i.call(a,{name:"last_name",hash:{},data:o,loc:{start:{line:4,column:23},end:{line:4,column:36}}}):i)+"\n    </div>\n</div>\n"},useData:!0})},6157:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o,i,a){var c,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="settings-group">\n'+(null!=(c=l(r,"each").call(s,null!=(c=i[0][0])?l(c,"inputs"):c,{name:"each",hash:{},fn:e.program(2,o,1,i,a),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:3,column:4},end:{line:12,column:13}}}))?c:"")+(null!=(c=l(r,"each").call(s,null!=(c=i[0][0])?l(c,"textareas"):c,{name:"each",hash:{},fn:e.program(4,o,1,i,a),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:13,column:4},end:{line:22,column:13}}}))?c:"")+'    <button class="settings-group__button settings-group__button--small" data-action="submit">Применить</button>\n</div>\n'},2:function(e,t,r,n,o,i,a){var c,s=e.lambda,l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="settings-input-with-title">\n        <div class="settings-input-with-title__title">\n            '+l(s(null!=(c=i[0][0])?u(c,"title"):c,t))+"\n        </div>\n        <input type="+l(s(null!=(c=i[0][0])?u(c,"type"):c,t))+" id="+l(s(null!=(c=i[0][0])?u(c,"id"):c,t))+' value="'+l(u(r,"lookup").call(null!=t?t:e.nullContext||{},null!=a[2]?u(a[2],"data"):a[2],null!=(c=i[0][0])?u(c,"id"):c,{name:"lookup",hash:{},data:o,blockParams:i,loc:{start:{line:8,column:56},end:{line:8,column:90}}}))+'"\n            class="settings-input-with-title__input" />\n        <div id="'+l(s(null!=(c=i[0][0])?u(c,"id"):c,t))+'-msg" class="settings-input-with-title__error-msg"></div>\n    </div>\n'},4:function(e,t,r,n,o,i,a){var c,s=e.lambda,l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="settings-input-with-title">\n        <div class="settings-input-with-title__title">\n            '+l(s(null!=(c=i[0][0])?u(c,"title"):c,t))+'\n        </div>\n        <textarea class="settings-input-with-title__input" name="'+l(s(null!=(c=i[0][0])?u(c,"name"):c,t))+'" id="'+l(s(null!=(c=i[0][0])?u(c,"id"):c,t))+'"\n            rows="'+l(s(null!=(c=i[0][0])?u(c,"rows"):c,t))+'">'+l(u(r,"lookup").call(null!=t?t:e.nullContext||{},null!=a[2]?u(a[2],"data"):a[2],null!=(c=i[0][0])?u(c,"id"):c,{name:"lookup",hash:{},data:o,blockParams:i,loc:{start:{line:19,column:35},end:{line:19,column:71}}}))+'</textarea>\n        <div id="'+l(s(null!=(c=i[0][0])?u(c,"id"):c,t))+'-msg" class="settings-input-with-title__error-msg"></div>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o,i,a){var c,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(c=s(r,"each").call(null!=t?t:e.nullContext||{},null!=(c=null!=t?s(t,"config"):t)?s(c,"groups"):c,{name:"each",hash:{},fn:e.program(1,o,1,i,a),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:1,column:0},end:{line:25,column:9}}}))?c:""},useData:!0,useDepths:!0,useBlockParams:!0})},6958:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="smiles">\n    <div class="block-name">Эмоции</div>\n    <div class="smiles-block">\n        <div class="smiles-block__smile" data-action="smile">😀</div>\n        <div class="smiles-block__smile" data-action="smile">😃</div>\n        <div class="smiles-block__smile" data-action="smile">😄</div>\n        <div class="smiles-block__smile" data-action="smile">😁</div>\n        <div class="smiles-block__smile" data-action="smile">😅</div>\n        <div class="smiles-block__smile" data-action="smile">😆</div>\n        <div class="smiles-block__smile" data-action="smile">😂</div>\n        <div class="smiles-block__smile" data-action="smile">🤣</div>\n        <div class="smiles-block__smile" data-action="smile">😉</div>\n        <div class="smiles-block__smile" data-action="smile">😊</div>\n        <div class="smiles-block__smile" data-action="smile">🙂</div>\n        <div class="smiles-block__smile" data-action="smile">🙃</div>\n        <div class="smiles-block__smile" data-action="smile">😇</div>\n        <div class="smiles-block__smile" data-action="smile">😗</div>\n        <div class="smiles-block__smile" data-action="smile">😙</div>\n        <div class="smiles-block__smile" data-action="smile">😚</div>\n        <div class="smiles-block__smile" data-action="smile">😘</div>\n        <div class="smiles-block__smile" data-action="smile">😍</div>\n        <div class="smiles-block__smile" data-action="smile">🥰</div>\n        <div class="smiles-block__smile" data-action="smile">🤩</div>\n        <div class="smiles-block__smile" data-action="smile">🤗</div>\n        <div class="smiles-block__smile" data-action="smile">😋</div>\n        <div class="smiles-block__smile" data-action="smile">😜</div>\n        <div class="smiles-block__smile" data-action="smile">🤪</div>\n        <div class="smiles-block__smile" data-action="smile">😛</div>\n        <div class="smiles-block__smile" data-action="smile">😝</div>\n        <div class="smiles-block__smile" data-action="smile">🤑</div>\n        <div class="smiles-block__smile" data-action="smile">🤭</div>\n        <div class="smiles-block__smile" data-action="smile">🤐</div>\n        <div class="smiles-block__smile" data-action="smile">🤫</div>\n        <div class="smiles-block__smile" data-action="smile">😶</div>\n        <div class="smiles-block__smile" data-action="smile">🤔</div>\n        <div class="smiles-block__smile" data-action="smile">🤨</div>\n        <div class="smiles-block__smile" data-action="smile">🧐</div>\n        <div class="smiles-block__smile" data-action="smile">😐</div>\n        <div class="smiles-block__smile" data-action="smile">😑</div>\n        <div class="smiles-block__smile" data-action="smile">🙄</div>\n        <div class="smiles-block__smile" data-action="smile">😬</div>\n        <div class="smiles-block__smile" data-action="smile">🤥</div>\n        <div class="smiles-block__smile" data-action="smile">😏</div>\n        <div class="smiles-block__smile" data-action="smile">😌</div>\n        <div class="smiles-block__smile" data-action="smile">🤤</div>\n        <div class="smiles-block__smile" data-action="smile">😴</div>\n        <div class="smiles-block__smile" data-action="smile">🤓</div>\n        <div class="smiles-block__smile" data-action="smile">😎</div>\n        <div class="smiles-block__smile" data-action="smile">🥳</div>\n        <div class="smiles-block__smile" data-action="smile">🤠</div>\n        <div class="smiles-block__smile" data-action="smile">😒</div>\n        <div class="smiles-block__smile" data-action="smile">😔</div>\n        <div class="smiles-block__smile" data-action="smile">😪</div>\n        <div class="smiles-block__smile" data-action="smile">😕</div>\n        <div class="smiles-block__smile" data-action="smile">😟</div>\n        <div class="smiles-block__smile" data-action="smile">🙁</div>\n        <div class="smiles-block__smile" data-action="smile">😮</div>\n        <div class="smiles-block__smile" data-action="smile">😯</div>\n        <div class="smiles-block__smile" data-action="smile">😲</div>\n        <div class="smiles-block__smile" data-action="smile">😳</div>\n        <div class="smiles-block__smile" data-action="smile">🥺</div>\n        <div class="smiles-block__smile" data-action="smile">😦</div>\n        <div class="smiles-block__smile" data-action="smile">😧</div>\n        <div class="smiles-block__smile" data-action="smile">😨</div>\n        <div class="smiles-block__smile" data-action="smile">😰</div>\n        <div class="smiles-block__smile" data-action="smile">😥</div>\n        <div class="smiles-block__smile" data-action="smile">😢</div>\n        <div class="smiles-block__smile" data-action="smile">😭</div>\n        <div class="smiles-block__smile" data-action="smile">😱</div>\n        <div class="smiles-block__smile" data-action="smile">😖</div>\n        <div class="smiles-block__smile" data-action="smile">😣</div>\n        <div class="smiles-block__smile" data-action="smile">😞</div>\n        <div class="smiles-block__smile" data-action="smile">😓</div>\n        <div class="smiles-block__smile" data-action="smile">😩</div>\n        <div class="smiles-block__smile" data-action="smile">😫</div>\n        <div class="smiles-block__smile" data-action="smile">😷</div>\n        <div class="smiles-block__smile" data-action="smile">🤒</div>\n        <div class="smiles-block__smile" data-action="smile">🤕</div>\n        <div class="smiles-block__smile" data-action="smile">🤢</div>\n        <div class="smiles-block__smile" data-action="smile">🤮</div>\n        <div class="smiles-block__smile" data-action="smile">🤧</div>\n        <div class="smiles-block__smile" data-action="smile">🥶</div>\n        <div class="smiles-block__smile" data-action="smile">🥵</div>\n        <div class="smiles-block__smile" data-action="smile">🥴</div>\n        <div class="smiles-block__smile" data-action="smile">😵</div>\n        <div class="smiles-block__smile" data-action="smile">🤯</div>\n        <div class="smiles-block__smile" data-action="smile">😤</div>\n        <div class="smiles-block__smile" data-action="smile">😠</div>\n        <div class="smiles-block__smile" data-action="smile">😡</div>\n        <div class="smiles-block__smile" data-action="smile">🤬</div>\n        <div class="smiles-block__smile" data-action="smile">😈</div>\n        <div class="smiles-block__smile" data-action="smile">👿</div>\n        <div class="smiles-block__smile" data-action="smile">💀</div>\n        <div class="smiles-block__smile" data-action="smile">☠</div>\n        <div class="smiles-block__smile" data-action="smile">💩</div>\n        <div class="smiles-block__smile" data-action="smile">🤡</div>\n        <div class="smiles-block__smile" data-action="smile">👹</div>\n        <div class="smiles-block__smile" data-action="smile">👺</div>\n        <div class="smiles-block__smile" data-action="smile">👻</div>\n        <div class="smiles-block__smile" data-action="smile">👽</div>\n        <div class="smiles-block__smile" data-action="smile">👾</div>\n        <div class="smiles-block__smile" data-action="smile">🤖</div>\n        <div class="smiles-block__smile" data-action="smile">😺</div>\n        <div class="smiles-block__smile" data-action="smile">😸</div>\n        <div class="smiles-block__smile" data-action="smile">😹</div>\n        <div class="smiles-block__smile" data-action="smile">😻</div>\n        <div class="smiles-block__smile" data-action="smile">😼</div>\n        <div class="smiles-block__smile" data-action="smile">😽</div>\n        <div class="smiles-block__smile" data-action="smile">🙀</div>\n        <div class="smiles-block__smile" data-action="smile">😿</div>\n        <div class="smiles-block__smile" data-action="smile">😾</div>\n        <div class="smiles-block__smile" data-action="smile">🙈</div>\n        <div class="smiles-block__smile" data-action="smile">🙉</div>\n        <div class="smiles-block__smile" data-action="smile">🙊</div>\n        <div class="smiles-block__smile" data-action="smile">🦠</div>\n    </div>\n</div>'},useData:!0})},4490:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o,i){var a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=c(r,"each").call(null!=t?t:e.nullContext||{},null!=t?c(t,"stickers"):t,{name:"each",hash:{},fn:e.program(2,o,1,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:5,column:12},end:{line:7,column:21}}}))?a:""},2:function(e,t,r,n,o,i){var a,c=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <img src="'+s(c(null!=(a=i[0][0])?l(a,"src"):a,t))+'" class="stickers-block__sticker" data-sticker_id="'+s(c(null!=(a=i[0][0])?l(a,"id"):a,t))+'" data-action="sticker_item">\n'},4:function(e,t,r,n,o){return"            No stickers\n"},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o,i){var a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="stickers">\n    <div class="block-name">Стикеры</div>\n    <div class="stickers-block">\n'+(null!=(a=c(r,"if").call(null!=t?t:e.nullContext||{},null!=t?c(t,"stickers"):t,{name:"if",hash:{},fn:e.program(1,o,0,i),inverse:e.program(4,o,0,i),data:o,blockParams:i,loc:{start:{line:4,column:8},end:{line:10,column:15}}}))?a:"")+"    </div>\n</div>"},useData:!0,useBlockParams:!0})},6002:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="about-ws">\n    <div class="typewriter-wrapper">\n        <div class="typewriter">\n            <h1>WRITE & SEND</h1>\n        </div>\n    </div>\n    <div class="description">\n        Это онлайн платформа для обмена сообщениями, новостями и картинками между пользователями. Write&Send предлагает\n        минималистичный, неперегруженный сервис с самым необходимым!\n        Здесь вы можете:\n    </div>\n    <div class="info-flex">\n        <div class="info-block">\n            Обмениваться сообщениями <br>✉️\n        </div>\n        <div class="info-block">\n            Делиться новостями <br>📸\n        </div>\n        <div class="info-block">\n            Объединяться в сообщества <br>👩‍💻👨‍💻\n        </div>\n        <div class="info-block">\n            Искать новых друзей <br>👋\n        </div>\n    </div>\n    <div class="description">\n        А также многое другое! <br>\n        Скорее авторизируйтесь и становитесь частью самого классного сообщества в мире!\n    </div>\n\n    <div class="block-links">\n        <a id="about-ws-block-link-signin" href="/signin" class="button">Войти</a>\n        <a id="about-ws-block-link-signup" href="/signup" class="button">Зарегистрироваться</a>\n    </div>\n</div>'},useData:!0})},7791:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="attachments-container">\n\n</div>'},useData:!0})},8939:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="avatar-upload__wrapper">\n    <div class="avatar-upload">\n        <input type="file" id="choose-file" style="display: none;">\n        <div class="avatar-upload__choose" data-action="choose">\n            <img class="avatar-upload__preview avatar-upload--hide" src="../src/img/default_avatar.png" alt="">\n            <div class="avatar-upload-mock">\n                <img src="../src/img/camera_icon_black.svg" class="avatar-upload-mock__icon" alt="">\n                <div class="avatar-upload-mock__text">\n                    Выберите фотографию\n                </div>\n            </div>\n        </div>\n        <div class="avatar-upload__tools avatar-upload--hide">\n            <button class="avatar-upload-button avatar-upload-button--green" data-action="upload">\n                <img class="avatar-upload-button__icon" src="../src/img/plus_icon.svg" alt="">\n                <div class="avatar-upload-button__text">\n                    Загрузить\n                </div>\n            </button>\n            <button class="avatar-upload-button avatar-upload-button--red" data-action="clear">\n                <img class="avatar-upload-button__icon" src="../src/img/x_icon.svg" alt="">\n                <div class="avatar-upload-button__text">\n                    Отменить\n                </div>\n            </button>\n        </div>\n    </div>\n</div>'},useData:!0})},1560:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="chat">\n    <div class="chat__navbar"></div>\n    <div class="chat__content"></div>\n    <div class="chat__footer"></div>\n</div>'},useData:!0})},8119:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="communities">\n    <div class="communities__navbar">\n\n    </div>\n    <div class="communities__list">\n\n    </div>\n    <div class="communities-mock">\n        <div class="communities-mock__text">Вы ещё не вступили ни в одно сообщество</div>\n    </div>\n    <div class="communities__overlay communities--hide">\n\n    </div>\n</div>'},useData:!0})},2424:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="community">\n    <div class="community__container">\n        <div class="community__data">\n        </div>\n        <div class="community__nav">\n        </div>\n    </div>\n    <div class="community__overlay community--hidden">\n\n    </div>\n</div>'},useData:!0})},2837:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="feed">\n    <div class="feed__navbar"></div>\n    <div class="feed-mock">\n        <img class="feed-mock__icon" src="../src/img/paper_icon.svg">\n        <div class="feed-mock__text">Здесь пока нет записей</div>\n    </div>\n    <div class="feed__cards"></div>\n    <div class="feed__overlay"></div>\n</div>'},useData:!0})},4608:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o){var i,a,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",u=e.escapeExpression,d=e.lambda,f=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a id="'+u(typeof(a=null!=(a=f(r,"id")||(null!=t?f(t,"id"):t))?a:s)===l?a.call(c,{name:"id",hash:{},data:o,loc:{start:{line:6,column:15},end:{line:6,column:21}}}):a)+'" href="'+u(typeof(a=null!=(a=f(r,"href")||(null!=t?f(t,"href"):t))?a:s)===l?a.call(c,{name:"href",hash:{},data:o,loc:{start:{line:6,column:29},end:{line:6,column:37}}}):a)+'" class="footer-contact">\n            <img id="'+u(d(null!=(i=null!=t?f(t,"icon"):t)?f(i,"id"):i,t))+'" src="'+u(d(null!=(i=null!=t?f(t,"icon"):t)?f(i,"src"):i,t))+'" class="footer-contact__icon">\n        </a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lambda,c=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="footer__container">\n    <img src="'+c(a(null!=(i=null!=t?s(t,"logo"):t)?s(i,"src"):i,t))+'" class="footer__logo">\n    <div class="footer__contacts">\n        Contacts:\n'+(null!=(i=s(r,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"contacts"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:8},end:{line:9,column:17}}}))?i:"")+'        <div class="footer__company-name">\n            '+c(a(null!=(i=null!=t?s(t,"company"):t)?s(i,"name"):i,t))+"\n        </div>\n    </div>\n</div>"},useData:!0})},1371:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="friends">\n    <div class="friends__navbar"></div>\n    <div class="friend-mock">\n        <div class="friend-mock__text">Пользователи не найдены</div>\n    </div>\n    <div class="friends__content"></div>\n</div>'},useData:!0})},1987:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){var i,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="header-container">\n    <div class="header-container__logo" href=\'/feed\'>\n        WS\n    </div>\n    <div id="header__item" class="header-container__item">\n        '+e.escapeExpression("function"==typeof(i=null!=(i=a(r,"item")||(null!=t?a(t,"item"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"item",hash:{},data:o,loc:{start:{line:6,column:8},end:{line:6,column:16}}}):i)+"\n    </div>\n</div>"},useData:!0})},53:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({1:function(e,t,r,n,o,i){var a,c=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div href="'+s(c(null!=(a=i[0][0])?l(a,"href"):a,t))+'" class="menu-left-item '+(null!=(a=l(r,"if").call(null!=t?t:e.nullContext||{},null!=(a=i[0][0])?l(a,"style"):a,{name:"if",hash:{},fn:e.program(2,o,0,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:7,column:56},end:{line:7,column:98}}}))?a:"")+'">\n            <img src="'+s(c(null!=(a=i[0][0])?l(a,"icon"):a,t))+'" class="menu-left-item__icon">\n            <div class="menu-left-item__text">'+s(c(null!=(a=i[0][0])?l(a,"text"):a,t))+"</div>\n        </div>\n"},2:function(e,t,r,n,o,i){var a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression(e.lambda(null!=(a=i[1][0])?c(a,"style"):a,t))+" "},compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o,i){var a,c,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="menu-left">\n    <div class="menu-left__title">\n        '+e.escapeExpression("function"==typeof(c=null!=(c=l(r,"title")||(null!=t?l(t,"title"):t))?c:e.hooks.helperMissing)?c.call(s,{name:"title",hash:{},data:o,blockParams:i,loc:{start:{line:3,column:8},end:{line:3,column:17}}}):c)+'\n    </div>\n    <div class="menu-left__items">\n'+(null!=(a=l(r,"each").call(s,null!=t?l(t,"items"):t,{name:"each",hash:{},fn:e.program(1,o,1,i),inverse:e.noop,data:o,blockParams:i,loc:{start:{line:6,column:8},end:{line:11,column:17}}}))?a:"")+"    </div>\n</div>"},useData:!0,useBlockParams:!0})},8991:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="messenger">\n    <div class="messenger__navbar"></div>\n    <div class="messenger-mock">\n        <div class="messenger-mock__text">У вас ещё нет диалогов. Напишите первым!</div>\n    </div>\n    <div class="messenger__content"></div>\n    <div class="messenger__footer"></div>\n</div>'},useData:!0})},4549:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="page-not-found">\n    <div class="page-not-found__container">\n        <img class="page-not-found__icon" src="../src/img/404_icon.svg">\n        <div class="page-not-found__title">\n            404\n        </div>\n        <div class="page-not-found__text">\n            Запрашиваемая страница не найдена :(\n        </div>\n    </div>\n</div>'},useData:!0})},6523:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="profile">\n    <div class="profile__container">\n        <div class="profile__user">\n        </div>\n        <div class="profile__nav">\n        </div>\n    </div>\n</div>'},useData:!0})},4769:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="settings"></div>'},useData:!0})},6969:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="signin-container"></div>'},useData:!0})},9397:(e,t,r)=>{var n=r(202);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,r,n,o){return'<div class="signup-container"></div>'},useData:!0})},6834:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0;var i=o(r(2067)),a=n(r(5558)),c=n(r(8728)),s=o(r(2392)),l=o(r(1628)),u=n(r(3982));function d(){var e=new i.HandlebarsEnvironment;return s.extend(e,i),e.SafeString=a.default,e.Exception=c.default,e.Utils=s,e.escapeExpression=s.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var f=d();f.create=d,u.default(f),f.default=f,t.default=f,e.exports=t.default},2067:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=d;var o=r(2392),i=n(r(8728)),a=r(2638),c=r(881),s=n(r(8037)),l=r(6293);t.VERSION="4.7.7",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function d(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},a.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:s.default,log:s.default.log,registerHelper:function(e,t){if(o.toString.call(e)===u){if(t)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===u)o.extend(this.partials,e);else{if(void 0===t)throw new i.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===u){if(t)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){l.resetLoggedProperties()}};var f=s.default.log;t.log=f,t.createFrame=o.createFrame,t.logger=s.default},881:(e,t,r)=>{"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var n,o=(n=r(5670))&&n.__esModule?n:{default:n}},5670:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(2392);t.default=function(e){e.registerDecorator("inline",(function(e,t,r,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var a=r.partials;r.partials=n.extend({},a,t.partials);var c=e(o,i);return r.partials=a,c}),t.partials[o.args[0]]=o.fn,i}))},e.exports=t.default},8728:(e,t)=>{"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function n(e,t){var o=t&&t.loc,i=void 0,a=void 0,c=void 0,s=void 0;o&&(i=o.start.line,a=o.end.line,c=o.start.column,s=o.end.column,e+=" - "+i+":"+c);for(var l=Error.prototype.constructor.call(this,e),u=0;u<r.length;u++)this[r[u]]=l[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{o&&(this.lineNumber=i,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:c,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:s,enumerable:!0})):(this.column=c,this.endColumn=s))}catch(e){}}n.prototype=new Error,t.default=n,e.exports=t.default},2638:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),i.default(e),a.default(e),c.default(e),s.default(e),l.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])};var o=n(r(7342)),i=n(r(6822)),a=n(r(4905)),c=n(r(7405)),s=n(r(5702)),l=n(r(7593)),u=n(r(3978))},7342:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(2392);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,r){var o=r.inverse,i=r.fn;if(!0===t)return i(this);if(!1===t||null==t)return o(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):o(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return i(t,r)}))},e.exports=t.default},6822:(e,t,r)=>{"use strict";t.__esModule=!0;var n,o=r(2392),i=(n=r(8728))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new i.default("Must pass iterator to #each");var n,a=t.fn,c=t.inverse,s=0,l="",u=void 0,d=void 0;function f(t,r,n){u&&(u.key=t,u.index=r,u.first=0===r,u.last=!!n,d&&(u.contextPath=d+t)),l+=a(e[t],{data:u,blockParams:o.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(u=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var p=e.length;s<p;s++)s in e&&f(s,s,s===e.length-1);else if(r.g.Symbol&&e[r.g.Symbol.iterator]){for(var h=[],m=e[r.g.Symbol.iterator](),v=m.next();!v.done;v=m.next())h.push(v.value);for(p=(e=h).length;s<p;s++)f(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&f(n,s-1),n=e,s++})),void 0!==n&&f(n,s-1,!0);return 0===s&&(l=c(this)),l}))},e.exports=t.default},4905:(e,t,r)=>{"use strict";t.__esModule=!0;var n,o=(n=r(8728))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},7405:(e,t,r)=>{"use strict";t.__esModule=!0;var n,o=r(2392),i=(n=r(8728))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new i.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,r){if(2!=arguments.length)throw new i.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},e.exports=t.default},5702:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var o=1;null!=r.hash.level?o=r.hash.level:r.data&&null!=r.data.level&&(o=r.data.level),t[0]=o,e.log.apply(e,t)}))},e.exports=t.default},7593:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,r){return e?r.lookupProperty(e,t):e}))},e.exports=t.default},3978:(e,t,r)=>{"use strict";t.__esModule=!0;var n,o=r(2392),i=(n=r(8728))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new i.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var r=t.fn;if(o.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:n,blockParams:o.blockParams([e],[n&&n.contextPath])})}))},e.exports=t.default},8572:(e,t,r)=>{"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.extend.apply(void 0,[Object.create(null)].concat(t))};var n=r(2392)},6293:(e,t,r)=>{"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var r=Object.create(null);return r.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,r){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==i[e]&&(i[e]=!0,o.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}("function"==typeof e?t.methods:t.properties,r)},t.resetLoggedProperties=function(){Object.keys(i).forEach((function(e){delete i[e]}))};var n=r(8572),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(8037)),i=Object.create(null)},5005:(e,t)=>{"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=t(r),e.apply(this,arguments)}}},8037:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(2392),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];console[t].apply(console,n)}}};t.default=o,e.exports=t.default},3982:(e,t,r)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==r.g?r.g:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default},1628:(e,t,r)=>{"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,r=a.COMPILER_REVISION;if(!(t>=a.LAST_COMPATIBLE_COMPILER_REVISION&&t<=a.COMPILER_REVISION)){if(t<a.LAST_COMPATIBLE_COMPILER_REVISION){var n=a.REVISION_CHANGES[r],o=a.REVISION_CHANGES[t];throw new i.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new i.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new i.default("No environment passed to template");if(!e||!e.main)throw new i.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r=e.compiler&&7===e.compiler[0],n={strict:function(e,t,r){if(!e||!(t in e))throw new i.default('"'+t+'" not defined in '+e,{loc:r});return n.lookupProperty(e,t)},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||l.resultIsAllowed(r,n.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,o=0;o<r;o++)if(null!=(e[o]&&n.lookupProperty(e[o],t)))return e[o][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:o.escapeExpression,invokePartial:function(r,n,a){a.hash&&(n=o.extend({},n,a.hash),a.ids&&(a.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,a);var c=o.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),s=t.VM.invokePartial.call(this,r,n,c);if(null==s&&t.compile&&(a.partials[a.name]=t.compile(r,e.compilerOptions,t),s=a.partials[a.name](n,c)),null!=s){if(a.indent){for(var l=s.split("\n"),u=0,d=l.length;u<d&&(l[u]||u+1!==d);u++)l[u]=a.indent+l[u];s=l.join("\n")}return s}throw new i.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,o){var i=this.programs[e],a=this.fn(e);return t||o||n||r?i=u(this,e,a,t,r,n,o):i||(i=this.programs[e]=u(this,e,a)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=o.extend({},t,e)),r},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function a(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=r.data;a._setup(r),!r.partial&&e.useData&&(o=f(t,o));var i=void 0,c=e.useBlockParams?[]:void 0;function s(t){return""+e.main(n,t,n.helpers,n.partials,o,c,i)}return e.useDepths&&(i=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(s=p(e.main,s,n,r.depths||[],o,c))(t,r)}return a.isTop=!0,a._setup=function(i){if(i.partial)n.protoAccessControl=i.protoAccessControl,n.helpers=i.helpers,n.partials=i.partials,n.decorators=i.decorators,n.hooks=i.hooks;else{var a=o.extend({},t.helpers,i.helpers);!function(e,t){Object.keys(e).forEach((function(r){var n=e[r];e[r]=function(e,t){var r=t.lookupProperty;return s.wrapHelper(e,(function(e){return o.extend({lookupProperty:r},e)}))}(n,t)}))}(a,n),n.helpers=a,e.usePartial&&(n.partials=n.mergeIfNeeded(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=o.extend({},t.decorators,i.decorators)),n.hooks={},n.protoAccessControl=l.createProtoAccessControl(i);var u=i.allowCallsToHelperMissing||r;c.moveHelperToHooks(n,"helperMissing",u),c.moveHelperToHooks(n,"blockHelperMissing",u)}},a._child=function(t,r,o,a){if(e.useBlockParams&&!o)throw new i.default("must pass block params");if(e.useDepths&&!a)throw new i.default("must pass parent depths");return u(n,t,e[t],r,0,o,a)},a},t.wrapProgram=u,t.resolvePartial=function(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e},t.invokePartial=function(e,t,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var c=void 0;if(r.fn&&r.fn!==d&&function(){r.data=a.createFrame(r.data);var e=r.fn;c=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=a.createFrame(r.data),r.data["partial-block"]=n,e(t,r)},e.partials&&(r.partials=o.extend({},r.partials,e.partials))}(),void 0===e&&c&&(e=c),void 0===e)throw new i.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},t.noop=d;var n,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(2392)),i=(n=r(8728))&&n.__esModule?n:{default:n},a=r(2067),c=r(2638),s=r(5005),l=r(6293);function u(e,t,r,n,o,i,a){function c(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(c=[t].concat(a)),r(e,t,e.helpers,e.partials,o.data||n,i&&[o.blockParams].concat(i),c)}return(c=p(r,c,e,a,n,i)).program=t,c.depth=a?a.length:0,c.blockParams=o||0,c}function d(){return""}function f(e,t){return t&&"root"in t||((t=t?a.createFrame(t):{}).root=e),t}function p(e,t,r,n,i,a){if(e.decorator){var c={};t=e.decorator(t,c,r,n&&n[0],i,a,n),o.extend(t,c)}return t}},5558:(e,t)=>{"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},2392:(e,t)=>{"use strict";t.__esModule=!0,t.extend=a,t.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return o.test(e)?e.replace(n,i):e},t.isEmpty=function(e){return!e&&0!==e||!(!l(e)||0!==e.length)},t.createFrame=function(e){var t=a({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},n=/[&<>"'`=]/g,o=/[&<>"'`=]/;function i(e){return r[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var c=Object.prototype.toString;t.toString=c;var s=function(e){return"function"==typeof e};s(/x/)&&(t.isFunction=s=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)}),t.isFunction=s;var l=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===c.call(e)};t.isArray=l},202:(e,t,r)=>{e.exports=r(6834).default},3379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},a=[],c=0;c<e.length;c++){var s=e[c],l=n.base?s[0]+n.base:s[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var f=r(d),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,n);n.byIndex=c,t.splice(c,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=r(i[a]);t[c].references--}for(var s=n(e,o),l=0;l<i.length;l++){var u=r(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=s}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{"use strict";var e=r(5884),t=r.n(e),n=r(3379),o=r.n(n),i=r(7795),a=r.n(i),c=r(569),s=r.n(c),l=r(3565),u=r.n(l),d=r(9216),f=r.n(d),p=r(4589),h=r.n(p),m=r(1976),v={};v.styleTagTransform=h(),v.setAttributes=u(),v.insert=s().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=f(),o()(m.Z,v),m.Z&&m.Z.locals&&m.Z.locals;var y=r(9978),b={};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===g(o)?o:String(o)),n)}var o}b.styleTagTransform=h(),b.setAttributes=u(),b.insert=s().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=f(),o()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;const _=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routes=[],this.unknownPageHandler=function(){}}var t,r;return t=e,(r=[{key:"start",value:function(e){var t=this;history.replaceState({path:e},"",e),window.addEventListener("popstate",(function(e){e.preventDefault(),t.route()})),this.route()}},{key:"goToPath",value:function(e){history.pushState({path:e},"",e),this.route()}},{key:"route",value:function(){var e,t=null===(e=history.state)||void 0===e?void 0:e.path;if(t){var r=this.sanitizeUrl(t);this.routes.find((function(e){var t=r.match(e.rule);return!!t&&(t.shift(),e.handler(t),!0)}))||this.unknownPageHandler()}}},{key:"showUnknownPage",value:function(){this.unknownPageHandler()}},{key:"setUnknownPageHandler",value:function(e){this.unknownPageHandler=e}},{key:"addRule",value:function(e,t){this.routes.push({rule:this.parseRule(e),handler:t})}},{key:"parseRule",value:function(e){var t=this.sanitizeUrl(e).replace(/{\:number}/g,"(\\d+)").replace(/{\:word}/g,"(\\w+)").replace(/{\:\w+}/g,"(\\w+)");return new RegExp("^".concat(t,"$"),"i")}},{key:"sanitizeUrl",value:function(e){return e.replace(/\/$/,"").replace(/^\//,"")}}])&&w(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),x="/",k="/signin",O="/signup",P="/feed",j="/profile",S="/logout",E="/settings",C="/friends",T="/users/{:number}",L="/messenger",M="/chat/{:id}",R="/communities",I="/community/{:id}",F="/aboutWS";function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Z(o)?o:String(o)),n)}var o}const N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new Map}var t,r;return t=e,(r=[{key:"subscribe",value:function(e,t){var r=this.events.get(e);r?r.push(t):this.events.set(e,[t])}},{key:"unsubscribe",value:function(e,t){var r=this.events.get(e);r&&this.events.set(e,r.filter((function(e){return e!==t})))}},{key:"emit",value:function(e,t){var r;null===(r=this.events.get(e))||void 0===r||r.forEach((function(e){e(t)}))}}])&&A(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===D(o)?o:String(o)),n)}var o}const q=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t;var o=(new DOMParser).parseFromString(r,"text/html").querySelector(n);if(!o)throw Error("cant crate element from template");this.element=o}var t,r;return t=e,(r=[{key:"show",value:function(e){this.parent.appendChild(this.element)}},{key:"hide",value:function(e){this.parent.removeChild(this.element)}}])&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var U=r(4549),H=r.n(U),G=r(8903),z={};function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function J(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}z.styleTagTransform=h(),z.setAttributes=u(),z.insert=s().bind(null,"head"),z.domAPI=a(),z.insertStyleElement=f(),o()(G.Z,z),G.Z&&G.Z.locals&&G.Z.locals;var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(n){var o=W(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return J(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,H()({}),".page-not-found")}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(q);const K=$;function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==X(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===X(o)?o:String(o)),n)}var o}const ee=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.model=r,this.isMounted=!1}var t,r;return t=e,(r=[{key:"mountComponent",value:function(){this.isMounted||(this.view.show(),this.isMounted=!0)}},{key:"unmountComponent",value:function(){this.isMounted&&(this.view.hide(),this.isMounted=!1)}}])&&Q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function ne(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}const ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(r);if(n){var o=ie(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ne(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e,null),N.subscribe("unmount-all",t.unmountComponent.bind(oe(t))),t}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(ee);var ce=r(9577),se=r.n(ce),le=r(7386),ue={};ue.styleTagTransform=h(),ue.setAttributes=u(),ue.insert=s().bind(null,"head"),ue.domAPI=a(),ue.insertStyleElement=f(),o()(le.Z,ue),le.Z&&le.Z.locals&&le.Z.locals;var de=r(6969),fe=r.n(de),pe=r(6955),he={};he.styleTagTransform=h(),he.setAttributes=u(),he.insert=s().bind(null,"head"),he.domAPI=a(),he.insertStyleElement=f(),o()(pe.Z,he),pe.Z&&pe.Z.locals&&pe.Z.locals;const me={formId:"signin-form",formTitle:"Добро пожаловать!",inputs:[{title:"E-mail:",type:"email",id:"email",placeholder:"George@domain.com"},{title:"Пароль:",type:"password",id:"password",placeholder:"*****"}],submit:{id:"signin-submit-btn",text:"Войти"},links:[{href:"/signup",id:"link-signup",text:"Нет аккаунта?"}]};function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ve(o)?o:String(o)),n)}var o}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function ge(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=we(n);if(o){var r=we(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,fe()({}),".signin-container")).element.innerHTML=se()(me),t}return t=a,(r=[{key:"bindRedirect",value:function(e){var t=this;me.links.forEach((function(r){var n=t.element.querySelector("#"+r.id);null!==n&&n.addEventListener("click",e.bind(t))}))}},{key:"bindSubmit",value:function(e){var t=this.element.querySelector("#"+me.submit.id);null!==t&&t.addEventListener("click",e.bind(this))}},{key:"getData",value:function(){var e=this,t=new Map;return me.inputs.forEach((function(r){var n=e.element.querySelector("#"+r.id);t.set(r.id,n.value)})),t}},{key:"showErrorMsg",value:function(e,t){var r,n=null===(r=this.element.querySelector("#"+e))||void 0===r?void 0:r.closest(".input-with-title");n&&(n.classList.add("input-with-title--error"),n.querySelector(".input-with-title__error-msg").innerHTML=t)}},{key:"hideErrorMsg",value:function(e){var t,r=null===(t=this.element.querySelector("#"+e))||void 0===t?void 0:t.closest(".input-with-title");r&&r.classList.remove("input-with-title--error")}}])&&ye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const xe=_e,ke={email:{regExp:/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/gi,msg:"Введённый email имеет некорректный вид"},password:{regExp:/^\S{8,}$/gi,msg:"Минимальная длина пароля 8 символов"},repeat_password:{regExp:/^\S{8,}$/gi,msg:"Пароли должны совпадать"},first_name:{regExp:/^([a-z]{1,10}|[а-я]{1,10})$/dgi,msg:"Имя может состоять из русских или английских букв без пробелов"},last_name:{regExp:/^([a-z]{1,10}|[а-я]{1,10})$/dgi,msg:"Фамилия может состоять из русских или английских букв без пробелов"},nick_name:{regExp:/^[\w]{1,10}$/dgi,msg:"Псевдоним может состоять из английских букв и цифр без пробелов"},description:{regExp:/^[\S ]{5,}$/gi,msg:"Описание должно содержать минимум 5 символов"},category:{regExp:/^[\S ]{5,}$/gi,msg:"Категория должна содержать минимум 5 символов"},name:{regExp:/^[\S ]{5,}$/gi,msg:"Название сообщества должно иметь длину не менее 5 символов"}};var Oe={isValid:!0,msg:""},Pe={isValid:!1,msg:"Неизвестный тип поля"};const je=function(e,t,r){var n=ke[e];return n?r&&t!==r?{isValid:!1,msg:n.msg}:(n.regExp.lastIndex=0,n.regExp.test(t)?Oe:{isValid:!1,msg:n.msg}):Pe};function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Se(o)?o:String(o)),n)}var o}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Te(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Le(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}const Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(n);if(o){var r=Me(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Te(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,e,t),N.subscribe("unmount-all",r.unmountComponent.bind(Le(r))),r.view.bindSubmit(r.onSubmit.bind(Le(r))),r.view.bindRedirect(r.onRedirect.bind(Le(r))),r}return t=a,(r=[{key:"onRedirect",value:function(e){e.preventDefault(),this.isMounted&&_.goToPath(e.target.getAttribute("href")||"")}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.isMounted){var r=this.view.getData();if(!this.validate(r))return;var n={email:r.get("email")||"",password:r.get("password")||""};this.model.signInUser(n).then((function(){_.goToPath(P)})).catch((function(e){t.view.showErrorMsg("email",e)}))}}},{key:"validate",value:function(e){var t=this,r=!0;return e.forEach((function(e,n){if("password"!==n){var o=je(n,e),i=o.isValid,a=o.msg;if(!i)return r=!1,void t.view.showErrorMsg(n,a);t.view.hideErrorMsg(n)}})),r}}])&&Ee(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);var Ie=r(9397),Fe=r.n(Ie),Ze=r(6615),Ae={};Ae.styleTagTransform=h(),Ae.setAttributes=u(),Ae.insert=s().bind(null,"head"),Ae.domAPI=a(),Ae.insertStyleElement=f(),o()(Ze.Z,Ae),Ze.Z&&Ze.Z.locals&&Ze.Z.locals;const Ne={formId:"signup-form",formTitle:"Рады вас приветствовать!",inputs:[{title:"Ваше имя:",type:"text",id:"first_name",placeholder:"Георгий"},{title:"Ваша фамилия:",type:"text",id:"last_name",placeholder:"Пупкин"},{title:"Придумайте псевдоним:",type:"text",id:"nick_name",placeholder:"GeorgePupkin123"},{title:"E-mail:",type:"email",id:"email",placeholder:"George@domain.com"},{title:"Пароль:",type:"password",id:"password",placeholder:"*****"},{title:"Введите пароль ещё раз:",type:"password",id:"repeat_password",placeholder:"*****"}],submit:{id:"signup-submit-btn",text:"Зарегистрироваться"},links:[{href:"/signin",id:"link-signin",text:"Уже есть аккаунт?"}]};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==De(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===De(o)?o:String(o)),n)}var o}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function Ue(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(n);if(o){var r=He(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ue(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,Fe()({}),".signup-container")).element.innerHTML=se()(Ne),t}return t=a,(r=[{key:"bindRedirect",value:function(e){var t=this;Ne.links.forEach((function(r){var n=t.element.querySelector("#"+r.id);null!==n&&n.addEventListener("click",e.bind(t))}))}},{key:"bindSubmit",value:function(e){var t=this.element.querySelector("#"+Ne.submit.id);null!==t&&t.addEventListener("click",e.bind(this))}},{key:"getData",value:function(){var e=this,t=new Map;return Ne.inputs.forEach((function(r){var n=e.element.querySelector("#"+r.id);t.set(r.id,n.value)})),t}},{key:"showErrorMsg",value:function(e,t){var r,n=null===(r=this.element.querySelector("#"+e))||void 0===r?void 0:r.closest(".input-with-title");n&&(n.classList.add("input-with-title--error"),n.querySelector(".input-with-title__error-msg").innerHTML=t)}},{key:"hideErrorMsg",value:function(e){var t,r=null===(t=this.element.querySelector("#"+e))||void 0===t?void 0:t.closest(".input-with-title");r&&r.classList.remove("input-with-title--error")}}])&&Be(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const ze=Ge;function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ve(o)?o:String(o)),n)}var o}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function We(e,t){if(t&&("object"===Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}const Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(n);if(o){var r=Ke(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return We(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,e,t),N.subscribe("unmount-all",r.unmountComponent.bind($e(r))),r.view.bindSubmit(r.onSubmit.bind($e(r))),r.view.bindRedirect(r.onRedirect.bind($e(r))),r}return t=a,(r=[{key:"onRedirect",value:function(e){e.preventDefault(),this.isMounted&&_.goToPath(e.target.getAttribute("href")||"")}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.isMounted){var r=this.view.getData();if(!this.validate(r))return;var n={first_name:r.get("first_name")||"",last_name:r.get("last_name")||"",nick_name:r.get("nick_name")||"",email:r.get("email")||"",password:r.get("password")||""};this.model.signUpUser(n).then((function(){_.goToPath(P)})).catch((function(e){t.view.showErrorMsg("email",e)}))}}},{key:"validate",value:function(e){var t=this,r=!0;return e.forEach((function(n,o){var i=void 0;"repeat_password"===o&&(i=e.get("password"));var a=je(o,n,i),c=a.isValid,s=a.msg;if(!c)return r=!1,void t.view.showErrorMsg(o,s);t.view.hideErrorMsg(o)})),r}}])&&Ye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);var Qe=r(53),et=r.n(Qe),tt=r(9738),rt={};rt.styleTagTransform=h(),rt.setAttributes=u(),rt.insert=s().bind(null,"head"),rt.domAPI=a(),rt.insertStyleElement=f(),o()(tt.Z,rt),tt.Z&&tt.Z.locals&&tt.Z.locals;const nt={title:"",items:[{href:P,text:"Лента",icon:"../src/img/feed_icon.svg"},{href:j,text:"Профиль",icon:"../src/img/profile_icon.svg"},{href:L,text:"Сообщения",icon:"../src/img/messenger_icon.svg"},{href:C,text:"Друзья",icon:"../src/img/friends_icon.svg"},{href:R,text:"Сообщества",icon:"../src/img/groups_icon.svg"},{href:S,text:"Выйти",style:"menu__logout__link",icon:"../src/img/logout_icon.svg"}]};function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ot(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ot(o)?o:String(o)),n)}var o}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function ct(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}var lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=st(n);if(o){var r=st(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ct(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,et()(nt),".menu-left")}return t=a,(r=[{key:"changeActiveMenuItem",value:function(e){var t,r;null===(t=this.element.querySelector('[href="'.concat(this.currentActiveItem,'"]')))||void 0===t||t.classList.remove("menu-left-item--active"),this.currentActiveItem=e,null===(r=this.element.querySelector('[href="'.concat(e,'"]')))||void 0===r||r.classList.add("menu-left-item--active")}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e)}}])&&it(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const ut=lt;function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==dt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===dt(o)?o:String(o)),n)}var o}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function ht(e,t){if(t&&("object"===dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mt(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}const yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(n);if(o){var r=vt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ht(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e,null),N.subscribe("unmount-all",t.unmountComponent.bind(mt(t))),N.subscribe("redirect",t.handleRedirect.bind(mt(t))),t.view.bindClick(t.handleClick.bind(mt(t))),t}return t=a,(r=[{key:"handleRedirect",value:function(e){this.view.changeActiveMenuItem(e)}},{key:"handleClick",value:function(e){if(e.preventDefault(),this.isMounted){var t,r=null===(t=e.target.closest(".menu-left-item"))||void 0===t?void 0:t.getAttribute("href");if(!r)return;_.goToPath(r)}}}])&&ft(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);var bt=r(7498),gt=r.n(bt),wt=r(3780),_t={};_t.styleTagTransform=h(),_t.setAttributes=u(),_t.insert=s().bind(null,"head"),_t.domAPI=a(),_t.insertStyleElement=f(),o()(wt.Z,_t),wt.Z&&wt.Z.locals&&wt.Z.locals;var xt=r(9703),kt=r.n(xt),Ot=r(6895),Pt={};Pt.styleTagTransform=h(),Pt.setAttributes=u(),Pt.insert=s().bind(null,"head"),Pt.domAPI=a(),Pt.insertStyleElement=f(),o()(Ot.Z,Pt),Ot.Z&&Ot.Z.locals&&Ot.Z.locals;var jt=r(6958),St=r.n(jt),Et=r(8422),Ct={};Ct.styleTagTransform=h(),Ct.setAttributes=u(),Ct.insert=s().bind(null,"head"),Ct.domAPI=a(),Ct.insertStyleElement=f(),o()(Et.Z,Ct),Et.Z&&Et.Z.locals&&Et.Z.locals;var Tt=r(2923),Lt=r.n(Tt),Mt=r(4678),Rt={};Rt.styleTagTransform=h(),Rt.setAttributes=u(),Rt.insert=s().bind(null,"head"),Rt.domAPI=a(),Rt.insertStyleElement=f(),o()(Mt.Z,Rt),Mt.Z&&Mt.Z.locals&&Mt.Z.locals;var It=r(2837),Ft=r.n(It),Zt=r(2866),At={};At.styleTagTransform=h(),At.setAttributes=u(),At.insert=s().bind(null,"head"),At.domAPI=a(),At.insertStyleElement=f(),o()(Zt.Z,At),Zt.Z&&Zt.Z.locals&&Zt.Z.locals;var Nt=r(8069),Dt=r.n(Nt),Bt=r(6305),qt={};qt.styleTagTransform=h(),qt.setAttributes=u(),qt.insert=s().bind(null,"head"),qt.domAPI=a(),qt.insertStyleElement=f(),o()(Bt.Z,qt),Bt.Z&&Bt.Z.locals&&Bt.Z.locals;var Ut=r(2129),Ht=r.n(Ut),Gt=r(2933),zt={};zt.styleTagTransform=h(),zt.setAttributes=u(),zt.insert=s().bind(null,"head"),zt.domAPI=a(),zt.insertStyleElement=f(),o()(Gt.Z,zt),Gt.Z&&Gt.Z.locals&&Gt.Z.locals;var Vt=r(1512),Yt=r.n(Vt),Jt=r(9312),Wt={};function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==$t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===$t(o)?o:String(o)),n)}var o}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}function Qt(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return er(e)}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e){return tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tr(e)}Wt.styleTagTransform=h(),Wt.setAttributes=u(),Wt.insert=s().bind(null,"head"),Wt.domAPI=a(),Wt.insertStyleElement=f(),o()(Jt.Z,Wt),Jt.Z&&Jt.Z.locals&&Jt.Z.locals;var rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tr(n);if(o){var r=tr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,Ft()({}),".feed")).navbar=t.element.querySelector(".feed__navbar"),t.cards=t.element.querySelector(".feed__cards"),t.overlay=t.element.querySelector(".feed__overlay"),new MutationObserver(t.checkFeedCards.bind(er(t))).observe(t.cards,{childList:!0}),t.currentOpenedCommentId=-1,t}return t=a,(r=[{key:"checkFeedCards",value:function(){var e,t;this.cards.querySelector(".feed-card")?null===(e=this.element.querySelector(".feed-mock"))||void 0===e||e.classList.add("feed--hide"):null===(t=this.element.querySelector(".feed-mock"))||void 0===t||t.classList.remove("feed--hide")}},{key:"bindScrollEvent",value:function(e){this.cards.addEventListener("scroll",e.bind(this))}},{key:"bindResizeEvent",value:function(e){this.cards.addEventListener("resize",e.bind(this))}},{key:"bindClickEvent",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"bindKeyClick",value:function(e){this.element.addEventListener("keydown",e.bind(this))}},{key:"clearFeed",value:function(){this.cards.innerHTML=""}},{key:"getEditedPostData",value:function(){var e=this.overlay.querySelector(".feed-card-create");if(!e)throw new Error("cant get feed card creation form");var t=null==e?void 0:e.id,r=e.querySelector(".feed-card-create__text").value,n=null==e?void 0:e.dataset.community_id;return{id:Number(t),message:r,community_id:n?Number(n):0,attachments:[]}}},{key:"getNewPostData",value:function(){var e=this.overlay.querySelector(".feed-card-create");if(!e)return{text:"",community_id:void 0};var t=e.querySelector(".feed-card-create__text").value,r=e.dataset.community_id;return{text:t,community_id:r?Number(r):void 0}}},{key:"pushContentToFeed",value:function(e,t){var r=this,n=function(e){var n="liked"===e.isLiked&&Object.assign(e,{isLikedIcon:!0});n=t!==e.author.id?e:Object.assign(e,{showTools:!0});var o=gt()(n);r.cards.innerHTML+=o};Array.isArray(e)?e.forEach((function(e){return n(e)})):n(e)}},{key:"pushContentToFeedUp",value:function(e,t){var r=this,n=function(e){var n="liked"===e.isLiked&&Object.assign(e,{isLikedIcon:!0});n=t!==e.author.id?e:Object.assign(e,{showTools:!0});var o=gt()(n);r.cards.innerHTML=o+r.cards.innerHTML};Array.isArray(e)?e.forEach((function(e){return n(e)})):n(e)}},{key:"deletePost",value:function(e){var t=this.cards.querySelector('[data-feed_card_id="'.concat(e,'"]'));t&&(this.hideCommentsForFeedCard(e),this.cards.removeChild(t))}},{key:"changePost",value:function(e){var t=this.cards.querySelector('[data-feed_card_id="'.concat(e.id,'"]'));if(t){var r=(new DOMParser).parseFromString(gt()(Object.assign(e,{showTools:!0,isLiked:e.isLiked,isLikedIcon:e.isLiked})),"text/html").querySelector(".feed-card");r&&(this.cards.insertBefore(r,t),this.cards.removeChild(t))}}},{key:"showFeedCardCreation",value:function(e,t,r,n){var o=St()();this.overlay.innerHTML=kt()({user:e,data:r,community_id:n,smiles:o}),this.overlay.style.visibility="visible";var i=this.overlay.querySelector(".feed-card-create__attachments");i&&i.appendChild(t)}},{key:"hideFeedCardCreation",value:function(){this.overlay.innerHTML="",this.overlay.style.visibility="collapse"}},{key:"showNavbar",value:function(e){this.navbar.innerHTML=Lt()({showCreationButton:e}),this.navbar.style.visibility="visible"}},{key:"hideNavbar",value:function(){this.navbar.style.visibility="collapse"}},{key:"pushCommentToFeedCard",value:function(e,t,r){var n=this.cards.querySelector('.comment-section[data-feed_card_id="'.concat(e,'"] .comment-section__comments'));n&&(n.innerHTML+=Ht()(Object.assign(r,{showTools:r.user_id===t})))}},{key:"showCommentsForFeedCard",value:function(e,t,r){var n,o=this;if(this.cards.querySelector('.comment-section[data-feed_card_id="'.concat(e,'"]')))this.hideCommentsForFeedCard(e);else{var i=document.createElement("template");i.innerHTML=Dt()({postId:e});var a=i.content.querySelector(".comment-section");if(a){var c=a.querySelector(".comment-section__creation");if(c){c.innerHTML=Yt()({postId:e,comment:void 0});var s=this.cards.querySelector('[data-feed_card_id="'.concat(e,'"]'));s&&(this.hideCommentsForFeedCard(this.currentOpenedCommentId),null===(n=s.parentNode)||void 0===n||n.insertBefore(a,s.nextSibling),r.forEach((function(r){o.pushCommentToFeedCard(e,t,r)})),this.currentOpenedCommentId=e)}}}}},{key:"changeEditedComment",value:function(e,t){var r=this.cards.querySelector('.comment-section[data-feed_card_id="'.concat(t.post_id,'"] .comment-section__comment'));if(r){var n=r.querySelector('.comment[data-post_id="'.concat(t.post_id,'" data-id="').concat(t.id,"]"));if(n){this.currentOpenedCommentId=t.post_id;var o=document.createElement("template");o.innerHTML=Ht()(Object.assign(t,{showTools:t.user_id===e}));var i=o.querySelector(".comment");i&&(r.insertBefore(i,n),r.removeChild(n))}}}},{key:"editComment",value:function(e){var t,r=this.cards.querySelector('.comment[data-id="'.concat(e,'"]'));if(r){var n=r.dataset.post_id;if(n){var o=r.querySelector(".comment__content").innerText,i=null===(t=r.closest(".comment-section"))||void 0===t?void 0:t.querySelector(".comment-section__creation");if(i){var a=i.querySelector(".comment-create");if(a){var c=(new DOMParser).parseFromString(Yt()({postId:n,comment:{text:o,id:e}}),"text/html").querySelector(".comment-create");c?(i.insertBefore(c,a),i.removeChild(a)):console.log("no new cr form")}else console.log("no old cr form")}else console.log("no form cont")}else console.log("no post id")}else console.log("no comm")}},{key:"hideCommentsForFeedCard",value:function(e){var t=this.cards.querySelector('.comment-section[data-feed_card_id="'.concat(e,'"]'));t&&this.cards.removeChild(t)}},{key:"getEditedCommentData",value:function(e){var t,r=this.cards.querySelector('.comment-create[data-post_id="'.concat(e,'"]')),n=r.querySelector("textarea").value,o=null!==(t=r.dataset.comment_id)&&void 0!==t?t:"0";return{post_id:Number(e),message:n,id:Number(o)}}},{key:"getNewCommentData",value:function(e){return this.cards.querySelector('.comment-create[data-post_id="'.concat(e,'"] textarea')).value}},{key:"clearCommentCreation",value:function(e){this.cards.querySelector('.comment-create[data-post_id="'.concat(e,'"] textarea')).value=""}},{key:"removeComment",value:function(e,t){var r=this.cards.querySelector('.comment-section[data-feed_card_id="'.concat(e,'"] .comment-section__comments')),n=r.querySelector('.comment[data-id="'.concat(t,'"][data-post_id="').concat(e,'"]'));n&&r.removeChild(n)}},{key:"showErrNewFeedTextEmpty",value:function(){var e;(null===(e=this.overlay.querySelector(".feed-card-create"))||void 0===e?void 0:e.querySelector(".feed-card-create__text")).classList.add("feed-card-create--err")}},{key:"hideErrNewFeedTextEmpty",value:function(){var e;(null===(e=this.overlay.querySelector(".feed-card-create"))||void 0===e?void 0:e.querySelector(".feed-card-create__text")).classList.remove("feed-card-create--err")}}])&&Kt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const nr=rr;var or={400:"Неверный запрос",401:"No Cookie",405:"Неверный HTTP метод",500:"Ошибка сервера"},ir="GET",ar="POST",cr="PUT",sr="DELETE";const lr={host:"https://writesend.online/api",api:{logout:{url:"/logout",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Успешно"},failure:or}},auth:{url:"/auth",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Успешно"},failure:or}},csrf:{url:"/create_csrf",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Успешно"},failure:or}},signin:{url:"/signin",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Авторизация успешна"},failure:{400:"Неверный запрос",401:"Неверный пароль",404:"Пользователь не найден",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},signup:{url:"/signup",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{201:"Регистрация успешна"},failure:{400:"Неверный запрос",405:"Неверный HTTP метод",409:"Данный email занят",500:"Ошибка сервера"}}},feed:{url:"/feed",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Получение постов успешно"},failure:{400:"Неверный запрос",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},image:{url:"/attachment/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Получение изображения успешно"},failure:{400:"Неверный запрос",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},imageUpload:{url:"/attachment/image/upload",method:ar,headers:{},statuses:{success:{200:"Картинка загружена"},failure:{401:"No cookie",400:"No csrf",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},fileUpload:{url:"/attachment/file/upload",method:ar,headers:{},statuses:{success:{200:"Картинка загружена"},failure:{401:"No cookie",400:"No csrf",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},post:{url:"/post/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Получение поста успешно"},failure:{405:"Неверный HTTP метод",500:"Ошибка сервера"}}},postCreate:{url:"/post/create",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Получение постов успешно"},failure:{405:"Неверный HTTP метод",500:"Ошибка сервера"}}},postEdit:{url:"/post/edit",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Обновление поста успешно"},failure:{401:"no cookie",403:"no csrf",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},postLike:{url:"/post/like/{:id}",method:cr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Лайк поста успешно"},failure:{401:"no cookie",403:"no csrf",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},postUnlike:{url:"/post/unlike/{:id}",method:cr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Анлайк поста успешно"},failure:{401:"no cookie",403:"no csrf",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},userPosts:{url:"/users/{:id}/posts",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Получение постов успешно"},failure:{401:"no cookie",403:"no csrf",404:"Пользователь не найден",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},userUpdate:{url:"/users/update",method:cr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Данные обновлены"},failure:{404:"Записи не найдены",405:"Неверный HTTP метод",500:"Ошибка сервера"}}},usersSearch:{url:"/users/search/{:name}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Пользователи найдены"},failure:or}},postDelete:{url:"/post/{:id}",method:sr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Удаление поста успешно"},failure:{405:"Неверный HTTP метод",500:"Ошибка сервера"}}},userProfile:{url:"/users/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Профиль получен"},failure:{400:"Неверный запрос",404:"Не найден",405:"Неверный метод",500:"Ошибка сервера"}}},userFriends:{url:"/friends/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Друзья пользователя получен"},failure:{400:"Неверный запрос",401:"Нет кук",403:"Нет csrf",404:"Пользователь не найден",405:"Неверный метод",500:"Ошибка сервера"}}},userCheckFriend:{url:"/friends/check/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Проверка прошла успешно"},failure:Object.assign({404:"Пользователь не найден"},or)}},addFriend:{url:"/friends/add/{:id}",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{201:"Друг добавлен"},failure:{400:"Неверный запрос",401:"Нет кук",403:"Нет csrf",404:"Пользователь не найден",405:"Неверный метод",409:"Уже в друзьях",500:"Ошибка сервера"}}},deleteFriend:{url:"/friends/delete/{:id}",method:sr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Друг Удалён"},failure:{400:"Неверный запрос",401:"Нет кук",403:"Нет csrf",404:"Нет в друзьях",405:"Неверный метод",500:"Ошибка сервера"}}},dialogs:{url:"/chat",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Список диалогов получен"},failure:{401:"Нет кук",405:"Неверный метод",500:"Ошибка сервера"}}},chat:{url:"/chat/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Список диалогов получен"},failure:{400:"Неверный запрос",401:"Нет кук",404:"Чат не найден",405:"Неверный метод",500:"Ошибка сервера"}}},chatSend:{url:"/chat/send_message",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Сообщение отправлено"},failure:{400:"Неверный запрос",401:"Нет кук",404:"Чат не найден",405:"Неверный метод",500:"Ошибка сервера"}}},checkChat:{url:"/chat/user/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Сообщение отправлено"},failure:{400:"Неверный запрос",401:"Нет кук",404:"Чат не найден",405:"Неверный метод",500:"Ошибка сервера"}}},initws:{url:"/ws/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{400:"Сообщение отправлено"},failure:{400:"Неверный запрос",401:"Нет кук",404:"Чат не найден",405:"Неверный метод",500:"Ошибка сервера"}}},communitiesAll:{url:"/communities",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Список сообществ получен"},failure:or}},communitiesCreate:{url:"/communities/create",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Сообщество создано"},failure:Object.assign({422:"unprocessable entity"},or)}},communitiesEdit:{url:"/communities/edit",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Сообщество изменено"},failure:Object.assign({422:"unprocessable entity"},or)}},communitiesGet:{url:"/communities/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Сообщество данные получены"},failure:or}},communitiesDelete:{url:"/communities/{:id}",method:sr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Сообщество удалено"},failure:Object.assign({404:"Сообщество не найдено"},or)}},communitiesPosts:{url:"/communities/{:id}/posts",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Записи сообщества получены"},failure:Object.assign({404:"Сообщество не найдено"},or)}},communitiesSearch:{url:"/communities/search?q={:name}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Пользователи найдены"},failure:Object.assign({404:"Сообщество не найдено"},or)}},getComments:{url:"/post/{:id}/comments",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Комментарии получены"},failure:Object.assign({404:"Комментарии не найдены"},or)}},deleteComment:{url:"/post/comment/{:id}",method:sr,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{204:"Комментарий удалён"},failure:Object.assign({404:"Комментарий не найден"},or)}},addComment:{url:"/post/comment/add",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Комментарий создан"},failure:or}},editComment:{url:"/post/comment/edit",method:ar,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Комментарий изменён"},failure:or}},stickers:{url:"/stickers",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Стикеры получены"},failure:or}},stickerById:{url:"/sticker/{:id}",method:ir,headers:{"Content-Type":"application/json;charset=utf-8"},statuses:{success:{200:"Стикер получен"},failure:or}}},default_img:"../src/img/default_avatar.png"},ur=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=void 0;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];r||(r=setTimeout((function(){e.apply(void 0,o),clearTimeout(r),r=void 0}),t))}};function dr(e){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function fr(){fr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==dr(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function pr(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function hr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){pr(i,n,o,a,c,"next",e)}function c(e){pr(i,n,o,a,c,"throw",e)}a(void 0)}))}}function mr(e,t){return vr.apply(this,arguments)}function vr(){return(vr=hr(fr().mark((function e(t,r){var n,o,i,a,c;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Headers(t.headers),"GET"===t.method){e.next=7;break}return e.next=4,fetch("".concat(lr.host).concat(lr.api.csrf.url),{method:lr.api.csrf.method,headers:new Headers(lr.api.csrf.headers),credentials:"include"});case 4:o=e.sent,null!==(i=o.headers.get("X-CSRF-Token"))&&n.append("X-CSRF-Token",i);case 7:return e.next=9,fetch("".concat(lr.host).concat(t.url),{method:t.method,headers:n,body:r,credentials:"include"});case 9:return a=e.sent,e.prev=10,e.next=13,a.json();case 13:c=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),c={};case 19:return e.abrupt("return",{status:a.status,parsedBody:c});case 20:case"end":return e.stop()}}),e,null,[[10,16]])})))).apply(this,arguments)}function yr(e,t){return br.apply(this,arguments)}function br(){return(br=hr(fr().mark((function e(t,r){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status.toString()in r.statuses.success)){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!(t.status.toString()in r.statuses.failure)){e.next=5;break}return n=t.status.toString(),e.abrupt("return",Promise.reject({msg:lr.api.signin.statuses.failure[n]}));case 5:return e.abrupt("return",Promise.reject({msg:"Неожиданная ошибка"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gr(e){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(e)}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==gr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===gr(o)?o:String(o)),n)}var o}function _r(e,t,r){return t&&wr(e.prototype,t),r&&wr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}const xr=_r((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Or(){Or=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==kr(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Pr(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function jr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Pr(i,n,o,a,c,"next",e)}function c(e){Pr(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==kr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===kr(o)?o:String(o)),n)}var o}function Er(e,t){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Er(e,t)}function Cr(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}const Lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Er(e,t)}(u,e);var t,r,n,o,i,a,c,s,l=(c=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tr(c);if(s){var r=Tr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Cr(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this)}return t=u,r=[{key:"uploadImage",value:(a=jr(Or().mark((function e(t){var r,n;return Or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.imageUpload,t);case 2:return r=e.sent,e.next=5,yr(r,lr.api.imageUpload);case 5:return n={id:r.parsedBody.body.id,src:lr.host+"".concat(lr.api.image.url.replace("{:id}",r.parsedBody.body.id)),type:"image"},e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}],n=[{key:"parseStickers",value:function(e){if(!e)return[];var t=[];return e.forEach((function(e){t.push({id:e.id,src:lr.host+"".concat(lr.api.stickerById.url.replace("{:id}",e.id)),type:"image"})})),t}},{key:"parseImages",value:function(e){if(!e)return[];var t=[];return e.forEach((function(e){t.push({id:e.id,src:lr.host+"".concat(lr.api.image.url.replace("{:id}",e.id)),type:"image"})})),t}},{key:"stickerById",value:(i=jr(Or().mark((function e(t){var r,n,o;return Or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign(lr.api.stickerById)).url=r.url.replace("{:id}",Number(t)),e.next=4,mr(lr.api.stickerById);case 4:return n=e.sent,e.next=7,yr(n,lr.api.stickerById);case 7:return o=u.parseStickers(n.parsedBody.body)[0],e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getStickers",value:(o=jr(Or().mark((function e(){var t,r;return Or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.stickers);case 2:return t=e.sent,e.next=5,yr(t,lr.api.stickers);case 5:return r=u.parseStickers(t.parsedBody.body),e.abrupt("return",Promise.resolve(r));case 7:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}],r&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(xr);function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Rr(){Rr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Mr(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Ir(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zr(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Ar(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Zr(i,n,o,a,c,"next",e)}function c(e){Zr(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Mr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Mr(o)?o:String(o)),n)}var o}function Br(e,t){return Br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Br(e,t)}function qr(e,t){if(t&&("object"===Mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ur(e)}const Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Br(e,t)}(s,e);var t,r,n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ur(i);if(a){var r=Ur(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qr(this,e)});function s(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Nr(this,s),(r=c.call(this,e,t)).autoUpload=n,r.imgsStore=new Map,r.virtInput=document.createElement("input"),r.virtInput.type="file",r.virtInput.accept="image/*",r.virtInput.onchange=function(){var e=r.virtInput.files;if(e){var t=URL.createObjectURL(e[0]);r.imgsStore.set(t,{file:e[0],uploaded:!1}),r.loadImagePreview(t),r.autoUpload&&r.uploadImage(t)}},r}return t=s,r=[{key:"uploadAll",value:(o=Ar(Rr().mark((function e(){var t,r,n,o,i;return Rr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Ir(this.imgsStore.keys()),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=16;break}return o=n.value,console.log("att to upload: ",o),e.next=9,this.uploadImage(o);case 9:if(i=e.sent){e.next=12;break}return e.abrupt("return",Promise.reject());case 12:console.log("att succ"),t.push(i);case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return e.abrupt("return",Promise.resolve(t));case 25:case"end":return e.stop()}}),e,this,[[2,18,21,24]])}))),function(){return o.apply(this,arguments)})},{key:"uploadImage",value:(n=Ar(Rr().mark((function e(t){var r,n,o;return Rr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.imgsStore.get(t),console.log("store: ",this.imgsStore),console.log("target",r),r&&!r.uploaded){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return(n=new FormData).append("Attachment",r.file),e.prev=7,e.next=10,this.model.uploadImage(n);case 10:return o=e.sent,r.uploaded=!0,this.onSucceccUpload(o),e.abrupt("return",Promise.resolve(o));case 16:return e.prev=16,e.t0=e.catch(7),this.onFailUpload(t),e.abrupt("return",Promise.reject());case 20:case 21:case"end":return e.stop()}}),e,this,[[7,16]])}))),function(e){return n.apply(this,arguments)})},{key:"removeOters",value:function(e){var t=this;this.imgsStore.forEach((function(r,n){n!==e&&t.remove(n)}))}},{key:"remove",value:function(e){URL.revokeObjectURL(e);var t=this.imgsStore.get(e);if(t&&this.virtInput.files){for(var r=new DataTransfer,n=0;n<=this.virtInput.files.length-1;n++)this.virtInput.files[n]!==t.file&&r.items.add(this.virtInput.files[n]);this.virtInput.files=r.files}this.imgsStore.delete(e),0===this.imgsStore.size&&this.loadImageMock()}},{key:"flush",value:function(){var e=this;this.imgsStore.forEach((function(t,r){e.remove(r)}))}},{key:"openFileDialog",value:function(){this.virtInput.dispatchEvent(new MouseEvent("click"))}}],r&&Dr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(ee);var Gr=r(7791),zr=r.n(Gr),Vr=r(6801),Yr={};Yr.styleTagTransform=h(),Yr.setAttributes=u(),Yr.insert=s().bind(null,"head"),Yr.domAPI=a(),Yr.insertStyleElement=f(),o()(Vr.Z,Yr),Vr.Z&&Vr.Z.locals&&Vr.Z.locals;var Jr=r(5095),Wr=r.n(Jr),$r=r(9680),Kr={};function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function Qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Xr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Xr(o)?o:String(o)),n)}var o}function en(e,t){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},en(e,t)}function tn(e,t){if(t&&("object"===Xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rn(e){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rn(e)}Kr.styleTagTransform=h(),Kr.setAttributes=u(),Kr.insert=s().bind(null,"head"),Kr.domAPI=a(),Kr.insertStyleElement=f(),o()($r.Z,Kr),$r.Z&&$r.Z.locals&&$r.Z.locals;var nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rn(n);if(o){var r=rn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return tn(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,zr()({}),".attachments-container")}return t=a,(r=[{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"getElement",value:function(){return this.element}},{key:"removePreview",value:function(e,t){var r;r=t?t.closest('.attachment[data-attachment_src="'.concat(e,'"]')):this.element.querySelector('.attachment[data-attachment_src="'.concat(e,'"]')),console.log(r),r&&this.element.removeChild(r)}},{key:"addPreview",value:function(e){this.element.innerHTML+=Wr()({src:e})}},{key:"clear",value:function(){this.element.innerHTML=""}}])&&Qr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const on=nn;function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function cn(){cn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==an(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ln(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==an(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===an(o)?o:String(o)),n)}var o}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dn(e,t)}function fn(e,t){if(t&&("object"===an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pn(e)}function pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hn(e){return hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hn(e)}const mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}(s,e);var t,r,n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hn(i);if(a){var r=hn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return fn(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=c.call(this,new on(document.createElement("template")),new Lr)).view.bindClick(e.handleClick.bind(pn(e))),e.attachmentsStore=new Map,e}return t=s,r=[{key:"handleClick",value:function(e){var t;e.preventDefault();var r=e.target,n=r.dataset.action,o=null===(t=r.closest(".attachment"))||void 0===t?void 0:t.dataset.attachment_src;switch(n){default:return;case"attachment__remove":return o?void this.removeAttachment(o,r):void console.log("Cant remove attachment, no scr url");case"attachment__add":return void this.addAttachment()}}},{key:"getElement",value:function(){return this.view.getElement()}},{key:"addAttachment",value:function(){this.openFileDialog()}},{key:"loadAttachmentsByID",value:function(e){this.loadAttachments(Lr.parseImages(JSON.stringify(e)))}},{key:"loadAttachments",value:function(e){var t=this;e.forEach((function(e){t.attachmentsStore.set(e.src,e),t.view.addPreview(e.src)}))}},{key:"removeAttachment",value:function(e,t){this.view.removePreview(e,t),this.attachmentsStore.has(e)?this.attachmentsStore.delete(e):this.remove(e)}},{key:"submitAttachments",value:(n=cn().mark((function e(){var t,r;return cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.attachmentsStore.values(),t=function(e){if(Array.isArray(e))return sn(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sn(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),console.log("has imgs: ",t),e.prev=2,e.next=5,this.uploadAll();case 5:r=e.sent,console.log("all new attachments uploaded"),this.flush(),t=t.concat(r),console.log("has imgs: ",t),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 16:return this.attachmentsStore.clear(),this.view.clear(),e.abrupt("return",Promise.resolve(t));case 19:case"end":return e.stop()}var n}),e,this,[[2,12]])})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){ln(i,r,o,a,c,"next",e)}function c(e){ln(i,r,o,a,c,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"loadImageMock",value:function(){console.log("mock")}},{key:"loadImagePreview",value:function(e){console.log("load preview"),this.view.addPreview(e)}},{key:"onFailUpload",value:function(e){console.log("cant upl att")}},{key:"onSucceccUpload",value:function(e){console.log("uploaded")}}],r&&un(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(Hr);function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function yn(){yn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==vn(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function bn(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function gn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){bn(i,n,o,a,c,"next",e)}function c(e){bn(i,n,o,a,c,"throw",e)}a(void 0)}))}}function wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==vn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===vn(o)?o:String(o)),n)}var o}function _n(e,t){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_n(e,t)}function xn(e,t){if(t&&("object"===vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kn(e)}function kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e){return On=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},On(e)}const Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_n(e,t)}(l,e);var t,r,n,o,i,a,c,s=(a=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=On(a);if(c){var r=On(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xn(this,e)});function l(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=s.call(this,e,t)).currentPage=0,r.feedType={},r.newPostAttachmentsController=new mn,r.view.bindScrollEvent(ur(r.handleScroll.bind(kn(r)),250)),r.view.bindResizeEvent(ur(r.handleScroll.bind(kn(r)),250)),r.view.bindClickEvent(r.handleClickOnFeed.bind(kn(r))),r.view.bindKeyClick(r.handleKeyClick.bind(kn(r))),N.subscribe("unmount-all",r.unmountComponent.bind(kn(r))),N.subscribe("user-changed",r.setCurrentUser.bind(kn(r))),r}return t=l,r=[{key:"setFeedContent",value:function(e){JSON.stringify(this.feedType)!==JSON.stringify(e)&&(this.feedType=e,this.view.clearFeed(),this.currentPage=0)}},{key:"openFeedCard",value:function(e){e&&this.model.getPost(e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"submitNewFeedCard",value:(i=gn(yn().mark((function e(){var t,r,n,o,i;return yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.view.getNewPostData(),e.next=3,this.newPostAttachmentsController.submitAttachments();case 3:if(n=e.sent,""!==r.text.replace("\n"," ").trim()){e.next=9;break}if(0!==n.length){e.next=8;break}return this.view.showErrNewFeedTextEmpty(),e.abrupt("return",Promise.reject("empty"));case 8:r.text=" ";case 9:return this.view.hideErrNewFeedTextEmpty(),o={attachments:n,message:r.text,community_id:null!==(t=r.community_id)&&void 0!==t?t:0},e.next=13,this.model.sendNewFeed(o);case 13:return i=e.sent,this.view.hideFeedCardCreation(),this.view.pushContentToFeedUp(i,this.user.id),e.abrupt("return",Promise.resolve());case 17:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"submitEditedFeedCard",value:(o=gn(yn().mark((function e(){var t,r=this;return yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=this.view.getEditedPostData()).message.replace("\n"," ").trim()){e.next=4;break}return this.view.showErrNewFeedTextEmpty(),e.abrupt("return");case 4:return this.view.hideErrNewFeedTextEmpty(),e.next=7,this.newPostAttachmentsController.submitAttachments();case 7:return t.attachments=e.sent,this.model.sendEditedFeed(t).then((function(e){r.view.hideFeedCardCreation(),r.view.changePost(e)})).catch((function(e){console.log(e)})),e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"deletePost",value:function(e){var t=this;this.model.deletePost(e).then((function(){t.view.deletePost(e),t.view.hideCommentsForFeedCard(e)})).catch((function(e){}))}},{key:"setCurrentUser",value:function(e){this.user=e}},{key:"getFeeds",value:(n=gn(yn().mark((function e(){var t,r;return yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=0,e.next=4,this.model.getFeeds(this.feedType).then((function(e){t=e,r=1})).catch((function(e){r=1}));case 4:return e.abrupt("return",{page:r,feeds:t,currentUserId:this.user.id});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"mountComponent",value:function(){var e=this;if(!this.isMounted){0==this.currentPage&&this.getFeeds().then((function(t){var r=t.page,n=t.feeds,o=t.currentUserId;e.view.pushContentToFeed(n,o),e.currentPage=r})),this.view.show();var t=!0;this.feedType.user&&this.feedType.user.id!==this.user.id&&(t=!1),this.view.showNavbar(t),this.isMounted=!0}}},{key:"unmountComponent",value:function(){this.isMounted&&(this.view.hide(),this.view.hideNavbar(),this.view.hideFeedCardCreation(),this.isMounted=!1)}},{key:"handleClickOnFeed",value:function(e){var t=this;if(e.preventDefault(),this.isMounted){var r,n,o,i=e.target;if(i.classList.contains("feed__overlay"))return void this.view.hideFeedCardCreation();var a=null===(r=i.closest("[data-action]"))||void 0===r?void 0:r.dataset.action;if(!a)return;var c=null===(n=i.closest("[data-feed_card_id"))||void 0===n?void 0:n.dataset.feed_card_id,s=null===(o=i.closest("[data-data]"))||void 0===o?void 0:o.dataset.data;switch(a){case"sumbit_edited_post":return void this.submitEditedFeedCard();case"sumbit_new_post":return void this.submitNewFeedCard().then((function(e){console.log("submitted",e)})).catch((function(e){console.log("err",e)}));case"submit_search":return;case"create_feed":var l,u;return this.newPostAttachmentsController.flush(),void this.view.showFeedCardCreation(this.user,this.newPostAttachmentsController.getElement(),void 0,null===(l=this.feedType)||void 0===l||null===(u=l.group)||void 0===u?void 0:u.id);case"close_overlay":return void this.view.hideFeedCardCreation();case"like":if(!c)return;var d=document.getElementById("feed-card-likes__count-".concat(c)),f=i;return i.classList.contains("feed-card__button__unliked")&&this.model.likePost(c).then((function(){f.src="../src/img/like_filled_icon.svg",i.classList.toggle("feed-card__button__liked"),i.classList.remove("feed-card__button__unliked"),null!==d&&(d.innerText=String(Number(d.innerText)+1))})),void(i.classList.contains("feed-card__button__liked")&&this.model.unlikePost(c).then((function(){f.src="../src/img/like_icon.svg",i.classList.toggle("feed-card__button__unliked"),i.classList.remove("feed-card__button__liked"),null!==d&&"0"!==d.innerText&&(d.innerText=String(Number(d.innerText)-1))})));case"edit":if(!c)return;return void this.model.getPost(c).then((function(e){t.newPostAttachmentsController.loadAttachments(e.attachments),t.view.showFeedCardCreation(t.user,t.newPostAttachmentsController.getElement(),e,e.community_id)})).catch((function(e){}));case"delete":if(!c)return;return void this.deletePost(c);case"profile_page":if(!s)return;var p=Object.assign({},lr.api.userProfile).url;return p=p.replace("{:id}",s.toString()),void _.goToPath(p);case"share":return;case"card_page":return void this.openFeedCard(c);case"comment":if(!c)return;return void this.openComments(c);case"send_comment":if(!c)return;return void this.sendNewComment(c);case"comment_delete":var h,m=null===(h=i.closest(".comment"))||void 0===h?void 0:h.dataset.id;if(!m||!c)return;return void this.deleteComment(c,m);case"comment_edit":var v;console.log("comment_edit");var y=null===(v=i.closest(".comment"))||void 0===v?void 0:v.dataset.id;if(console.log(c,y),!y||!c)return;return void this.editComment(y);case"submit_edited_comment":if(console.log("submit_edited_comment"),!c)return;return void this.sendEditedComment(c);case"add_image":return void this.newPostAttachmentsController.addAttachment();case"smile":var b=document.getElementsByClassName("feed-card-create")[0];if(null!=b){var g=b.querySelector("textarea");null!=g&&(g.value+=i.innerText)}else{var w=document.querySelector("textarea");null!=w&&(w.value+=i.innerText)}default:return}}}},{key:"editComment",value:function(e){this.view.editComment(e)}},{key:"handleKeyClick",value:function(e){var t=this,r=document.getElementsByClassName("feed-card-create")[0];if("Enter"===e.key&&e.ctrlKey)if(e.preventDefault(),null!=r){var n=r.querySelector("textarea");null!=n&&(n.value+="\n")}else{var o=document.querySelector("textarea");null!=o&&(o.value+="\n")}else if("Enter"===e.key)if(e.preventDefault(),null!=r)r.querySelector('[data-action="sumbit_edited_post"]')?this.submitEditedFeedCard():this.submitNewFeedCard().then((function(e){console.log("submitted",e)})).catch((function(e){console.log("err",e)}));else{var i,a=document.querySelector("textarea");if(null==a)return;var c=null===(i=a.closest("[data-feed_card_id"))||void 0===i?void 0:i.dataset.feed_card_id;if(!c)return;var s={message:this.view.getNewCommentData(c),post_id:Number(c)};this.model.addComment(c,s).then((function(e){console.log(e),t.view.pushCommentToFeedCard(c,t.user.id,e);var r=document.querySelector("textarea");null!==r&&(r.value="")})).catch((function(e){console.log(e)}))}else"Esc"!==e.key&&"Escape"!==e.key||this.view.hideFeedCardCreation()}},{key:"handleScroll",value:function(e){var t=this;this.isMounted&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.scrollHeight-e.scrollTop-e.clientHeight<t*e.clientHeight}(e.target,2)&&this.getFeeds().then((function(e){var r=e.page,n=e.feeds;t.view.pushContentToFeed(n,t.user.id),t.currentPage=r}))}},{key:"openPost",value:function(e){}},{key:"openComments",value:function(e){var t=this;this.model.getComments(e).then((function(r){t.view.showCommentsForFeedCard(e,t.user.id,r)})).catch((function(e){console.log(e)}))}},{key:"closeComments",value:function(e){}},{key:"deleteComment",value:function(e,t){var r=this;this.model.deleteComment(t).then((function(){r.view.removeComment(e,t)})).catch((function(e){console.log(e)}))}},{key:"sendEditedComment",value:function(e){var t=this,r=this.view.getEditedCommentData(e);this.model.editComment(r).then((function(e){console.log(e),t.view.changeEditedComment(t.user.id,e),t.view.clearCommentCreation(e.post_id)})).catch((function(e){console.log(e)}))}},{key:"sendNewComment",value:function(e){var t=this,r={message:this.view.getNewCommentData(e),post_id:Number(e)};this.model.addComment(r).then((function(r){console.log(r),t.view.pushCommentToFeedCard(e,t.user.id,r),t.view.clearCommentCreation(r.post_id)})).catch((function(e){console.log(e)}))}}],r&&wn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(ee);var jn=r(1987),Sn=r.n(jn),En=r(6861),Cn={};Cn.styleTagTransform=h(),Cn.setAttributes=u(),Cn.insert=s().bind(null,"head"),Cn.domAPI=a(),Cn.insertStyleElement=f(),o()(En.Z,Cn),En.Z&&En.Z.locals&&En.Z.locals;var Tn=r(4943),Ln=r.n(Tn),Mn=r(5177),Rn={};Rn.styleTagTransform=h(),Rn.setAttributes=u(),Rn.insert=s().bind(null,"head"),Rn.domAPI=a(),Rn.insertStyleElement=f(),o()(Mn.Z,Rn),Mn.Z&&Mn.Z.locals&&Mn.Z.locals;var In=r(532),Fn=r.n(In),Zn=r(5740),An={};An.styleTagTransform=h(),An.setAttributes=u(),An.insert=s().bind(null,"head"),An.domAPI=a(),An.insertStyleElement=f(),o()(Zn.Z,An),Zn.Z&&Zn.Z.locals&&Zn.Z.locals;var Nn={signinButton:{data:{href:"/signin",text:"Войти"},render:Ln()},signupButton:{data:{href:"/signup",text:"Зарегистрироваться"},render:Ln()},profile:{data:{href_profile:"/profile",href_settings:"/settings",settings_icon:"../src/img/settings_icon.svg",theme_icon:"../src/img/theme_icon.svg"},render:Fn()}};const Dn=new Map(Object.entries(Nn));function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Bn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Bn(o)?o:String(o)),n)}var o}function Un(e,t){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Un(e,t)}function Hn(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}var zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gn(n);if(o){var r=Gn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Hn(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,Sn()({}),".header-container")}return t=a,(r=[{key:"bindClickEvent",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"changeHeaderItem",value:function(e,t){var r=this.element.querySelector("#header__item");if(null!==r){var n=Dn.get(e);void 0!==n&&(r.innerHTML=n.render(Object.assign(n.data,t)))}}}])&&qn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const Vn=zn;function Yn(e){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(e)}function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Yn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Yn(o)?o:String(o)),n)}var o}function Wn(e,t){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wn(e,t)}function $n(e,t){if(t&&("object"===Yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kn(e)}function Kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}var Qn="ws-cur-theme",eo="dark-mode",to="light-mode";const ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xn(n);if(o){var r=Xn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $n(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,null)).view.bindClickEvent(t.handleClick.bind(Kn(t))),N.subscribe("unmount-all",t.unmountComponent.bind(Kn(t))),N.subscribe("user-changed",(function(e){e&&t.view.changeHeaderItem("profile",e),t.currentTheme=localStorage.getItem(Qn);var r=document.getElementById("root");t.currentTheme===eo&&null!==r&&r.classList.add(eo)})),N.subscribe("redirect-signin",(function(){t.view.changeHeaderItem("signupButton")})),N.subscribe("redirect-signup",(function(){t.view.changeHeaderItem("signinButton")})),t}return t=a,(r=[{key:"handleClick",value:function(e){if(e.preventDefault(),this.isMounted){var t,r=null===(t=e.target.closest("[href]"))||void 0===t?void 0:t.getAttribute("href");if(null!=r)_.goToPath(r);else if("change_theme"===e.target.dataset.action){var n=document.getElementById("root");void 0!==n&&null!=n&&(null===this.currentTheme||this.currentTheme===eo?(n.classList.remove(eo),this.currentTheme=to):this.currentTheme===to&&(n.classList.add(eo),this.currentTheme=eo),localStorage.setItem(Qn,this.currentTheme))}}}}])&&Jn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);var no=r(4608),oo=r.n(no),io=r(1358),ao={};ao.styleTagTransform=h(),ao.setAttributes=u(),ao.insert=s().bind(null,"head"),ao.domAPI=a(),ao.insertStyleElement=f(),o()(io.Z,ao),io.Z&&io.Z.locals&&io.Z.locals;const co={logo:{src:"../src/img/logo_footer.png"},contacts:[{id:"phone",text:"phone",href:"tel:555-555-5555",icon:{id:"phone-icon",src:"../src/img/phone_icon.svg"}}],company:{name:"TikTikAndVProd2022"}};function so(e){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(e)}function lo(e,t){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lo(e,t)}function uo(e,t){if(t&&("object"===so(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fo(e){return fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fo(e)}var po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fo(r);if(n){var o=fo(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return uo(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,oo()(co),".footer__container")}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(q);const ho=po;function mo(e){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(e)}function vo(e,t){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vo(e,t)}function yo(e,t){if(t&&("object"===mo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bo(e)}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},go(e)}const wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=go(r);if(n){var o=go(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return yo(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e,null),N.subscribe("unmount-all",t.unmountComponent.bind(bo(t))),t}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(ee);function _o(e){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(e)}function xo(){xo=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==_o(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function ko(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Oo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ko(i,n,o,a,c,"next",e)}function c(e){ko(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Po(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_o(o)?o:String(o)),n)}var o}function jo(e,t){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jo(e,t)}function So(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eo(e)}const Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jo(e,t)}(y,e);var t,r,n,o,i,a,c,s,l,u,d,f,p,h,m,v=(h=y,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eo(h);if(m){var r=Eo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return So(this,e)});function y(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(e=v.call(this)).currentUser=null,e}return t=y,r=[{key:"parseUser",value:function(e){return{first_name:e.first_name,last_name:e.last_name,nick_name:e.nick_name,email:e.email,id:e.id,avatar:0===e.avatar?lr.default_img:lr.host+"".concat(lr.api.image.url.replace("{:id}",e.avatar))}}},{key:"parseUsers",value:function(e){var t=this;return e.map((function(e){return t.parseUser(e)}))}},{key:"logoutUser",value:(p=Oo(xo().mark((function e(){var t;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.logout);case 2:return t=e.sent,e.next=5,yr(t,lr.api.logout);case 5:this.currentUser=null,N.emit("user-changed",this.currentUser),N.subscribe("user-update",this.updateUserData.bind(this));case 8:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"signInUser",value:(f=Oo(xo().mark((function e(t){var r,n;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.signin,JSON.stringify(t));case 2:return r=e.sent,e.prev=3,e.next=6,yr(r,lr.api.signin);case 6:n=this.parseUser(r.parsedBody.body),this.currentUser=n,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.currentUser=null;case 13:if(N.emit("user-changed",this.currentUser),null!==this.currentUser){e.next=16;break}return e.abrupt("return",Promise.reject(r.parsedBody.message));case 16:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return f.apply(this,arguments)})},{key:"signUpUser",value:(d=Oo(xo().mark((function e(t){var r,n;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.signup,JSON.stringify(t));case 2:return r=e.sent,e.prev=3,e.next=6,yr(r,lr.api.signup);case 6:n=this.parseUser(r.parsedBody.body),this.currentUser=n,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.currentUser=null;case 13:if(N.emit("user-changed",this.currentUser),null!==this.currentUser){e.next=16;break}return e.abrupt("return",Promise.reject(r.parsedBody.message));case 16:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return d.apply(this,arguments)})},{key:"getUser",value:(u=Oo(xo().mark((function e(t){var r,n,o;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.userProfile)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseUser(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getCurrentUser",value:function(){return this.currentUser}},{key:"authUserByCookie",value:(l=Oo(xo().mark((function e(){var t,r;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.auth);case 2:return t=e.sent,e.prev=3,e.next=6,yr(t,lr.api.auth);case 6:r=this.parseUser(t.parsedBody.body),this.currentUser=r,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),this.currentUser=null,e.abrupt("return",Promise.reject());case 14:N.emit("user-changed",this.currentUser);case 15:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return l.apply(this,arguments)})},{key:"getFriends",value:(s=Oo(xo().mark((function e(t){var r,n,o;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.userFriends)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseUsers(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"isFriend",value:(c=Oo(xo().mark((function e(t){var r,n,o,i;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=this.currentUser)||void 0===r?void 0:r.id){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return(n=Object.assign({},lr.api.userCheckFriend)).url=n.url.replace("{:id}",t.toString()),e.next=7,mr(n);case 7:return o=e.sent,e.next=10,yr(o,n);case 10:return i=Boolean(o.parsedBody.body),e.abrupt("return",Promise.resolve(i));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"addFriend",value:(a=Oo(xo().mark((function e(t){var r,n;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.addFriend)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"removeFriend",value:(i=Oo(xo().mark((function e(t){var r,n;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.deleteFriend)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"findUsers",value:(o=Oo(xo().mark((function e(t){var r,n,o;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.usersSearch)).url=r.url.replace("{:name}",t),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseUsers(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateUserData",value:(n=Oo(xo().mark((function e(t){var r,n;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.userUpdate,JSON.stringify(t));case 2:return r=e.sent,e.next=5,yr(r,lr.api.userUpdate);case 5:try{n=Object.assign({},this.currentUser),Object.keys(t).forEach((function(e){if("avatar"!==e)n[e]=t[e];else{var r,o=null!==(r=t[e])&&void 0!==r?r:0;n[e]=0===o?lr.default_img:lr.host+"".concat(lr.api.image.url.replace("{:id}",o.toString()))}})),this.currentUser=n,N.emit("user-changed",this.currentUser)}catch(e){console.log(e)}return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],r&&Po(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),y}(xr),To=function(e){var t=new Date(e),r=new Date,n=r.getFullYear()-t.getFullYear();if(0!==n){var o=n%10;if(10<=n&&n<=20||0===o||5<=o&&o<=9)return"".concat(n," лет назад");if(1==o)return"".concat(n," год назад");if(2<=o&&o<=4)return"".concat(n," года назад")}var i=r.getMonth()-t.getMonth();if(0!==i){var a=i%10;if(10<=i&&i<=20||0===a||5<=a&&a<=9)return"".concat(i," месяцев назад");if(1===a)return"месяц назад";if(2<=a&&a<=4)return"".concat(i," месяца назад")}var c=r.getDate()-t.getDate();if(0!==c){var s=c%10;if(10<=c&&c<=20||0===s||5<=s&&s<=9)return"".concat(c," дней назад");if(1===s)return"".concat(c," день назад");if(2<=s&&s<=4)return"".concat(c," дня назад")}return"сегодня в ".concat(t.getHours(),":").concat(t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes())};function Lo(e){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(e)}function Mo(){Mo=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Lo(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Ro(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Io(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ro(i,n,o,a,c,"next",e)}function c(e){Ro(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Lo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Lo(o)?o:String(o)),n)}var o}function Zo(e,t){return Zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zo(e,t)}function Ao(e,t){if(t&&("object"===Lo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function No(e){return No=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},No(e)}const Do=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zo(e,t)}(b,e);var t,r,n,o,i,a,c,s,l,u,d,f,p,h,m,v,y=(m=b,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=No(m);if(v){var r=No(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ao(this,e)});function b(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),y.call(this)}return t=b,r=[{key:"parseComment",value:function(e){return{avatar_id:0===e.avatar_id?lr.default_img:lr.host+"".concat(lr.api.image.url.replace("{:id}",e.avatar_id)),create_date:To(e.create_date),id:e.id,message:e.message,post_id:e.post_id,user_first_name:e.user_first_name,user_id:e.user_id,user_last_name:e.user_last_name}}},{key:"parseComments",value:function(e){var t=this;return e.map((function(e){return t.parseComment(e)}))}},{key:"parseFeedCard",value:function(e){return{id:e.id,author:{url:"",avatar:0===e.avatar_id?lr.default_img:lr.host+"".concat(lr.api.image.url.replace("{:id}",e.avatar_id)),first_name:e.user_first_name,last_name:e.user_last_name,id:e.user_id},date:To(e.create_date),text:e.message,likes:e.count_likes,isLiked:e.is_liked?"liked":"unliked",attachments:Lr.parseImages(e.attachments),community_id:e.community_id}}},{key:"parseFeedCards",value:function(e){var t=this;return e.map((function(e){return t.parseFeedCard(e)}))}},{key:"deletePost",value:(h=Io(Mo().mark((function e(t){var r,n;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.postDelete)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getPost",value:(p=Io(Mo().mark((function e(t){var r,n,o;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.post)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseFeedCard(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getUserPosts",value:(f=Io(Mo().mark((function e(t){var r,n,o;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.userPosts)).url=r.url.replace("{:id}",t),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseFeedCards(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"sendEditedFeed",value:(d=Io(Mo().mark((function e(t){var r,n;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.postEdit,JSON.stringify(t));case 2:return r=e.sent,e.next=5,yr(r,lr.api.postEdit);case 5:return n=this.parseFeedCard(r.parsedBody.body),e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"sendNewFeed",value:(u=Io(Mo().mark((function e(t){var r,n;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.postCreate,JSON.stringify(t));case 2:return r=e.sent,e.next=5,yr(r,lr.api.postCreate);case 5:return n=this.parseFeedCard(r.parsedBody.body),e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getFeeds",value:(l=Io(Mo().mark((function e(t){var r,n,o;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign({},lr.api.feed),t.user&&((r=Object.assign({},lr.api.userPosts)).url=r.url.replace("{:id}",t.user.id.toString())),t.group&&((r=Object.assign({},lr.api.communitiesPosts)).url=r.url.replace("{:id}",t.group.id.toString())),e.next=5,mr(r);case 5:return n=e.sent,e.next=8,yr(n,r);case 8:return o=this.parseFeedCards(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"likePost",value:(s=Io(Mo().mark((function e(t){var r,n;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deb testing"),(r=Object.assign({},lr.api.postLike)).url=r.url.replace("{:id}",t),e.next=5,mr(r);case 5:return n=e.sent,e.next=8,yr(n,r);case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"unlikePost",value:(c=Io(Mo().mark((function e(t){var r,n;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.postUnlike)).url=r.url.replace("{:id}",t),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"addComment",value:(a=Io(Mo().mark((function e(t){var r,n,o;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.addComment)).url=r.url.replace("{:id}",t.post_id.toString()),e.next=4,mr(r,JSON.stringify(t));case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseComment(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deleteComment",value:(i=Io(Mo().mark((function e(t){var r,n;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.deleteComment)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getComments",value:(o=Io(Mo().mark((function e(t){var r,n,o;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.getComments)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseComments(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"editComment",value:(n=Io(Mo().mark((function e(t){var r,n,o;return Mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.editComment)).url=r.url.replace("{:id}",t.post_id.toString()),e.next=4,mr(r,JSON.stringify(t));case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseComment(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],r&&Fo(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),b}(xr);function Bo(e){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bo(e)}function qo(){qo=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Bo(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Uo(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Ho(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Uo(i,n,o,a,c,"next",e)}function c(e){Uo(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Bo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Bo(o)?o:String(o)),n)}var o}function zo(e,t){return zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zo(e,t)}function Vo(e,t){if(t&&("object"===Bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yo(e){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yo(e)}const Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zo(e,t)}(f,e);var t,r,n,o,i,a,c,s,l,u,d=(l=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yo(l);if(u){var r=Yo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vo(this,e)});function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=d.call(this)).websockets=new Map,e}return t=f,r=[{key:"parseMessages",value:function(e){return e.map((function(e){return f.parseMessage(e)}))}},{key:"parseDialog",value:function(e){return{dialog_id:e.dialog_id,userId1:e.UserId1,userId2:e.UserId2,messages:e.messages?this.parseMessages(e.messages):void 0}}},{key:"parseDialogs",value:function(e){var t=this;return e.map((function(e){return t.parseDialog(e)}))}},{key:"getDialogs",value:(s=Ho(qo().mark((function e(){var t,r;return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.dialogs);case 2:return t=e.sent,e.next=5,yr(t,lr.api.dialogs);case 5:return r=this.parseDialogs(t.parsedBody.body),e.abrupt("return",Promise.resolve(r));case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getDialog",value:(c=Ho(qo().mark((function e(t){var r,n,o;return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.chat)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseDialog(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"createChatEventListener",value:(a=Ho(qo().mark((function e(t,r){var n,o,i;return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.websockets.has(t.toString())){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(window.WebSocket){e.next=5;break}return console.log("Websocket is not supported"),e.abrupt("return");case 5:return n="".concat(lr.host).replace("http://",""),(o=Object.assign({},lr.api.initws)).url=o.url.replace("{:id}",t.toString()),e.next=10,mr(o);case 10:e.sent,i=new WebSocket("ws://"+n+"/ws/"+t),r&&(r.onclose&&(i.onclose=function(e,t){var r=this;return this.chatId=e,this.callback=t,function(e){r.callback(r.chatId)}}(t,r.onclose)),r.onmessage&&(i.onmessage=function(e,t){var r=t;return function(e){try{var t=f.parseMessage(JSON.parse(e.data));r(t)}catch(e){console.log(e)}}}(0,r.onmessage))),this.removeChatEventListener(t),this.websockets.set(t.toString(),i);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeChatEventListener",value:function(e){var t;null===(t=this.websockets.get(e.toString()))||void 0===t||t.close(),this.websockets.delete(e.toString())}},{key:"initChat",value:(i=Ho(qo().mark((function e(t){var r,n;return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.chatSend,JSON.stringify(t));case 2:return r=e.sent,e.next=5,yr(r,lr.api.chatSend);case 5:return n=f.parseMessage(r.parsedBody.body),e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"sendMessage",value:function(e){var t=this.websockets.get(e.dialog_id.toString());t?(console.log("JSON msg: ",JSON.stringify(e)),t.send(JSON.stringify(e))):console.log("no ws for chat id=",e.dialog_id)}},{key:"checkChatExist",value:(o=Ho(qo().mark((function e(t){var r,n,o;return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.checkChat)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseDialog(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}],n=[{key:"parseMessage",value:function(e){return{id:e.id,body:e.body,created_at:To(e.created_at),dialog_id:e.dialog_id,receiver_id:e.receiver_id,sender_id:e.sender_id,attachments:Lr.parseImages(e.attachments),sticker:e.sticker}}}],r&&Go(t.prototype,r),n&&Go(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(xr);function Wo(e){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(e)}function $o(){$o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Wo(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Ko(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Wo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Wo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Wo(o)?o:String(o)),n)}var o}function Qo(e,t){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qo(e,t)}function ei(e,t){if(t&&("object"===Wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ti(e)}function ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ri(e){return ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ri(e)}const ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qo(e,t)}(s,e);var t,r,n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ri(i);if(a){var r=ri(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ei(this,e)});function s(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=c.call(this,e,t),N.subscribe("unmount-all",r.unmountComponent.bind(ti(r))),r.view.bindClick(r.handleClick.bind(ti(r))),r}return t=s,r=[{key:"changeProfileUser",value:(n=$o().mark((function e(t){var r,n,o;return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.model.getCurrentUser()){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.next=5,this.model.getUser(t);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return",Promise.reject());case 8:if(o=!1,n.id===r.id){e.next=13;break}return e.next=12,this.model.isFriend(t);case 12:o=e.sent;case 13:return this.view.redrawProfile(n,r,o),e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){Ko(i,r,o,a,c,"next",e)}function c(e){Ko(i,r,o,a,c,"throw",e)}a(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"handleClick",value:function(e){var t=this;if(e.preventDefault(),this.isMounted){var r,n,o,i=e.target,a=null===(r=i.closest("[data-action]"))||void 0===r?void 0:r.dataset.action,c=null===(n=i.closest(".profile"))||void 0===n||null===(o=n.querySelector(".profile-user"))||void 0===o?void 0:o.dataset.user_id;if(!c)return;switch(a){default:return;case"settings":return void _.goToPath(E);case"message":var s=Object.assign({},{url:M}).url;return s=s.replace("{:id}",c),void _.goToPath(s);case"add_to_friends":if(!c)return;return void this.model.addFriend(c).then((function(){t.changeProfileUser(c)})).catch((function(e){}));case"remove_friend":if(!c)return;return void this.model.removeFriend(c).then((function(){t.changeProfileUser(c)})).catch((function(e){}))}}}}],r&&Xo(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(ee);var oi=r(6523),ii=r.n(oi),ai=r(7486),ci={};ci.styleTagTransform=h(),ci.setAttributes=u(),ci.insert=s().bind(null,"head"),ci.domAPI=a(),ci.insertStyleElement=f(),o()(ai.Z,ci),ai.Z&&ai.Z.locals&&ai.Z.locals;var si=r(3003),li=r.n(si),ui=r(3391),di={};di.styleTagTransform=h(),di.setAttributes=u(),di.insert=s().bind(null,"head"),di.domAPI=a(),di.insertStyleElement=f(),o()(ui.Z,di),ui.Z&&ui.Z.locals&&ui.Z.locals;var fi=r(8419),pi=r.n(fi),hi=r(6336),mi={};function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==vi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===vi(o)?o:String(o)),n)}var o}function bi(e,t){return bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bi(e,t)}function gi(e,t){if(t&&("object"===vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wi(e){return wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wi(e)}mi.styleTagTransform=h(),mi.setAttributes=u(),mi.insert=s().bind(null,"head"),mi.domAPI=a(),mi.insertStyleElement=f(),o()(hi.Z,mi),hi.Z&&hi.Z.locals&&hi.Z.locals;var _i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bi(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wi(n);if(o){var r=wi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return gi(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,ii()({}),".profile")).user=t.element.querySelector(".profile__user"),t.navbar=t.element.querySelector(".profile__nav"),t}return t=a,(r=[{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"redrawProfile",value:function(e,t,r){var n={isCurrent:e.id===t.id,isFriend:r};this.user.innerHTML=pi()(e),this.navbar.innerHTML=li()({status:n})}}])&&yi(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const xi=_i;var ki=r(8939),Oi=r.n(ki),Pi=r(607),ji={};function Si(e){return Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Si(e)}function Ei(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Si(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Si(o)?o:String(o)),n)}var o}function Ci(e,t){return Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ci(e,t)}function Ti(e,t){if(t&&("object"===Si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Li(e){return Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(e)}ji.styleTagTransform=h(),ji.setAttributes=u(),ji.insert=s().bind(null,"head"),ji.domAPI=a(),ji.insertStyleElement=f(),o()(Pi.Z,ji),Pi.Z&&Pi.Z.locals&&Pi.Z.locals;const Mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ci(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Li(n);if(o){var r=Li(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ti(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,document.createElement("template"),Oi()({}),".avatar-upload__wrapper")).mock=e.element.querySelector(".avatar-upload-mock"),e.preview=e.element.querySelector(".avatar-upload__preview"),e.tools=e.element.querySelector(".avatar-upload__tools"),e}return t=a,(r=[{key:"getElement",value:function(){return this.element}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"showPreview",value:function(e){this.preview.src=e,this.preview.classList.remove("avatar-upload--hide")}},{key:"hidePreview",value:function(){this.preview.classList.add("avatar-upload--hide")}},{key:"showMock",value:function(){this.mock.classList.remove("avatar-upload--hide")}},{key:"hideMock",value:function(){this.mock.classList.add("avatar-upload--hide")}},{key:"showTools",value:function(){this.tools.classList.remove("avatar-upload--hide")}},{key:"hideTools",value:function(){this.tools.classList.add("avatar-upload--hide")}}])&&Ei(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);function Ri(e){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(e)}function Ii(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ri(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ri(o)?o:String(o)),n)}var o}function Fi(e,t){return Fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fi(e,t)}function Zi(e,t){if(t&&("object"===Ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ai(e)}function Ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ni(e){return Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ni(e)}const Di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fi(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ni(n);if(o){var r=Ni(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Zi(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,new Mi,new Lr)).userModel=e,N.subscribe("unmount-all",t.unmountComponent.bind(Ai(t))),t.view.bindClick(t.handleClick.bind(Ai(t))),t}return t=a,(r=[{key:"getElement",value:function(){return this.view.getElement()}},{key:"handleClick",value:function(e){var t,r,n,o=e.target,i=null===(t=o.closest("[data-action]"))||void 0===t?void 0:t.dataset.action,a=null===(r=o.closest(".avatar-upload"))||void 0===r||null===(n=r.querySelector(".avatar-upload__preview"))||void 0===n?void 0:n.src;switch(i){default:return;case"choose":return void this.openFileDialog();case"upload":if(!a)return;return void this.uploadImage(a);case"clear":this.flush(),this.view.hidePreview(),this.view.hideTools(),this.view.showMock()}}},{key:"loadImagePreview",value:function(e){this.view.hideMock(),this.view.showPreview(e),this.view.showTools(),this.removeOters(e)}},{key:"loadImageMock",value:function(){this.view.hidePreview(),this.view.showMock(),this.view.hideTools()}},{key:"onSucceccUpload",value:function(e){var t=this;this.userModel.updateUserData({avatar:Number(e.id)}).then((function(){t.loadImageMock()})).catch((function(e){}))}},{key:"onFailUpload",value:function(e){}}])&&Ii(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Hr);function Bi(e){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(e)}function qi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Bi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Bi(o)?o:String(o)),n)}var o}function Ui(e,t){return Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ui(e,t)}function Hi(e,t){if(t&&("object"===Bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gi(e)}function Gi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zi(e){return zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zi(e)}const Vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ui(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zi(n);if(o){var r=zi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Hi(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).avatarUploadController=new Di(r.model),r.view.bindClick(r.handleClick.bind(Gi(r))),N.subscribe("unmount-all",r.unmountComponent.bind(Gi(r))),r}return t=a,(r=[{key:"mountComponent",value:function(){if(!this.isMounted){var e=this.model.getCurrentUser();if(!e)return;console.log("mount"),this.view.show({user:e,avatarUploadElement:this.avatarUploadController.getElement()}),this.isMounted=!0}}},{key:"handleClick",value:function(e){if(this.isMounted){var t,r=e.target,n=null===(t=r.closest("[data-action]"))||void 0===t?void 0:t.dataset.action;if(!n)return;if("submit"!==n)return;var o=this.view.getDataFromGroup(r);if(!this.validateData(o))return;var i=Object.fromEntries(o);this.model.updateUserData(i).catch((function(e){}))}}},{key:"validateData",value:function(e){var t=this,r=!0;return e.forEach((function(n,o){var i=void 0;"repeat_password"===o&&(i=e.get("password"));var a=je(o,n,i),c=a.isValid,s=a.msg;if(!c)return r=!1,void t.view.showErrorMsg(o,s);t.view.hideErrorMsg(o)})),r}}])&&qi(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee),Yi={groups:[{inputs:[{title:"E-mail:",type:"email",id:"email"}]},{inputs:[{title:"Пароль:",type:"password",id:"password",placeholder:"*****"},{title:"Подтверждение пароля:",type:"password",id:"repeat_password",placeholder:"*****"}]},{inputs:[{title:"Ваше имя:",type:"text",id:"first_name"},{title:"Ваша фамилия:",type:"text",id:"last_name"},{title:"Псевдоним:",type:"text",id:"nick_name"}]}]};var Ji=r(4769),Wi=r.n(Ji),$i=r(7754),Ki={};Ki.styleTagTransform=h(),Ki.setAttributes=u(),Ki.insert=s().bind(null,"head"),Ki.domAPI=a(),Ki.insertStyleElement=f(),o()($i.Z,Ki),$i.Z&&$i.Z.locals&&$i.Z.locals;var Xi=r(6157),Qi=r.n(Xi),ea=r(561),ta={};function ra(e){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(e)}function na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ra(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ra(o)?o:String(o)),n)}var o}function oa(e,t){return oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oa(e,t)}function ia(e,t){if(t&&("object"===ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aa(e)}ta.styleTagTransform=h(),ta.setAttributes=u(),ta.insert=s().bind(null,"head"),ta.domAPI=a(),ta.insertStyleElement=f(),o()(ea.Z,ta),ea.Z&&ea.Z.locals&&ea.Z.locals;var ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oa(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=aa(n);if(o){var r=aa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ia(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,Wi()({}),".settings")}return t=a,(r=[{key:"show",value:function(e){if(e){this.element.innerHTML="";var t=document.createElement("template");t.innerHTML+=Qi()({data:e.user,config:Yi}),this.element.appendChild(e.avatarUploadElement),this.element.appendChild(t.content),this.parent.appendChild(this.element)}}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"getDataFromGroup",value:function(e){var t,r=new Map;return null===(t=e.closest(".settings-group"))||void 0===t||t.querySelectorAll("input").forEach((function(e){r.set(e.id,e.value)})),r}},{key:"showErrorMsg",value:function(e,t){var r,n=null===(r=this.element.querySelector("#"+e))||void 0===r?void 0:r.closest(".settings-input-with-title");n&&(n.classList.add("settings-input-with-title--error"),n.querySelector(".settings-input-with-title__error-msg").innerHTML=t)}},{key:"hideErrorMsg",value:function(e){var t,r=null===(t=this.element.querySelector("#"+e))||void 0===t?void 0:t.closest(".settings-input-with-title");r&&r.classList.remove("settings-input-with-title--error")}},{key:"getElement",value:function(){return this.element}}])&&na(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const sa=ca;var la=r(1371),ua=r.n(la),da=r(4411),fa={};fa.styleTagTransform=h(),fa.setAttributes=u(),fa.insert=s().bind(null,"head"),fa.domAPI=a(),fa.insertStyleElement=f(),o()(da.Z,fa),da.Z&&da.Z.locals&&da.Z.locals;var pa=r(6428),ha=r.n(pa),ma=r(2186),va={};va.styleTagTransform=h(),va.setAttributes=u(),va.insert=s().bind(null,"head"),va.domAPI=a(),va.insertStyleElement=f(),o()(ma.Z,va),ma.Z&&ma.Z.locals&&ma.Z.locals;var ya=r(8237),ba=r.n(ya),ga=r(3034),wa={};function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function xa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_a(o)?o:String(o)),n)}var o}function ka(e,t){return ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ka(e,t)}function Oa(e,t){if(t&&("object"===_a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pa(e)}function Pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ja(e){return ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ja(e)}wa.styleTagTransform=h(),wa.setAttributes=u(),wa.insert=s().bind(null,"head"),wa.domAPI=a(),wa.insertStyleElement=f(),o()(ga.Z,wa),ga.Z&&ga.Z.locals&&ga.Z.locals;var Sa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ka(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ja(n);if(o){var r=ja(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Oa(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,ua()({}),".friends")).friendList=t.element.querySelector(".friends__content"),t.frinedNavbar=t.element.querySelector(".friends__navbar"),t.frinedNavbar.innerHTML=ba()({}),new MutationObserver(t.checkFriends.bind(Pa(t))).observe(t.friendList,{childList:!0}),t}return t=a,(r=[{key:"checkFriends",value:function(){this.friendList.querySelector(".friend")?this.hideMock():this.showMock("Пользователи не найдены")}},{key:"bindSearchChange",value:function(e){var t;null===(t=this.frinedNavbar.querySelector("input"))||void 0===t||t.addEventListener("input",e.bind(this))}},{key:"changeUserFriendshipStatus",value:function(e,t){var r=this.friendList.querySelector('[id="'.concat(e.id,'"]'));if(r){var n=(new DOMParser).parseFromString(ha()(Object.assign(e,{isCurent:!1,isFriend:t})),"text/html").querySelector(".friend");n&&(this.friendList.insertBefore(n,r),this.friendList.removeChild(r))}}},{key:"showMock",value:function(e){var t=this.element.querySelector(".friend-mock");t&&(t.classList.remove("friends--hide"),t.querySelector(".friend-mock__text").innerText=e)}},{key:"hideMock",value:function(){var e=this.element.querySelector(".friend-mock");e&&e.classList.add("friends--hide")}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"clearList",value:function(){this.friendList.innerHTML=""}},{key:"clearInput",value:function(){var e=this.frinedNavbar.querySelector("input");null!=e&&(e.value="")}},{key:"fillList",value:function(e){var t=this;e.forEach((function(e){t.friendList.innerHTML+=ha()(e)}))}},{key:"getSearchData",value:function(){var e,t=null===(e=this.frinedNavbar.querySelector("input"))||void 0===e?void 0:e.value;return null!=t?t:""}}])&&xa(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const Ea=Sa;function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}function Ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ca(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ca(o)?o:String(o)),n)}var o}function La(e,t){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},La(e,t)}function Ma(e,t){if(t&&("object"===Ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ra(e)}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ia(e)}const Fa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&La(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ia(n);if(o){var r=Ia(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ma(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).ignoreSearch=!1,N.subscribe("unmount-all",r.unmountComponent.bind(Ra(r))),r.view.bindClick(r.handleClick.bind(Ra(r))),r.view.bindSearchChange(ur(r.handleSearchChange.bind(Ra(r)),1e3)),r}return t=a,(r=[{key:"handleSearchChange",value:function(e){var t=this.view.getSearchData();this.searchUsers(t)}},{key:"searchUsers",value:function(e){var t=this;if(e.length<1)return this.updateFriendsList(),void(this.ignoreSearch=!0);this.ignoreSearch=!1,this.model.findUsers(e).then((function(e){var r;if(!t.ignoreSearch){var n=null===(r=t.model.getCurrentUser())||void 0===r?void 0:r.id;n&&t.model.getFriends(n).then((function(r){e.forEach((function(e){e.isCurrent=e.id===n?1:0,e.isFriend=r.find((function(t){return t.id===e.id}))?1:0})),t.view.clearList(),t.view.fillList(e)}))}})).catch((function(e){console.log(e)}))}},{key:"handleClick",value:function(e){var t=this;if(e.preventDefault(),this.isMounted){var r,n,o=e.target,i=null===(r=o.closest("[data-action]"))||void 0===r?void 0:r.dataset.action,a=null===(n=o.closest(".friend"))||void 0===n?void 0:n.id;switch(i){default:return;case"profile":if(!a)return;var c="".concat(T);return c=c.replace("{:number}",a.toString()),void _.goToPath(c);case"add_friend":if(!a)return;return void this.model.addFriend(a).then((function(){t.updateFriendsList(a)})).catch((function(e){return console.log(e)}));case"remove_friend":if(!a)return;return void this.model.removeFriend(a).then((function(){t.updateFriendsList(a)})).catch((function(e){return console.log(e)}));case"message":if(!a)return;var s=Object.assign({},{url:M}).url;return s=s.replace("{:id}",a),void _.goToPath(s);case"submit_search":var l=this.view.getSearchData();return void this.searchUsers(l)}}}},{key:"updateFriendsList",value:function(e){var t,r=this;if(e)this.model.isFriend(e).then((function(t){r.model.getUser(e).then((function(e){r.view.changeUserFriendshipStatus(e,t)}))}));else{var n=null===(t=this.model.getCurrentUser())||void 0===t?void 0:t.id;n&&this.model.getFriends(n).then((function(e){e.forEach((function(e){e.isFriend=1,e.isCurrent=0})),r.view.clearList(),r.view.fillList(e)}))}}},{key:"mountComponent",value:function(){this.isMounted||(this.view.show(),this.isMounted=!0,this.updateFriendsList(),this.view.clearList(),this.view.clearInput())}},{key:"unmountComponent",value:function(){this.isMounted&&(this.view.hide(),this.isMounted=!1)}}])&&Ta(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function Aa(){Aa=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Za(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Na(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Da(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Na(i,n,o,a,c,"next",e)}function c(e){Na(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Za(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Za(o)?o:String(o)),n)}var o}function qa(e,t){return qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qa(e,t)}function Ua(e,t){if(t&&("object"===Za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ha(e)}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ga(e){return Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ga(e)}const za=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qa(e,t)}(s,e);var t,r,n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ga(i);if(a){var r=Ga(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ua(this,e)});function s(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=c.call(this,e,t)).view.bindClick(r.handleClick.bind(Ha(r))),N.subscribe("unmount-all",r.unmountComponent.bind(Ha(r))),r}return t=s,r=[{key:"handleClick",value:function(e){var t,r,n;e.preventDefault();var o=e.target,i=(null===(t=o.closest(".dialog"))||void 0===t||t.dataset.dialog_id,null===(r=o.closest(".dialog"))||void 0===r?void 0:r.dataset.user_id),a=null===(n=o.closest("[data-action]"))||void 0===n?void 0:n.dataset.action;if(i&&"open-dialog"===a){var c=Object.assign({},lr.api.chat).url;c=c.replace("{:id}",i.toString()),_.goToPath(c)}}},{key:"processData",value:(o=Da(Aa().mark((function e(t){var r,n,o,i,a;return Aa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],n=this.model.user.getCurrentUser()){e.next=4;break}return e.abrupt("return");case 4:o=0;case 5:if(!(o<t.length)){e.next=14;break}return i=t[o].userId1!==n.id?t[o].userId1:t[o].userId2,e.next=9,this.model.user.getUser(i);case 9:a=e.sent,r.push({dialog_id:t[o].dialog_id.toString(),user_id:a.id.toString(),user_first_name:a.first_name,user_last_name:a.last_name,user_avatar:a.avatar});case 11:o++,e.next=5;break;case 14:return e.abrupt("return",Promise.resolve(r));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateDialogs",value:(n=Da(Aa().mark((function e(){var t,r;return Aa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.messenger.getDialogs();case 2:return t=e.sent,e.next=5,this.processData(t);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return");case 8:this.view.pushDialogsToList(r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"mountComponent",value:function(){this.isMounted||(this.view.clearList(),this.view.show(),this.isMounted=!0)}}],r&&Ba(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(ee);var Va=r(8991),Ya=r.n(Va),Ja=r(8240),Wa={};Wa.styleTagTransform=h(),Wa.setAttributes=u(),Wa.insert=s().bind(null,"head"),Wa.domAPI=a(),Wa.insertStyleElement=f(),o()(Ja.Z,Wa),Ja.Z&&Ja.Z.locals&&Ja.Z.locals;var $a=r(9159),Ka=r.n($a),Xa=r(3935),Qa={};function ec(e){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(e)}function tc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ec(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ec(o)?o:String(o)),n)}var o}function rc(e,t){return rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rc(e,t)}function nc(e,t){if(t&&("object"===ec(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oc(e)}function oc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ic(e){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ic(e)}Qa.styleTagTransform=h(),Qa.setAttributes=u(),Qa.insert=s().bind(null,"head"),Qa.domAPI=a(),Qa.insertStyleElement=f(),o()(Xa.Z,Qa),Xa.Z&&Xa.Z.locals&&Xa.Z.locals;var ac=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ic(n);if(o){var r=ic(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return nc(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,Ya()({}),".messenger")).dialogsList=t.element.querySelector(".messenger__content"),t.frinedNavbar=t.element.querySelector(".messenger__navbar"),t.frinedNavbar.innerHTML=ba()({}),t.element.querySelector(".messenger__content")?(new MutationObserver(t.checkDialogs.bind(oc(t))).observe(t.dialogsList,{childList:!0}),t):nc(t)}return t=a,(r=[{key:"checkDialogs",value:function(){var e,t;console.log("dialogs changed",this.dialogsList.querySelector(".dialog")),this.dialogsList.querySelector(".dialog")?null===(e=this.element.querySelector(".messenger-mock"))||void 0===e||e.classList.add("messenger--hide"):null===(t=this.element.querySelector(".messenger-mock"))||void 0===t||t.classList.remove("messenger--hide")}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"pushDialogsToList",value:function(e){var t=this;e.forEach((function(e){t.dialogsList.innerHTML+=Ka()(e)}))}},{key:"clearList",value:function(){this.dialogsList.innerHTML=""}}])&&tc(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const cc=ac;var sc=r(1560),lc=r.n(sc),uc=r(6727),dc={};dc.styleTagTransform=h(),dc.setAttributes=u(),dc.insert=s().bind(null,"head"),dc.domAPI=a(),dc.insertStyleElement=f(),o()(uc.Z,dc),uc.Z&&uc.Z.locals&&uc.Z.locals;var fc=r(8256),pc=r.n(fc),hc=r(2526),mc={};mc.styleTagTransform=h(),mc.setAttributes=u(),mc.insert=s().bind(null,"head"),mc.domAPI=a(),mc.insertStyleElement=f(),o()(hc.Z,mc),hc.Z&&hc.Z.locals&&hc.Z.locals;var vc=r(7892),yc=r.n(vc),bc=r(7859),gc={};gc.styleTagTransform=h(),gc.setAttributes=u(),gc.insert=s().bind(null,"head"),gc.domAPI=a(),gc.insertStyleElement=f(),o()(bc.Z,gc),bc.Z&&bc.Z.locals&&bc.Z.locals;var wc=r(9913),_c=r.n(wc),xc=r(2106),kc={};kc.styleTagTransform=h(),kc.setAttributes=u(),kc.insert=s().bind(null,"head"),kc.domAPI=a(),kc.insertStyleElement=f(),o()(xc.Z,kc),xc.Z&&xc.Z.locals&&xc.Z.locals;var Oc=r(4490),Pc=r.n(Oc),jc=r(125),Sc={};function Ec(e){return Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(e)}function Cc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ec(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ec(o)?o:String(o)),n)}var o}function Tc(e,t){return Tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tc(e,t)}function Lc(e,t){if(t&&("object"===Ec(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mc(e){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mc(e)}Sc.styleTagTransform=h(),Sc.setAttributes=u(),Sc.insert=s().bind(null,"head"),Sc.domAPI=a(),Sc.insertStyleElement=f(),o()(jc.Z,Sc),jc.Z&&jc.Z.locals&&jc.Z.locals;var Rc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mc(n);if(o){var r=Mc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Lc(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,lc()({}),".chat")).messagesList=t.element.querySelector(".chat__content"),t.navbar=t.element.querySelector(".chat__navbar"),t.footer=t.element.querySelector(".chat__footer"),t}return t=a,(r=[{key:"updateStickers",value:function(e){}},{key:"show",value:function(e){var t=St()(),r=Pc()({stickers:null==e?void 0:e.stickers});if(this.footer.innerHTML=pc()({smiles:t,stickers:r}),this.parent.appendChild(this.element),e&&e.attachmets){var n=this.footer.querySelector(".message-create__attachments");if(!n)return;n.appendChild(e.attachmets)}}},{key:"bindKeyClick",value:function(e){this.element.addEventListener("keydown",e.bind(this))}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"pushMessages",value:function(e){var t=this;e.forEach((function(e){"0"!==e.msg.sticker.toString()?(e.msg=Object.assign(e.msg,{sticker_src:lr.host+"".concat(lr.api.stickerById.url.replace("{:id}",e.msg.sticker.toString()))}),t.pushSticker(e)):t.pushMessage(e)}))}},{key:"pushMessage",value:function(e){this.messagesList.innerHTML+=yc()(e),this.scrollToEnd()}},{key:"pushSticker",value:function(e){this.messagesList.innerHTML+=yc()(e),this.scrollToEnd()}},{key:"clearChat",value:function(){this.messagesList.innerHTML=""}},{key:"getNewMessage",value:function(){return this.footer.querySelector("textarea").value.trim()}},{key:"scrollToEnd",value:function(){this.messagesList.scrollTop=this.messagesList.scrollHeight-this.messagesList.clientHeight}},{key:"setNavbarData",value:function(e){this.navbar.innerHTML=_c()(e)}},{key:"clearNewMsgForm",value:function(){this.footer.querySelector("textarea").value=""}},{key:"showErrEmptyNewMessage",value:function(){this.footer.querySelector("textarea").classList.add("message-create--err")}},{key:"hideErrEmptyNewMessage",value:function(){this.footer.querySelector("textarea").classList.remove("message-create--err")}}])&&Cc(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const Ic=Rc;function Fc(e){return Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(e)}function Zc(){Zc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Fc(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Ac(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Nc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ac(i,n,o,a,c,"next",e)}function c(e){Ac(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Dc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Fc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Fc(o)?o:String(o)),n)}var o}function Bc(e,t){return Bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bc(e,t)}function qc(e,t){if(t&&("object"===Fc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uc(e)}function Uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hc(e){return Hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hc(e)}const Gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bc(e,t)}(d,e);var t,r,n,o,i,a,c,s,l,u=(s=d,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hc(s);if(l){var r=Hc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qc(this,e)});function d(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(r=u.call(this,e,t)).isEmptyChat=void 0,r.dialogId=void 0,r.userId=void 0,r.msgAttachments=new mn,r.stickers=void 0,r.view.bindClick(r.handleClick.bind(Uc(r))),r.view.bindKeyClick(r.handleKeyClick.bind(Uc(r))),N.subscribe("unmount-all",r.unmountComponent.bind(Uc(r))),r}return t=d,r=[{key:"updateStickers",value:(c=Nc(Zc().mark((function e(){var t;return Zc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr.getStickers();case 2:return t=e.sent,this.stickers=t,e.abrupt("return",Promise.resolve());case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"mountComponent",value:(a=Nc(Zc().mark((function e(t){var r=this;return Zc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return _.showUnknownPage(),e.abrupt("return");case 3:if(this.isMounted){e.next=20;break}if(this.view.clearChat(),this.stickers){e.next=8;break}return e.next=8,this.updateStickers();case 8:if(this.view.show({attachmets:this.msgAttachments.getElement(),stickers:this.stickers}),this.isMounted=!0,!t.byDialogId){e.next=15;break}return this.dialogId=t.byDialogId,this.setProfileData(),this.model.messenger.getDialog(this.dialogId).then((function(e){r.fillDialog(e),r.isEmptyChat=!1,r.model.messenger.createChatEventListener(e.dialog_id,{onmessage:r.handleMessages.bind(r)})})).catch((function(e){_.showUnknownPage()})),e.abrupt("return");case 15:if(!t.byUserId){e.next=20;break}return this.userId=t.byUserId,this.setProfileData(),this.model.messenger.checkChatExist(this.userId).then((function(e){console.log("exists"),r.isEmptyChat=!1,r.fillDialog(e),r.dialogId=e.dialog_id,r.model.messenger.createChatEventListener(e.dialog_id,{onmessage:r.handleMessages.bind(r)})})).catch((function(e){console.log("new"),r.isEmptyChat=!0})),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"unmountComponent",value:function(){this.isMounted&&(this.view.hide(),this.isMounted=!1,this.dialogId&&this.model.messenger.removeChatEventListener(this.dialogId),this.dialogId=void 0,this.isEmptyChat=void 0,this.userId=void 0)}},{key:"sendMessage",value:(i=Nc(Zc().mark((function e(){var t,r,n,o,i;return Zc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.view.getNewMessage(),e.next=3,this.msgAttachments.submitAttachments();case 3:if(o=e.sent,""!==n.replace("\n"," ").trim()){e.next=8;break}if(0!==o.length){e.next=7;break}return e.abrupt("return");case 7:n="";case 8:if(i={body:n,receiver_id:Number(this.userId),dialog_id:Number(this.dialogId),sender_id:null!==(t=null===(r=this.model.user.getCurrentUser())||void 0===r?void 0:r.id)&&void 0!==t?t:0,attachments:o},!this.isEmptyChat){e.next=12;break}return this.initNewDialog(i),e.abrupt("return");case 12:if(console.log("Dialog exists"),this.dialogId){e.next=15;break}return e.abrupt("return");case 15:if(this.userId){e.next=17;break}return e.abrupt("return");case 17:this.model.messenger.sendMessage(i),console.log("msg sended to ws"),this.view.clearNewMsgForm();case 20:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"initNewDialog",value:function(e){var t=this;this.model.messenger.initChat(e).then((function(e){console.log("inited new chat ",e),t.dialogId=e.dialog_id,t.isEmptyChat=!1,t.model.messenger.createChatEventListener(t.dialogId,{onmessage:t.handleMessages.bind(t)}),t.handleMessages(e),t.view.clearNewMsgForm()}))}},{key:"handleKeyClick",value:function(e){if("Enter"===e.key&&e.ctrlKey){e.preventDefault();var t=document.querySelector("textarea");null!=t&&(t.value+="\n")}else if("Enter"===e.key)return e.preventDefault(),void this.sendMessage()}},{key:"handleClick",value:function(e){var t;e.preventDefault();var r=e.target;switch(null===(t=r.closest("[data-action]"))||void 0===t?void 0:t.dataset.action){default:return;case"back":return void _.goToPath(L);case"user_profile":var n,o=null===(n=r.closest("[data-user_id]"))||void 0===n?void 0:n.dataset.user_id;if(!o)return;var i="".concat(T);return i=i.replace("{:number}",o),void _.goToPath(i);case"send":return void this.sendMessage();case"add_attachment":return void this.msgAttachments.addAttachment();case"smile":var a=document.querySelector("textarea");null!=a&&(a.value+=r.innerText);case"sticker_item":this.stickers||this.updateStickers().catch((function(e){console.log(e)}));var c=r.dataset.sticker_id;if(!c)return void console.log("no sticker");this.sendSticker(c)}}},{key:"sendSticker",value:function(e){var t,r,n={receiver_id:Number(this.userId),dialog_id:Number(this.dialogId),sender_id:null!==(t=null===(r=this.model.user.getCurrentUser())||void 0===r?void 0:r.id)&&void 0!==t?t:0,attachments:[],sticker:Number(e)};this.isEmptyChat?this.initNewDialog(n):(console.log("Dialog exists"),this.dialogId&&this.userId&&(this.model.messenger.sendMessage(n),console.log("msg sended to ws")))}},{key:"fillDialog",value:function(e){e.messages&&this.handleMessages(e.messages)}},{key:"setProfileData",value:(o=Nc(Zc().mark((function e(){var t,r,n,o,i,a,c;return Zc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.user.getUser(null!==(t=this.userId)&&void 0!==t?t:"-1");case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:c={avatar:null!==(r=a.avatar)&&void 0!==r?r:lr.default_img,first_name:null!==(n=a.first_name)&&void 0!==n?n:"Капи",last_name:null!==(o=a.last_name)&&void 0!==o?o:"Неопознаный",id:null!==(i=a.id)&&void 0!==i?i:""},this.view.setNavbarData(c);case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"handleMessages",value:(n=Nc(Zc().mark((function e(t){var r,n,o,i,a;return Zc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Array.isArray(t)||(t=[t]),r=[],n=0;case 3:if(!(n<t.length)){e.next=13;break}return o=t[n],e.next=7,this.model.user.getUser(o.sender_id);case 7:i=e.sent,a={msg:o,user:i},r.push(a);case 10:n++,e.next=3;break;case 13:this.view.pushMessages(r);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],r&&Dc(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(ee);var zc=r(8119),Vc=r.n(zc),Yc=r(8690),Jc={};Jc.styleTagTransform=h(),Jc.setAttributes=u(),Jc.insert=s().bind(null,"head"),Jc.domAPI=a(),Jc.insertStyleElement=f(),o()(Yc.Z,Jc),Yc.Z&&Yc.Z.locals&&Yc.Z.locals;var Wc=r(1604),$c=r.n(Wc),Kc=r(8987),Xc={};Xc.styleTagTransform=h(),Xc.setAttributes=u(),Xc.insert=s().bind(null,"head"),Xc.domAPI=a(),Xc.insertStyleElement=f(),o()(Kc.Z,Xc),Kc.Z&&Kc.Z.locals&&Kc.Z.locals;var Qc=r(9184),es=r.n(Qc),ts=r(5025),rs={};rs.styleTagTransform=h(),rs.setAttributes=u(),rs.insert=s().bind(null,"head"),rs.domAPI=a(),rs.insertStyleElement=f(),o()(ts.Z,rs),ts.Z&&ts.Z.locals&&ts.Z.locals;const ns={formId:"community-creation-form",formTitle:"Создание сообщества",inputs:[{title:"Название сообщества:",type:"text",id:"name",placeholder:"Клуб любителей пива"},{title:"Категория сообщества:",type:"text",id:"category",placeholder:"Кулинария"}],textareas:[{title:"Описание сообщества",name:"description",id:"description",rows:10,placeholder:"Помогаем выбрать вам..."}],submit:{id:"submit-form",text:"Создать"}};function os(e){return os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(e)}function is(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==os(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===os(o)?o:String(o)),n)}var o}function as(e,t){return as=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},as(e,t)}function cs(e,t){if(t&&("object"===os(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ss(e)}function ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ls(e){return ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ls(e)}var us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&as(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ls(n);if(o){var r=ls(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return cs(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,Vc()({}),".communities")).communitiesList=t.element.querySelector(".communities__list"),t.navbar=t.element.querySelector(".communities__navbar"),t.overlay=t.element.querySelector(".communities__overlay"),t.navbar.innerHTML=es()({}),new MutationObserver(t.checkFriends.bind(ss(t))).observe(t.communitiesList,{childList:!0}),t}return t=a,(r=[{key:"checkFriends",value:function(){var e,t;this.communitiesList.querySelector(".community-list-item")?null===(e=this.element.querySelector(".communities-mock"))||void 0===e||e.classList.add("communities--hide"):null===(t=this.element.querySelector(".communities-mock"))||void 0===t||t.classList.remove("communities--hide")}},{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"bindSearchChange",value:function(e){var t;null===(t=this.navbar.querySelector("input"))||void 0===t||t.addEventListener("input",e.bind(this))}},{key:"clearList",value:function(){this.communitiesList.innerHTML=""}},{key:"clearInput",value:function(){var e=this.navbar.querySelector("input");null!=e&&(e.value="")}},{key:"fillList",value:function(e){var t=this;e.forEach((function(e){t.communitiesList.innerHTML+=$c()(Object.assign(e,{isMember:!0}))}))}},{key:"showCommunityCreationForm",value:function(){this.overlay.innerHTML=se()(ns),this.overlay.classList.remove("communities--hide")}},{key:"hideCommunityCreationForm",value:function(){this.overlay.classList.add("communities--hide")}},{key:"showErrorMsg",value:function(e,t){var r,n=null===(r=this.element.querySelector("#"+e))||void 0===r?void 0:r.closest(".input-with-title");n&&(n.classList.add("input-with-title--error"),n.querySelector(".input-with-title__error-msg").innerHTML=t)}},{key:"hideErrorMsg",value:function(e){var t;console.log(e);var r=null===(t=this.element.querySelector("#"+e))||void 0===t?void 0:t.closest(".input-with-title");console.log(r),r&&r.classList.remove("input-with-title--error")}},{key:"getFormData",value:function(){var e=new Map;return this.overlay.querySelectorAll("input").forEach((function(t){e.set(t.id,t.value)})),this.overlay.querySelectorAll("textarea").forEach((function(t){e.set(t.id,t.value)})),e}},{key:"lockForm",value:function(){console.log(this.overlay.querySelector("fieldset")),this.overlay.querySelector("fieldset").disabled=!0}},{key:"unlockForm",value:function(){console.log(this.overlay.querySelector("fieldset")),this.overlay.querySelector("fieldset").disabled=!1}},{key:"getSearchData",value:function(){var e,t=null===(e=this.navbar.querySelector("input"))||void 0===e?void 0:e.value;return null!=t?t:""}}])&&is(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const ds=us;var fs=r(2424),ps=r.n(fs),hs=r(8201),ms={};ms.styleTagTransform=h(),ms.setAttributes=u(),ms.insert=s().bind(null,"head"),ms.domAPI=a(),ms.insertStyleElement=f(),o()(hs.Z,ms),hs.Z&&hs.Z.locals&&hs.Z.locals;var vs=r(5006),ys=r.n(vs),bs=r(5311),gs={};gs.styleTagTransform=h(),gs.setAttributes=u(),gs.insert=s().bind(null,"head"),gs.domAPI=a(),gs.insertStyleElement=f(),o()(bs.Z,gs),bs.Z&&bs.Z.locals&&bs.Z.locals;var ws=r(1362),_s=r.n(ws),xs=r(9149),ks={};ks.styleTagTransform=h(),ks.setAttributes=u(),ks.insert=s().bind(null,"head"),ks.domAPI=a(),ks.insertStyleElement=f(),o()(xs.Z,ks),xs.Z&&xs.Z.locals&&xs.Z.locals;const Os={groups:[{inputs:[{title:"Название сообщества:",type:"text",id:"name"}]},{textareas:[{title:"Описание сообщества",name:"description",id:"description",rows:10}]}]};function Ps(e){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function js(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ps(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ps(o)?o:String(o)),n)}var o}function Ss(e,t){return Ss=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ss(e,t)}function Es(e,t){if(t&&("object"===Ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cs(e){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cs(e)}var Ts=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ss(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cs(n);if(o){var r=Cs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Es(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e,ps()({}),".community")).data=t.element.querySelector(".community__data"),t.navbar=t.element.querySelector(".community__nav"),t.overlay=t.element.querySelector(".community__overlay"),t}return t=a,(r=[{key:"bindClick",value:function(e){this.element.addEventListener("click",e.bind(this))}},{key:"getDataFromGroup",value:function(e){var t,r,n=new Map;return null===(t=e.closest(".settings-group"))||void 0===t||t.querySelectorAll("input").forEach((function(e){n.set(e.id,e.value)})),null===(r=e.closest(".settings-group"))||void 0===r||r.querySelectorAll("textarea").forEach((function(e){n.set(e.id,e.value)})),n}},{key:"showErrorMsg",value:function(e,t){var r,n=null===(r=this.element.querySelector("#"+e))||void 0===r?void 0:r.closest(".settings-input-with-title");n&&(n.classList.add("settings-input-with-title--error"),n.querySelector(".settings-input-with-title__error-msg").innerHTML=t)}},{key:"hideErrorMsg",value:function(e){var t,r=null===(t=this.element.querySelector("#"+e))||void 0===t?void 0:t.closest(".settings-input-with-title");r&&r.classList.remove("settings-input-with-title--error")}},{key:"showOverlaySettings",value:function(e){this.overlay.innerHTML=Qi()({config:Os,data:e}),this.overlay.classList.remove("community--hidden")}},{key:"hideOverlay",value:function(){this.overlay.innerHTML="",this.overlay.classList.add("community--hidden")}},{key:"clear",value:function(){this.navbar.innerHTML="",this.data.innerHTML=""}},{key:"setCommunityData",value:function(e){this.data.innerHTML=_s()({data:e})}},{key:"setCommunityNavbar",value:function(e){this.navbar.innerHTML=ys()({status:e})}}])&&js(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const Ls=Ts;function Ms(e){return Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ms(e)}function Rs(){Rs=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var b=h.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=u(e[n],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Ms(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Is(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Fs(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Is(i,n,o,a,c,"next",e)}function c(e){Is(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Zs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ms(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ms(o)?o:String(o)),n)}var o}function As(e,t){return As=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},As(e,t)}function Ns(e,t){if(t&&("object"===Ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ds(e){return Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ds(e)}const Bs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&As(e,t)}(f,e);var t,r,n,o,i,a,c,s,l,u,d=(l=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ds(l);if(u){var r=Ds(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ns(this,e)});function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),d.call(this)}return t=f,r=[{key:"parseCommunity",value:function(e){return{avatar:0===e.avatar_id?lr.default_img:lr.host+"".concat(lr.api.image.url.replace("{:id}",e.avatar_id)),create_date:e.create_date,description:e.description,id:e.id,name:e.name,owner_id:e.owner_id}}},{key:"parseCommunities",value:function(e){var t=this;return e.map((function(e){return t.parseCommunity(e)}))}},{key:"create",value:(s=Fs(Rs().mark((function e(t){var r,n;return Rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.communitiesCreate,JSON.stringify(t));case 2:return r=e.sent,e.next=5,yr(r,lr.api.communitiesCreate);case 5:return n=this.parseCommunity(r.parsedBody.body),e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:(c=Fs(Rs().mark((function e(t){var r,n;return Rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=lr.api.communitiesDelete).url=r.url.replace("{:id}",t.toLocaleString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"edit",value:(a=Fs(Rs().mark((function e(t){var r,n;return Rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.communitiesEdit,JSON.stringify(t));case 2:return r=e.sent,e.next=5,yr(r,lr.api.communitiesEdit);case 5:return n=this.parseCommunity(r.parsedBody.body),e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getAll",value:(i=Fs(Rs().mark((function e(){var t,r;return Rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(lr.api.communitiesAll);case 2:return t=e.sent,e.next=5,yr(t,lr.api.communitiesAll);case 5:return r=this.parseCommunities(t.parsedBody.body),e.abrupt("return",Promise.resolve(r));case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"get",value:(o=Fs(Rs().mark((function e(t){var r,n,o;return Rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.communitiesGet)).url=r.url.replace("{:id}",t.toString()),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseCommunity(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"findCommunities",value:(n=Fs(Rs().mark((function e(t){var r,n,o;return Rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},lr.api.communitiesSearch)).url=r.url.replace("{:name}",t),e.next=4,mr(r);case 4:return n=e.sent,e.next=7,yr(n,r);case 7:return o=this.parseCommunities(n.parsedBody.body),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],r&&Zs(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(xr);function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function Us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qs(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===qs(o)?o:String(o)),n)}var o}function Hs(e,t){return Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hs(e,t)}function Gs(e,t){if(t&&("object"===qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zs(e)}function zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e){return Vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vs(e)}const Ys=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hs(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vs(n);if(o){var r=Vs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Gs(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,e,t),N.subscribe("unmount-all",r.unmountComponent.bind(zs(r))),r.view.bindClick(r.onClick.bind(zs(r))),r.view.bindSearchChange(ur(r.handleSearchChange.bind(zs(r)),1e3)),r}return t=a,(r=[{key:"handleSearchChange",value:function(e){var t=this.view.getSearchData().replace(/\s+/g," ").trim().replace(" ","+");this.searchCommunities(t)}},{key:"searchCommunities",value:function(e){var t=this;e.length<1?this.updateList():this.model.community.findCommunities(e).then((function(e){t.view.clearList(),t.view.fillList(e)})).catch((function(e){console.log(e)}))}},{key:"onClick",value:function(e){var t,r,n=this;e.preventDefault();var o=e.target,i=null===(t=o.closest(".community-list-item"))||void 0===t?void 0:t.id,a=null===(r=o.closest("[data-action]"))||void 0===r?void 0:r.dataset.action;if(o.classList.contains("communities__overlay"))this.view.hideCommunityCreationForm();else switch(a){default:case"join":case"left":return;case"community":if(!i)return;var c="".concat(I);return c=c.replace("{:id}",i.toString()),void _.goToPath(c);case"create_community":return this.view.showCommunityCreationForm(),void this.view.unlockForm();case"submit_form":var s,l,u=this.view.getFormData();if(!this.validateFormData(u))return void console.log("Settings: invalid data");var d={name:null!==(s=u.get("name"))&&void 0!==s?s:"",description:null!==(l=u.get("description"))&&void 0!==l?l:"",avatar_id:1};return this.view.lockForm(),void this.model.community.create(d).then((function(e){n.view.unlockForm(),n.view.hideCommunityCreationForm()})).catch((function(e){n.view.unlockForm(),console.log("err ",e)}));case"submit_search":var f=this.view.getSearchData().replace(/\s+/g," ").trim().replace(" ","+");if(f.length<1)return;return void this.model.community.findCommunities(f).then((function(e){n.view.clearList(),n.view.fillList(e)})).catch((function(e){console.log(e)}))}}},{key:"validateFormData",value:function(e){var t=this,r=!0;return e.forEach((function(e,n){var o=je(n,e,void 0),i=o.isValid,a=o.msg;if(!i)return r=!1,void t.view.showErrorMsg(n,a);t.view.hideErrorMsg(n)})),r}},{key:"updateList",value:function(){var e=this;this.model.community.getAll().then((function(t){e.view.clearList(),e.view.fillList(t)})).catch((function(e){console.log("Friends err: ",e)}))}},{key:"mountComponent",value:function(){this.isMounted||(this.view.show(),this.isMounted=!0,this.updateList(),this.view.clearInput())}}])&&Us(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);function Js(e){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(e)}function Ws(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Js(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Js(o)?o:String(o)),n)}var o}function $s(e,t){return $s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$s(e,t)}function Ks(e,t){if(t&&("object"===Js(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xs(e)}function Xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qs(e){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qs(e)}const el=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$s(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qs(n);if(o){var r=Qs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ks(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,e,t),N.subscribe("unmount-all",r.unmountComponent.bind(Xs(r))),r.view.bindClick(r.onClick.bind(Xs(r))),r}return t=a,(r=[{key:"mountComponent",value:function(e){var t=this;if(this.isMounted||(this.view.show(),this.isMounted=!0),e){var r=this.model.user.getCurrentUser();this.model.community.get(e).then((function(e){var n={isAdmin:!1,isMember:!1};r&&(n.isAdmin=e.owner_id===r.id),t.view.setCommunityData(e),t.view.setCommunityNavbar(n)})).catch((function(e){console.log(e)}))}}},{key:"validateData",value:function(e){var t=this,r=!0;return e.forEach((function(e,n){var o=je(n,e,void 0),i=o.isValid,a=o.msg;if(!i)return r=!1,void t.view.showErrorMsg(n,a);t.view.hideErrorMsg(n)})),r}},{key:"onClick",value:function(e){var t,r,n,o=this;e.preventDefault();var i=e.target,a=null===(t=i.closest(".community"))||void 0===t||null===(r=t.querySelector("[data-community_id]"))||void 0===r?void 0:r.dataset.community_id,c=null===(n=i.closest("[data-action]"))||void 0===n?void 0:n.dataset.action;if(i.classList.contains("community__overlay"))this.view.hideOverlay();else switch(c){default:case"join":case"left":return;case"settings":if(!a)return;return void this.model.community.get(a).then((function(e){o.view.showOverlaySettings(e)})).catch((function(e){console.log(e)}));case"submit":var s=this.view.getDataFromGroup(i);if(!this.validateData(s))return void console.log("comm Settings: invalid data");var l=Object.assign({id:Number(a)},Object.fromEntries(s));this.model.community.edit(l).then((function(e){o.view.setCommunityData(e),o.view.hideOverlay()})).catch((function(e){console.log(e," fail")}))}}}])&&Ws(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);var tl=r(6002),rl=r.n(tl),nl=r(4782),ol={};function il(e){return il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},il(e)}function al(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==il(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===il(o)?o:String(o)),n)}var o}function cl(e,t){return cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cl(e,t)}function sl(e,t){if(t&&("object"===il(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ll(e){return ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ll(e)}ol.styleTagTransform=h(),ol.setAttributes=u(),ol.insert=s().bind(null,"head"),ol.domAPI=a(),ol.insertStyleElement=f(),o()(nl.Z,ol),nl.Z&&nl.Z.locals&&nl.Z.locals;var ul=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cl(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ll(n);if(o){var r=ll(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sl(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,rl()({}),".about-ws")}return t=a,(r=[{key:"bindClick",value:function(e){this.element.addEventListener("click",e)}}])&&al(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q);const dl=ul;function fl(e){return fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fl(e)}function pl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==fl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==fl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===fl(o)?o:String(o)),n)}var o}function hl(e,t){return hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hl(e,t)}function ml(e,t){if(t&&("object"===fl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vl(e)}function vl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yl(e){return yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yl(e)}const bl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hl(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yl(n);if(o){var r=yl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ml(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e,null),N.subscribe("unmount-all",t.unmountComponent.bind(vl(t))),t.view.bindClick(t.handleClick.bind(vl(t))),t}return t=a,(r=[{key:"handleClick",value:function(e){if(e.preventDefault(),this.isMounted){var t=e.target.id;if(!t)return;switch(t){default:return;case"about-ws-block-link-signin":return void _.goToPath(k);case"about-ws-block-link-signup":return void _.goToPath(O)}}}}])&&pl(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ee);function gl(e){return gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gl(e)}function wl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==gl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===gl(o)?o:String(o)),n)}var o}var _l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initPage(),this.initViews(),this.initModels(),this.initControllers(),this.initRoutes()}var r,n;return r=e,(n=[{key:"run",value:function(e){_.start(e)}},{key:"handleRedirectToSignin",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){_.goToPath(P)})).catch((function(){N.emit("unmount-all"),N.emit("redirect",k),e.headerController.mountComponent(),e.footerController.mountComponent(),e.signinController.mountComponent(),e.headerView.changeHeaderItem("signupButton")}))}},{key:"handleRedirectToSignup",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){_.goToPath(P)})).catch((function(){N.emit("unmount-all"),N.emit("redirect",O),e.headerController.mountComponent(),e.footerController.mountComponent(),e.signupController.mountComponent(),e.headerView.changeHeaderItem("signinButton")}))}},{key:"handleRedirectToFeed",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){N.emit("unmount-all"),N.emit("redirect",P),e.headerController.mountComponent(),e.menuController.mountComponent(),e.feedController.setFeedContent({}),e.feedController.mountComponent()})).catch((function(){_.goToPath(F)}))}},{key:"handleLogout",value:function(){N.emit("redirect",S),this.userModel.logoutUser(),_.goToPath(k)}},{key:"handle404",value:function(){N.emit("unmount-all"),N.emit("redirect","404"),this.headerController.mountComponent(),this.footerController.mountComponent(),this.pageNotFoundController.mountComponent()}},{key:"handleProfile",value:function(e){var t=this;this.userModel.authUserByCookie().then((function(){var r,n;N.emit("unmount-all"),N.emit("redirect",j),t.headerController.mountComponent(),t.menuController.mountComponent(),t.profileController.mountComponent();var o=null!==(r=null===(n=t.userModel.getCurrentUser())||void 0===n?void 0:n.id)&&void 0!==r?r:-1;e&&e[0]&&(o=e[0]),o&&-1!==o&&t.profileController.changeProfileUser(o).then((function(){t.feedController.setFeedContent({user:{id:o}}),t.feedController.mountComponent()})).catch((function(){_.showUnknownPage()}))})).catch((function(){_.goToPath(k)}))}},{key:"handleSettings",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){N.emit("unmount-all"),N.emit("redirect",j),e.headerController.mountComponent(),e.menuController.mountComponent(),e.settingsController.mountComponent()})).catch((function(){_.goToPath(k)}))}},{key:"handleRedirectToFriends",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){N.emit("unmount-all"),N.emit("redirect",C),e.headerController.mountComponent(),e.menuController.mountComponent(),e.friendsController.mountComponent()})).catch((function(){_.goToPath(k)}))}},{key:"handleMessenger",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){N.emit("unmount-all"),N.emit("redirect",L),e.headerController.mountComponent(),e.menuController.mountComponent(),e.messengerController.mountComponent(),e.messengerController.updateDialogs()})).catch((function(e){e.status,e.body,_.goToPath(k)}))}},{key:"handleChat",value:function(e){var t=this;this.userModel.authUserByCookie().then((function(){if(N.emit("unmount-all"),N.emit("redirect",M),t.headerController.mountComponent(),t.menuController.mountComponent(),e&&e[0]){var r=e[0];t.chatController.mountComponent({byUserId:r.toString()})}else _.showUnknownPage()})).catch((function(){_.goToPath(k)}))}},{key:"handleCommunities",value:function(){var e=this;this.userModel.authUserByCookie().then((function(){N.emit("unmount-all"),N.emit("redirect",R),e.headerController.mountComponent(),e.menuController.mountComponent(),e.communityListController.mountComponent()})).catch((function(){_.goToPath(k)}))}},{key:"handleCommunityPage",value:function(e){var t=this;this.userModel.authUserByCookie().then((function(){if(N.emit("unmount-all"),N.emit("redirect",I),t.headerController.mountComponent(),t.menuController.mountComponent(),e&&e[0]){var r=e[0];t.communityController.mountComponent(r),t.feedController.setFeedContent({group:{id:r}}),t.feedController.mountComponent()}else _.showUnknownPage()})).catch((function(){_.goToPath(k)}))}},{key:"handleAboutWS",value:function(){N.emit("unmount-all"),N.emit("redirect",P),this.headerController.mountComponent(),this.headerView.changeHeaderItem("signupButton"),this.aboutWSController.mountComponent(),this.footerController.mountComponent()}},{key:"initPage",value:function(){document.body.innerHTML=t()({}),this.root=document.body.querySelector("#root"),this.header=document.body.querySelector("#header"),this.footer=document.body.querySelector("#footer"),this.leftSide=document.body.querySelector("#left-menu"),this.rightSide=document.body.querySelector("#right-menu"),this.content=document.body.querySelector("#main")}},{key:"initViews",value:function(){this.signinView=new xe(this.content),this.signupView=new ze(this.content),this.menuView=new ut(this.leftSide),this.feedView=new nr(this.content),this.headerView=new Vn(this.header),this.footerView=new ho(this.footer),this.pageNotFoundView=new K(this.content),this.profileView=new xi(this.content),this.settingsView=new sa(this.content),this.friendsView=new Ea(this.content),this.messengerView=new cc(this.content),this.chatView=new Ic(this.content),this.communityListView=new ds(this.content),this.communityView=new Ls(this.content),this.aboutWSView=new dl(this.content)}},{key:"initModels",value:function(){this.userModel=new Co,this.feedModel=new Do,this.messengerModel=new Jo,this.communityModel=new Bs}},{key:"initControllers",value:function(){this.signinController=new Re(this.signinView,this.userModel),this.signupController=new Xe(this.signupView,this.userModel),this.menuController=new yt(this.menuView),this.feedController=new Pn(this.feedView,this.feedModel),this.headerController=new ro(this.headerView),this.footerController=new wo(this.footerView),this.pageNotFoundController=new ae(this.pageNotFoundView),this.profileController=new ni(this.profileView,this.userModel),this.settingsController=new Vi(this.settingsView,this.userModel),this.friendsController=new Fa(this.friendsView,this.userModel),this.messengerController=new za(this.messengerView,{user:this.userModel,messenger:this.messengerModel}),this.chatController=new Gc(this.chatView,{user:this.userModel,messenger:this.messengerModel}),this.communityListController=new Ys(this.communityListView,{community:this.communityModel,user:this.userModel}),this.communityController=new el(this.communityView,{community:this.communityModel,user:this.userModel}),this.aboutWSController=new bl(this.aboutWSView)}},{key:"initRoutes",value:function(){_.setUnknownPageHandler(this.handle404.bind(this)),_.addRule(k,this.handleRedirectToSignin.bind(this)),_.addRule(O,this.handleRedirectToSignup.bind(this)),_.addRule(P,this.handleRedirectToFeed.bind(this)),_.addRule(S,this.handleLogout.bind(this)),_.addRule(x,this.handleRedirectToFeed.bind(this)),_.addRule(j,this.handleProfile.bind(this)),_.addRule(E,this.handleSettings.bind(this)),_.addRule(C,this.handleRedirectToFriends.bind(this)),_.addRule(T,this.handleProfile.bind(this)),_.addRule(L,this.handleMessenger.bind(this)),_.addRule(M,this.handleChat.bind(this)),_.addRule(R,this.handleCommunities.bind(this)),_.addRule(I,this.handleCommunityPage.bind(this)),_.addRule(F,this.handleAboutWS.bind(this))}}])&&wl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();(new _l).run(location.pathname)})()})();