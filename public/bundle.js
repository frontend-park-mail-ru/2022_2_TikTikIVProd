(()=>{"use strict";var e={22:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(81),o=n.n(r),i=n(645),s=n.n(i),a=n(277),d=n(833),l=n(917),c=n(771),p=n(633),u=n(570),h=s()(o());h.i(a.Z),h.i(d.Z),h.i(l.Z),h.i(c.Z),h.i(p.Z),h.i(u.Z),h.push([e.id,"body {\n    font-family: Helvetica, Arial, sans-serif;\n    padding: 0;\n    border: 0;\n    margin: 0;\n    height: 100%;\n}\n\n:root {\n    --color-root-background: #F0F2F5;\n\n    --color-footer-background: #EAECF0;\n    --color-footer-text: #B5B5B5;\n\n    --color-form-title: #6F6F6F;\n    --color-form-background: #FFFFFF;\n    --color-form-border: #EBEBEB;\n\n    --color-input-title: #6F6F6F;\n    --color-input-placeholder: #D8D8D8;\n    --color-input-border: #D8D8D8;\n    --color-input-border-focus: #6F6F6F;\n    --color-input-value: #767676;\n    --color-input-value-error: #f66363;\n    --color-input-border-error: #f66363;\n    --color-input-border-focus-error: #b04c4c;\n\n    --color-button-background: #21CF7A;\n    --color-button-value: #FFFFFF;\n    --color-button-background-pressed: #24B66F;\n    --color-button-border-focus: #24B66F;\n\n    --color-link-value: #B5B5B5;\n    --color-link-underline-hover: #B5B5B5;\n    --color-link-value-pressed: #D8D8D8;\n    --color-limk-underline-pressed: #D8D8D8;\n\n    --color-header-background: #FFFFFF;\n\n    --color-logo:#FFFFFF;\n    --color-logo-background: #21CF7A;\n    --color-logo-border: #21CF7A;\n\n    --header-height: 50px;\n}\n\n#main {\n    margin-left: 100px;\n}\n\n#root {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    background: var(--background-color);\n}\n\n#header {\n    display: flex;\n    flex-direction: row;\n    z-index: 1;\n    height: var(--header-height);\n}\n\n#content {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    flex: 1 0 auto;\n    padding-top: 30px;\n    height: 100% - var(--header-height);\n}\n\n#footer {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n\n.aside {\n    position: absolute;\n    top: var(--header-height);\n    left: 0;\n    font-size: 20px;\n    padding-left: 20px;\n\n    /* background-color: var(--color-form-background); */\n    /* outline: 2px solid var(--color-form-border); */\n    /* outline-offset: -2px; */\n    /* border-radius: 10px; */\n    margin: 20px;\n    padding: 15px 10px;\n}\n\n@media screen and (max-device-width:799px) {\n    .aside {\n        font-size: 10px;\n\n    }\n}\n\n/* main {\n    grid-area: main;\n    padding: 0 40px 40px;\n    height: 600px;\n    width: 600px;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    display: flex;\n    justify-content: center;\n} */",""]);const f=h},570:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,".feed {\n    display: flex;\n    flex-direction: column;\n    width: 800px;\n    margin-left: 8%;\n    width: 70%;\n}\n\n.feed__element {\n    /* display: flex;\n    flex-direction: column;\n    align-items: flex-start; */\n    padding: 15px;\n    margin-bottom: 22px;\n\n\n    top: 0px;\n\n    /* White / White */\n\n    background: #FFFFFF;\n    border: 1px solid #EBEBEB;\n    /* Elevation 8 pt · Cards */\n\n    box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.08), 0px 2px 24px rgba(0, 0, 0, 0.08);\n    border-radius: 10px;\n}\n\n.feed__author {\n    display: flex;\n}\n\n.feed__author__photo {\n    width: 28px;\n    height: 28px;\n    background-color: gray;\n    border-radius: 50%;\n    margin-right: 19px;\n}\n\n.feed__date {\n    font-weight: 400;\n    font-size: 13px;\n    line-height: 16px;\n    /* or 123% */\n\n    letter-spacing: -0.078px;\n\n    /* Steel Gray / 400 */\n\n    color: #818C99;\n    margin: 5px 0;\n}\n\n.feed__description {\n    margin-bottom: 12px;\n}\n\n.feed__photo__wrapper {\n    display: block;\n}\n\n.feed__photo__img {\n    display: block;\n    width: 100% !important;\n    border-radius: 10px;\n}\n\n.feed__bottom {\n    padding-top: 10px;\n}\n\n.feed__bottom__likes {\n    font-style: normal;\n    font-weight: 400;\n    font-size: 13px;\n    line-height: 16px;\n    /* identical to box height, or 123% */\n\n    letter-spacing: -0.078px;\n\n    /* Steel Gray / 400 */\n\n    color: #818C99;\n}",""]);const a=s},917:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,".footer {\n  /* margin-top: 10px; */\n  transform: translateY(100%);\n  width: 100%;\n  height: 40px;\n  padding: 10px 0;\n  background-color: var(--color-footer-background);\n  color: var(--color-footer-text);\n  font-size: 12px;\n}\n\n.footer__container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 10px;\n}\n\n.footer__logo {\n  max-width: 100%;\n  max-height: 30px;\n  object-fit: cover;\n  padding: 5px 15px;\n}\n\n.contacts {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0 15px;\n}\n\n.contacts__item {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.contacts__item__icon {\n  height: 16px;\n  width: 100%;\n  object-fit: cover;\n  margin-left: 8px;\n  padding: 4px;\n  outline: 1px solid var(--color-footer-text);\n  outline-offset: -1px;\n  border-radius: 6px;\n}\n\n.company-name {\n  display: flex;\n  flex-direction: row;\n  padding: 0 15px;\n}",""]);const a=s},277:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,".header {\n    display: inline-flex;\n    width: 100%;\n    justify-content: space-between;\n    padding: 5px 10px;\n\n    background-color: var(--color-header-background);\n    box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.15);\n}\n\n.header__logo {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    margin: 2px 10px;\n    font-size: 20px;\n    font-weight: bold;\n    text-decoration: none;\n    background-color: var(--color-logo-background);\n    color: var(--color-logo);\n    padding: 8px;\n}\n\n.header__item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 0px 10% 0 15px;\n}\n\n.header__profile {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    border: none;\n    outline: 2px solid var(--color-button-background);\n    outline-offset: -2px;\n    border-radius: 8px;\n    padding: 3px 10px;\n    margin: 0 5px;\n    text-decoration: none;\n}\n\n.header__profile__avatar {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 2px solid inherit;\n    border-radius: 50%;\n    max-width: 100%;\n    max-height: 30px;\n    object-fit: cover;\n}\n\n.header__profile__name {\n    font-size: 14px;\n    font-weight: bold;\n    padding: 0 10px;\n    color: var(--color-input-value);\n}\n\n.header__profile__settings {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    outline: 2px solid var(--color-button-background);\n    outline-offset: -2px;\n    border-radius: 8px;\n    padding: 5px;\n}\n\n.header__profile__settings__icon {\n    max-width: 100%;\n    max-height: 30px;\n    object-fit: cover;\n}\n\n.header_button {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    border: none;\n    outline: 2px solid var(--color-button-background);\n    outline-offset: -2px;\n    border-radius: 8px;\n    padding: 8px 15px;\n    color: var(--color-button-background);\n    font-weight: bold;\n    text-decoration: none;\n    cursor: pointer;\n    background-color: inherit;\n}",""]);const a=s},833:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,".menu__item {\n    color: #514770;\n    color: #333333;\n    display: block;\n    padding-bottom: 10px;\n    text-decoration: none;\n}\n\n.menu__item:hover {\n    background-color: rgba(0, 255, 132, 0.106);\n    border-radius: 10px;\n}\n\n.menu__logout__link {\n    color: rgba(255, 0, 0, 0.4);\n}\n\n.menu__active__link {\n    font-weight: bold;\n}",""]);const a=s},771:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,".form {\n    display: flex;\n    flex-direction: column;\n    width: min-content;\n    height: min-content;\n    padding: 30px 50px;\n    outline: 2px solid var(--color-form-border);\n    outline-offset: -2px;\n    border-radius: 10px;\n    background-color: var(--color-form-background);\n    margin-right: 100px;\n}\n\n.form__title {\n    margin-bottom: 20px;\n    font-size: 24px;\n    font-weight: bold;\n    text-align: center;\n    color: var(--color-form-title);\n}\n\n.form__footer {\n    padding-top: 20px;\n}\n\n.form__footer__link {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 10px;\n    text-decoration: none;\n    text-align: center;\n    color: var(--color-link-value);\n}\n\n.form__footer__link:hover {\n    text-decoration: underline var(--color-link-underline-hover);\n}\n\n.form__footer__link:active {\n    color: var(--color-link-value-pressed);\n    text-decoration: underline var(--color-limk-underline-pressed);\n}\n\n.form__input {\n    display: block;\n    padding: 10px 20px;\n    border: none;\n    outline: 2px solid var(--color-input-border);\n    outline-offset: -2px;\n    border-radius: 8px;\n    font-size: 14px;\n    color: inherit;\n}\n\n.form__input:focus {\n    border-style: none;\n    outline-color: var(--color-input-border-focus);\n}\n\n.form__input__title {\n    color: var(--color-input-title);\n    margin-bottom: 2px;\n    font-size: 16px;\n}\n\n.form__input__error__msg{\n    color: var(--color-input-value-error);\n    font-size: 12px;\n    padding: 3px 8px 0px 8px;\n}\n\n.groupbox {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin-bottom: 10px;\n}\n\n.wrapper {\n    display: flex;\n    justify-content: center;\n}\n\n.form__button {\n    margin-top: 15px;\n    width: 100%;\n    cursor: pointer;\n    border: none;\n    outline: none;\n    border-radius: 8px;\n    padding: 10px 20px;\n    background-color: var(--color-button-background);\n    color: var(--color-button-value);\n    font-weight: bolder;\n}\n\n.form__button:hover {\n    border: none;\n    outline: none;\n    box-shadow: 0 5px 5px 1px var(--color-light-gray);\n}\n\n.form__button:focus {\n    outline: 2px solid var(--color-button-border-focus);\n    outline-offset: -2px;\n    box-shadow: 0 3px 5px 1px var(--color-lighter-gray);\n}\n\n.form__button:active {\n    outline: none;\n    border-style: none;\n    background-color: var(--color-button-background-pressed);\n}\n\n.form__input__error { \n    color: var(--color-input-value-error);\n    outline-color: var(--color-input-border-error);\n}\n\n.form__input__error:focus { \n    color: var(--color-input-value-error);\n    outline-color: var(--color-input-border-focus-error);\n}",""]);const a=s},633:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81),o=n.n(r),i=n(645),s=n.n(i),a=n(771),d=s()(o());d.i(a.Z),d.push([e.id,"\n",""]);const l=d},424:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81),o=n.n(r),i=n(645),s=n.n(i),a=n(22),d=s()(o());d.i(a.Z),d.push([e.id,"\n",""]);const l=d},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(s[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&s[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],a=0;a<e.length;a++){var d=e[a],l=r.base?d[0]+r.base:d[0],c=i[l]||0,p="".concat(l," ").concat(c);i[l]=c+1;var u=n(p),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var f=o(h,r);r.byIndex=a,t.splice(a,0,{identifier:p,updater:f,references:1})}s.push(p)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var d=r(e,o),l=0;l<i.length;l++){var c=n(i[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=d}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{class e{constructor(e){this.parent=e}getParent(){return this.parent}}function t(e){const t=document.createElement("div");return void 0!==e.id&&(t.id=e.id),t.textContent=e.text||"",void 0!==e.styles&&e.styles.forEach((e=>{t.classList.add(e)})),t}function r(e){const t=document.createElement("button");return t.id=e.id||"",t.textContent=e.text||"",void 0!==e.styles&&e.styles.forEach((e=>{t.classList.add(e)})),void 0!==e.event&&t.addEventListener(e.event.eventType,(t=>{var n;null===(n=e.event)||void 0===n||n.callback(t)})),t}function o(e){const t=document.createElement("a");return t.id=e.id||"",t.textContent=e.text||"",t.href=e.href||"",void 0!==e.styles&&e.styles.forEach((e=>{""!==e&&t.classList.add(e)})),void 0!==e.event&&t.addEventListener(e.event.eventType,(t=>{var n;null===(n=e.event)||void 0===n||n.callback(t)})),t}function i(e){const t=document.createElement("input");return t.type=e.type||"",t.id=e.id||"",t.placeholder=e.placeholder||"",void 0!==e.styles&&e.styles.forEach((e=>{t.classList.add(e)})),void 0!==e.dataset&&(t.dataset[e.dataset.key]=e.dataset.value),t}function s(e){const t=document.createElement("form");return t.acceptCharset=e.acceptCharset||"",t.action=e.action||"",t.autocomplete=e.autocomplete?"on":"off",t.enctype=e.enctype||"",t.method=e.method||"",t.name=e.name||"",t.noValidate=!!e.novalidate,t.target=e.target||"",t.id=e.id||"",void 0!==e.styles&&e.styles.forEach((e=>{t.classList.add(e)})),t}const a={title:"Добро пожаловать!",fields:[{title:"E-mail:",type:"email",id:"email-input",dataset:{key:"model_field",value:"email"},placeholder:"George@domain.com"},{title:"Пароль:",type:"password",id:"password-input",dataset:{key:"model_field",value:"password"},placeholder:"*****"}],submit:{id:"signin-submit-btn",text:"Войти"},footer:[{href:"/signup",id:"link-signup",text:"Нет аккаунта?"}]};function d(e,t){if(void 0!==e&&void 0!==t)switch(e){case"first_name":return/^[a-zа-я]{1,10}$/dgi.test(t)?{isValid:!0,msgError:""}:{isValid:!1,msgError:"Имя может состоять из русских и английских букв в одно слово"};case"last_name":return/^[a-zа-я]{1,10}$/dgi.test(t)?{isValid:!0,msgError:""}:{isValid:!1,msgError:"Фамилия может состоять из русских и английских букв в одно слово"};case"nick_name":return/^[\w]{1,10}$/dgi.test(t)?{isValid:!0,msgError:""}:{isValid:!1,msgError:"Псевдоним может состоять из английских букв и цифр без пробелов"};case"email":return/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/gi.test(t)?{isValid:!0,msgError:""}:{isValid:!1,msgError:"Введённый email имеет некорректный вид"};case"password":return/^(\S*){8,}$/dgi.test(t)?{isValid:!0,msgError:""}:{isValid:!1,msgError:"Минимальная длина пароля 8 символов без пробелов"};case"repeat_password":return{isValid:!0,msgError:""}}return{isValid:!0,msgError:"ОШибка!!!!!"}}class l extends e{constructor(e){super(e),this.form=this.createForm()}render(){this.parent.appendChild(this.form)}createForm(){const e=s({id:"signin-form",styles:["form"]}),n=t({text:a.title,styles:["form__title"]}),d=t({styles:["form__content"]});a.fields.forEach((e=>{const n=t({text:e.title,styles:["form__input__title"]}),r=i({type:e.type,id:e.id,placeholder:e.placeholder,dataset:e.dataset,styles:["form__input"]}),o=t({styles:["form__input__error__msg"]}),s=t({styles:["groupbox"]});s.appendChild(n),s.appendChild(r),s.appendChild(o),d.appendChild(s)}));const l=r({id:a.submit.id,text:a.submit.text,styles:["form__button"]}),c=t({styles:["wrapper"]}),p=t({styles:["form__footer"]});return a.footer.forEach((e=>{p.appendChild(o({id:e.id,text:e.text,href:e.href,styles:["form__footer__link"]}))})),c.appendChild(p),e.appendChild(n),e.appendChild(d),e.appendChild(l),e.appendChild(c),e}bindRedirect(e){a.footer.forEach((t=>{const n=this.form.querySelector("#"+t.id);null!==n&&n.addEventListener("click",(n=>{n.preventDefault(),e(t.href)}))}))}bindSubmitForm(e){const t=this.form.querySelector("#"+a.submit.id);null!==t&&t.addEventListener("click",(t=>{t.preventDefault();const{data:n,isCorrect:r}=this.getData();r&&e(n)}))}getData(){const e=new Map;let t=!0;return a.fields.forEach((n=>{var r,o;const i=this.form.querySelector("#"+n.id);if(null===i)return void(t=!1);e.set(i.dataset.model_field,i.value),i.classList.remove("form__input__error"),(null===(r=i.parentElement)||void 0===r?void 0:r.querySelector(".form__input__error__msg")).style.visibility="hidden";const s=d(i.dataset.model_field,i.value);if(!s.isValid&&"password"!=i.dataset.model_field){t=!1,i.classList.add("form__input__error");const e=null===(o=i.parentElement)||void 0===o?void 0:o.querySelector(".form__input__error__msg");e.style.visibility="visible",e.textContent=s.msgError}})),{data:e,isCorrect:t}}showErrorInvalidPassword(){var e;const t=this.form.querySelector("#password-input");if(null===t)return;const n=null===(e=t.parentElement)||void 0===e?void 0:e.querySelector(".form__input__error__msg");n.style.visibility="visible",n.textContent="Неверный пароль"}showErrorNoSuchUser(){var e;const t=this.form.querySelector("#email-input");if(null===t)return;const n=null===(e=t.parentElement)||void 0===e?void 0:e.querySelector(".form__input__error__msg");n.style.visibility="visible",n.textContent="Неверный email или пароль"}}const c={title:"Рады вас приветствовать!",fields:[{title:"Ваше имя:",type:"text",id:"fist-name-input",placeholder:"Георгий",dataset:{key:"model_field",value:"first_name"}},{title:"Ваша фамилия:",type:"text",id:"last-name-input",placeholder:"Пупкин",dataset:{key:"model_field",value:"last_name"}},{title:"Придумайте псевдоним:",type:"text",id:"nickname-input",placeholder:"GeorgePupkin123",dataset:{key:"model_field",value:"nick_name"}},{title:"E-mail:",type:"email",id:"email-input",placeholder:"George@domain.com",dataset:{key:"model_field",value:"email"}},{title:"Пароль:",type:"password",id:"password-input",placeholder:"*****",dataset:{key:"model_field",value:"password"}},{title:"Введите пароль ещё раз:",type:"password",id:"repeat-password-input",placeholder:"*****",dataset:{key:"model_field",value:"repeat_password"}}],submit:{id:"signup-submit-btn",text:"Зарегистрироваться"},footer:[{href:"/signin",id:"link-signin",text:"Уже есть аккаунт?"}]};class p extends e{constructor(e){super(e),this.form=this.createForm()}render(){this.parent.appendChild(this.form)}createForm(){const e=s({id:"signup-form",styles:["form"]}),n=t({text:c.title,styles:["form__title"]}),a=t({});c.fields.forEach((e=>{const n=t({text:e.title,styles:["form__input__title"]}),r=i({type:e.type,id:e.id,placeholder:e.placeholder,styles:["form__input"],dataset:e.dataset}),o=t({styles:["form__input__error__msg"]}),s=t({styles:["groupbox"]});s.appendChild(n),s.appendChild(r),s.appendChild(o),a.appendChild(s)}));const d=r({id:c.submit.id,text:c.submit.text,styles:["form__button"]}),l=t({styles:["wrapper"]}),p=t({styles:["form__footer"]});return c.footer.forEach((e=>{p.appendChild(o({id:e.id,text:e.text,href:e.href,styles:["form__footer__link"]}))})),l.appendChild(p),e.appendChild(n),e.appendChild(a),e.appendChild(d),e.appendChild(l),e}bindSubmitForm(e){const t=this.form.querySelector("#"+c.submit.id);null!==t&&t.addEventListener("click",(t=>{t.preventDefault();const{data:n,isCorrect:r}=this.getData();r&&e(n)}))}bindRedirect(e){c.footer.forEach((t=>{const n=this.form.querySelector("#"+t.id);null!==n&&n.addEventListener("click",(n=>{n.preventDefault(),e(t.href)}))}))}getData(){var e;const t=new Map;let n=!0;if(c.fields.forEach((e=>{var r;const o=this.form.querySelector("#"+e.id);if(null===o)return void(n=!1);t.set(o.dataset.model_field,o.value),o.classList.remove("form__input__error");const i=null===(r=o.parentElement)||void 0===r?void 0:r.querySelector(".form__input__error__msg");i.style.visibility="hidden";const s=d(o.dataset.model_field,o.value);s.isValid||(n=!1,o.classList.add("form__input__error"),i.style.visibility="visible",i.textContent=s.msgError)})),!t.has("repeat_password")||!t.has("repeat_password")||t.get("repeat_password")!==t.get("password")){n=!1;const t=this.form.querySelector("#repeat-password-input");if(null!==t){t.classList.add("form__input__error");const n=null===(e=t.parentElement)||void 0===e?void 0:e.querySelector(".form__input__error__msg");n.style.display="visible",n.textContent="Пароли не совпадают"}}return{data:t,isCorrect:n}}showErrorUserExists(){var e;const t=this.form.querySelector("#email-input");if(null===t)return;const n=null===(e=t.parentElement)||void 0===e?void 0:e.querySelector(".form__input__error__msg");n.style.visibility="visible",n.textContent="Пользователь с таким именем уже существует"}}function u(e){const t=document.createElement("img");return t.id=e.id||"",t.src=e.src||"",void 0!==e.styles&&e.styles.forEach((e=>{t.classList.add(e)})),t}class h extends e{constructor(e){super(e)}render(){const e=t({styles:["footer"]}),n=t({styles:["footer__container"]}),r=u({src:"../src/img/footer_logo.png",styles:["footer__logo"]}),i=t({text:"Contacts:",styles:["contacts"]}),s=o({event:{eventType:"click",callback:e=>{}},href:"tel:555-555-5555",styles:["contacts__item"]}),a=u({src:"../src/img/phone_icon.svg",styles:["contacts__item__icon"]});s.appendChild(a),i.appendChild(s);const d=t({text:"TikTikAndVProd2022",styles:["company-name"]});n.appendChild(r),n.appendChild(i),n.appendChild(d),e.appendChild(n),this.parent.appendChild(e)}hide(){const e=this.parent.querySelector(".footer");void 0!==e&&(e.style.visibility="hidden")}show(){const e=this.parent.querySelector(".footer");void 0!==e&&(e.style.display="visible")}}const f="/signin",m="/signup",_="/feed",y="/menu",g="/profile",v=new class{constructor(){this.routes=[],this.current=void 0}addPath(e){this.routes.push(e)}goToPath(e){const t=this.routes.find((t=>t.path==e));void 0!==t&&t.handler()}},x={feed:{href:"/feed",name:"Лента",style:"",id:"menu__item_0"},profile:{href:"/profile",name:"Профиль",style:"",id:"menu__item_1"},logout:{href:"/logout",name:"Выйти",style:"menu__logout__link",id:"menu__item_2"}},b="http://localhost:8080";class w extends e{constructor(e){super(e)}changeActiveLink(e){var t,n;null===(t=document.getElementById(`menu__item_${this.activeLinkId}`))||void 0===t||t.classList.remove("menu__active__link"),this.activeLinkId=e,null===(n=document.getElementById(`menu__item_${this.activeLinkId}`))||void 0===n||n.classList.add("menu__active__link")}render(){const e=t({styles:["aside"]});Object.entries(x).map((([e,{href:t,name:n,style:r}],i)=>{const s=o({id:"menu__item_"+String(i),href:t,text:n,styles:["menu__item",r]});return s.dataset.section=e,0===i&&(s.classList.add("menu__active__link"),this.activeLinkId=i),s})).forEach((t=>{e.appendChild(t)})),this.parent.appendChild(e)}}class k{constructor(e){this.parent=e}render(e){const n=t({styles:["feed"]});e.forEach((e=>{const r=t({styles:["feed__element"]}),o=t({styles:["feed__author"]});o.appendChild(t({styles:["feed__author__photo"]})),o.appendChild(t({styles:["feed__author__name"],text:e.author_name}));const i=t({styles:["feed__date"],text:e.date.toString()}),s=t({styles:["feed__photo__wrapper"]});s.innerHTML='<img class=feed__photo__img src="../src/img/img-worlds-of-adventure.jpg"/><div';const a=t({styles:["feed__description"],text:e.description}),d=t({styles:["feed__bottom"]}),l=t({styles:["feed__bottom__likes"],text:`Likes · ${e.likes}`});d.appendChild(l),r.appendChild(o),r.appendChild(i),r.appendChild(a),r.appendChild(s),r.appendChild(d),n.appendChild(r)})),this.parent.appendChild(n)}}class C{constructor(e,t){this.view=e,this.model=t}}class E extends C{constructor(e,t){super(e,t),this.view.bindSubmitForm(this.submitSigninForm.bind(this)),this.view.bindRedirect(this.redirect.bind(this))}submitSigninForm(e){const t={email:e.get("email")||"",password:e.get("password")||""};this.model.authUser(t).then((({status:e,body:t})=>{v.goToPath(y),v.goToPath(_)})).catch((({status:e,body:t})=>{switch(e){case 401:this.view.showErrorInvalidPassword();break;case 404:this.view.showErrorNoSuchUser()}}))}redirect(e){v.goToPath(e)}}class F extends C{constructor(e,t){super(e,t),this.view.bindSubmitForm(this.submitSignupForm.bind(this)),this.view.bindRedirect(this.redirect.bind(this))}submitSignupForm(e){const t={first_name:e.get("first_name")||"",last_name:e.get("last_name")||"",nick_name:e.get("nick_name")||"",email:e.get("email")||"",password:e.get("password")||""};this.model.registerUser(t).then((({status:e,body:t})=>{v.goToPath(y),v.goToPath(_)})).catch((({status:e,body:t})=>{409===e&&this.view.showErrorUserExists()}))}redirect(e){v.goToPath(e)}}const P=new class{async asyncFetch(e){const t=await fetch(e.url,{method:e.method,body:e.body,credentials:"include"}),n=await t.json();return{status:t.status,parsedBody:n}}async get(e){return await this.asyncFetch({url:e,method:"GET"})}async post(e,t){return await this.asyncFetch({url:e,method:"POST",body:t})}async put(e,t){return await this.asyncFetch({url:e,method:"PUT",body:t})}async getTest(e){return Promise.reject({status:400,parsedBody:"none"})}};class T{constructor(e){this.view=e,this.view.getParent().addEventListener("click",this.clickHandler.bind(this))}clickHandler(e){e.preventDefault();const t=e.target;if(null!==t){if(t.id===x.feed.id)return this.view.changeActiveLink(0),void v.goToPath(_);if(t.id===x.profile.id)return this.view.changeActiveLink(1),void v.goToPath(g);if(t.id===x.logout.id)return P.get(`${b}/logout`),void v.goToPath(f)}}}class S{constructor(){}}class B extends S{constructor(){super(),this.currentUser=null}async authUser(e){const t=await P.post(`${b}/signin`,JSON.stringify(e));return this.currentUser={first_name:t.parsedBody.body.first_name,last_name:t.parsedBody.body.last_name,nick_name:t.parsedBody.body.nick_name,email:t.parsedBody.body.email,id:t.parsedBody.body.id},200===t.status?Promise.resolve({status:t.status,body:t.parsedBody}):Promise.reject({status:t.status,body:t.parsedBody})}async registerUser(e){const t=await P.post(`${b}/signup`,JSON.stringify(e));return this.currentUser={first_name:t.parsedBody.body.first_name,last_name:t.parsedBody.body.last_name,nick_name:t.parsedBody.body.nick_name,email:t.parsedBody.body.email,id:t.parsedBody.body.id},201===t.status?Promise.resolve({status:t.status,body:t.parsedBody}):Promise.reject({status:t.status,body:t.parsedBody})}getCurrentUser(){return this.currentUser}async isAuthantificated(){const e=await P.get(`${b}/auth`);return this.currentUser={first_name:e.parsedBody.body.first_name,last_name:e.parsedBody.body.last_name,nick_name:e.parsedBody.body.nick_name,email:e.parsedBody.body.email,id:e.parsedBody.body.id},200===e.status?Promise.resolve({status:e.status,body:e.parsedBody}):Promise.reject({status:e.status,body:e.parsedBody})}}class L extends S{constructor(){super()}async getFeeds(){const e=await P.get(`${b}/feed`);let t=e.status,n=e.parsedBody.body.map((e=>({photoLinks:e.image_links,description:e.description,likes:228,date:`${new Date(e.create_date).toJSON().slice(0,10).replace(/-/g,"/")}`,author_name:e.user_first_name,author_photo:""})));return 200===e.status?Promise.resolve({status:t,body:n}):Promise.reject({status:t,body:n})}}class V extends e{constructor(e){super(e)}render(){const e=document.createElement("div"),t=document.createElement("div");e.appendChild(t),t.innerText="PROFILE WILL BE APPEND IN THE NEXT UPDATES!",this.parent.appendChild(e)}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initPage(),this.initModels(),this.initViews(),this.initControllers(),this.initRouter()}var n,i;return n=e,(i=[{key:"run",value:function(){this.footerView.render(),this.headerView.render(),this.userModel.isAuthantificated().then((function(e){e.status,e.body,v.goToPath(y),v.goToPath(_)})).catch((function(e){e.status,e.body,v.goToPath(f)}))}},{key:"handleRedirectToSignin",value:function(){this.menu.innerHTML="",this.main.innerHTML="",this.headerView.setSignupButton(),this.headerView.show(),this.footerView.show(),this.signinView.render()}},{key:"handleRedirectToSignup",value:function(){this.menu.innerHTML="",this.main.innerHTML="",this.headerView.setSigninButton(),this.headerView.show(),this.footerView.show(),this.signupView.render()}},{key:"handleRedirectMenu",value:function(){this.menu.innerHTML="",this.menuView.render()}},{key:"handleRedirectToFeedPage",value:function(){var e=this;this.main.innerHTML="",this.headerView.show(),this.footerView.hide(),this.headerView.setProfile(this.userModel.getCurrentUser()),this.feedModel.getFeeds().then((function(t){t.status;var n=t.body;e.feedView.render(n)})).catch((function(e){e.status,e.body,v.goToPath(f)}))}},{key:"handleRedirectProfile",value:function(){this.main.innerHTML="",this.headerView.show(),this.footerView.hide(),this.profileView.render()}},{key:"initPage",value:function(){this.root=t({id:"root"}),this.header=t({id:"header"}),this.content=t({id:"content"}),this.menu=t({id:"menu"}),this.main=t({id:"main"}),this.footer=t({id:"footer"}),this.root.appendChild(this.header),this.root.appendChild(this.content),this.content.appendChild(this.menu),this.content.appendChild(this.main),this.root.appendChild(this.footer),document.body.appendChild(this.root)}},{key:"initViews",value:function(){this.signinView=new l(this.main),this.signupView=new p(this.main),this.footerView=new h(this.footer),this.headerView=new class{constructor(e){this.parent=e}render(){const e=t({styles:["header"]}),n=o({text:"WS",styles:["header__logo"]});e.appendChild(n),this.link=t({id:"header__item",styles:["header__item"],text:""}),e.appendChild(this.link),this.parent.appendChild(e)}hide(){const e=this.parent.querySelector(".header");void 0!==e&&(e.style.display="none")}show(){const e=this.parent.querySelector(".header");void 0!==e&&(e.style.display="visible")}setSignupButton(){this.link.innerHTML="",this.renderButtonItem("Зарегистрироваться",m)}setSigninButton(){this.link.innerHTML="",this.renderButtonItem("Войти",f)}setProfile(e){null!==e&&(this.link.innerHTML="",this.renderProfileItem(e))}renderProfileItem(e){const t=o({event:{eventType:"click",callback:()=>{v.goToPath(g)}},styles:["header__profile"]}),n=u({src:"../src/img/avatar_pavel.jpg",styles:["header__profile__avatar"]}),r=function(e){const t=document.createElement("text");return t.textContent=e.text||"",void 0!==e.styles&&e.styles.forEach((e=>{t.classList.add(e)})),t}({text:e.first_name,styles:["header__profile__name"]});t.appendChild(n),t.appendChild(r);const i=o({href:g,styles:["header__profile__settings"]}),s=u({src:"../src/img/settings_icon.svg",styles:["header__profile__settings__icon"]});i.appendChild(s),this.link.appendChild(t),this.link.appendChild(i)}renderButtonItem(e,t){this.link.appendChild(r({id:"header__link__profile",text:e,styles:["header_button"],event:{eventType:"click",callback:e=>{e.preventDefault(),v.goToPath(t)}}}))}}(this.header),this.menuView=new w(this.menu),this.feedView=new k(this.main),this.profileView=new V(this.main)}},{key:"initModels",value:function(){this.userModel=new B,this.feedModel=new L}},{key:"initControllers",value:function(){this.signinController=new E(this.signinView,this.userModel),this.signupController=new F(this.signupView,this.userModel),this.menuController=new T(this.menuView)}},{key:"initRouter",value:function(){v.addPath({path:f,handler:this.handleRedirectToSignin.bind(this)}),v.addPath({path:m,handler:this.handleRedirectToSignup.bind(this)}),v.addPath({path:_,handler:this.handleRedirectToFeedPage.bind(this)}),v.addPath({path:g,handler:this.handleRedirectProfile.bind(this)}),v.addPath({path:y,handler:this.handleRedirectMenu.bind(this)})}}])&&j(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();var D=n(379),Z=n.n(D),q=n(795),I=n.n(q),A=n(569),R=n.n(A),U=n(565),z=n.n(U),H=n(216),$=n.n(H),N=n(589),O=n.n(N),G=n(424),J={};J.styleTagTransform=O(),J.setAttributes=z(),J.insert=R().bind(null,"head"),J.domAPI=I(),J.insertStyleElement=$(),Z()(G.Z,J),G.Z&&G.Z.locals&&G.Z.locals,(new M).run()})()})();